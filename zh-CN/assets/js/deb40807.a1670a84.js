"use strict";(self.webpackChunklinkis_web_apache=self.webpackChunklinkis_web_apache||[]).push([[86],{3905:(e,n,i)=>{i.d(n,{Zo:()=>p,kt:()=>g});var t=i(67294);function l(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function a(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function r(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?a(Object(i),!0).forEach((function(n){l(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function o(e,n){if(null==e)return{};var i,t,l=function(e,n){if(null==e)return{};var i,t,l={},a=Object.keys(e);for(t=0;t<a.length;t++)i=a[t],n.indexOf(i)>=0||(l[i]=e[i]);return l}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)i=a[t],n.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(l[i]=e[i])}return l}var s=t.createContext({}),c=function(e){var n=t.useContext(s),i=n;return e&&(i="function"==typeof e?e(n):r(r({},n),e)),i},p=function(e){var n=c(e.components);return t.createElement(s.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},_=t.forwardRef((function(e,n){var i=e.components,l=e.mdxType,a=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=c(i),_=l,g=d["".concat(s,".").concat(_)]||d[_]||u[_]||a;return i?t.createElement(g,r(r({ref:n},p),{},{components:i})):t.createElement(g,r({ref:n},p))}));function g(e,n){var i=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var a=i.length,r=new Array(a);r[0]=_;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o[d]="string"==typeof e?e:l,r[1]=o;for(var c=2;c<a;c++)r[c]=i[c];return t.createElement.apply(null,r)}return t.createElement.apply(null,i)}_.displayName="MDXCreateElement"},27399:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var t=i(87462),l=(i(67294),i(3905));const a={title:"\u5982\u4f55\u5b9e\u73b0\u65b0\u5f15\u64ce",sidebar_position:8},r=void 0,o={unversionedId:"development/new-engine-conn",id:"development/new-engine-conn",title:"\u5982\u4f55\u5b9e\u73b0\u65b0\u5f15\u64ce",description:"1. Linkis\u65b0\u5f15\u64ce\u529f\u80fd\u4ee3\u7801\u5b9e\u73b0",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/development/new-engine-conn.md",sourceDirName:"development",slug:"/development/new-engine-conn",permalink:"/zh-CN/docs/1.4.0/development/new-engine-conn",draft:!1,editUrl:"https://github.com/apache/linkis-website/edit/dev/i18n/zh-CN/docusaurus-plugin-content-docs/current/development/new-engine-conn.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{title:"\u5982\u4f55\u5b9e\u73b0\u65b0\u5f15\u64ce",sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"\u5bb9\u5668\u5316\u5f00\u53d1\u8c03\u8bd5",permalink:"/zh-CN/docs/1.4.0/development/debug-with-helm-charts"},next:{title:"\u5982\u4f55\u5b9e\u73b0\u65b0\u7684\u5fae\u670d\u52a1",permalink:"/zh-CN/docs/1.4.0/development/new-microservice"}},s={},c=[{value:"1. Linkis\u65b0\u5f15\u64ce\u529f\u80fd\u4ee3\u7801\u5b9e\u73b0",id:"1-linkis\u65b0\u5f15\u64ce\u529f\u80fd\u4ee3\u7801\u5b9e\u73b0",level:2},{value:"1.1 \u65b0\u5efa\u4e00\u4e2amaven\u6a21\u5757\uff0c\u5e76\u5f15\u5165ECP\u7684maven\u4f9d\u8d56",id:"11-\u65b0\u5efa\u4e00\u4e2amaven\u6a21\u5757\u5e76\u5f15\u5165ecp\u7684maven\u4f9d\u8d56",level:3},{value:"1.2 \u5b9e\u73b0ECP\u7684\u4e3b\u8981\u63a5\u53e3",id:"12-\u5b9e\u73b0ecp\u7684\u4e3b\u8981\u63a5\u53e3",level:3},{value:"1.3 \u5b9e\u73b0\u5f15\u64ceExecutor\u6267\u884c\u5668\u903b\u8f91",id:"13-\u5b9e\u73b0\u5f15\u64ceexecutor\u6267\u884c\u5668\u903b\u8f91",level:3},{value:"2. \u4ee5JDBC\u5f15\u64ce\u4e3a\u4f8b\u8be6\u89e3\u65b0\u5f15\u64ce\u7684\u5b9e\u73b0\u6b65\u9aa4",id:"2-\u4ee5jdbc\u5f15\u64ce\u4e3a\u4f8b\u8be6\u89e3\u65b0\u5f15\u64ce\u7684\u5b9e\u73b0\u6b65\u9aa4",level:2},{value:"2.1 \u5e76\u53d1\u5f15\u64ce\u8bbe\u7f6e\u9ed8\u8ba4\u542f\u52a8\u7528\u6237",id:"21-\u5e76\u53d1\u5f15\u64ce\u8bbe\u7f6e\u9ed8\u8ba4\u542f\u52a8\u7528\u6237",level:3},{value:"2.2 \u65b0\u5f15\u64ce\u7c7b\u578b\u6269\u5c55",id:"22-\u65b0\u5f15\u64ce\u7c7b\u578b\u6269\u5c55",level:3},{value:"2.3 JDBC\u5f15\u64ce\u6807\u7b7e\u4e2d\u7684\u7248\u672c\u53f7\u8bbe\u7f6e",id:"23-jdbc\u5f15\u64ce\u6807\u7b7e\u4e2d\u7684\u7248\u672c\u53f7\u8bbe\u7f6e",level:3},{value:"2.4 \u5141\u8bb8\u811a\u672c\u7f16\u8f91\u5668\u6253\u5f00\u7684\u811a\u672c\u6587\u4ef6\u7c7b\u578b",id:"24-\u5141\u8bb8\u811a\u672c\u7f16\u8f91\u5668\u6253\u5f00\u7684\u811a\u672c\u6587\u4ef6\u7c7b\u578b",level:3},{value:"2.5 \u914d\u7f6eJDBC\u811a\u672c\u53d8\u91cf\u5b58\u50a8\u548c\u89e3\u6790",id:"25-\u914d\u7f6ejdbc\u811a\u672c\u53d8\u91cf\u5b58\u50a8\u548c\u89e3\u6790",level:3},{value:"2.6 Linkis\u7ba1\u7406\u5458\u53f0\u754c\u9762\u5f15\u64ce\u7ba1\u7406\u5668\u4e2d\u52a0\u5165JDBC\u5f15\u64ce\u6587\u5b57\u63d0\u793a\u6216\u56fe\u6807",id:"26-linkis\u7ba1\u7406\u5458\u53f0\u754c\u9762\u5f15\u64ce\u7ba1\u7406\u5668\u4e2d\u52a0\u5165jdbc\u5f15\u64ce\u6587\u5b57\u63d0\u793a\u6216\u56fe\u6807",level:3},{value:"2.7 JDBC\u5f15\u64ce\u7684\u7f16\u8bd1\u6253\u5305\u548c\u5b89\u88c5\u90e8\u7f72",id:"27-jdbc\u5f15\u64ce\u7684\u7f16\u8bd1\u6253\u5305\u548c\u5b89\u88c5\u90e8\u7f72",level:3},{value:"2.8 JDBC\u5f15\u64ce\u6570\u636e\u5e93\u914d\u7f6e",id:"28-jdbc\u5f15\u64ce\u6570\u636e\u5e93\u914d\u7f6e",level:3},{value:"2.9 DSS Scripts\u4e2d\u65b0\u589eJDBC\u811a\u672c\u7c7b\u578b\u4ee5\u53ca\u56fe\u6807\u7b49\u4fe1\u606f",id:"29-dss-scripts\u4e2d\u65b0\u589ejdbc\u811a\u672c\u7c7b\u578b\u4ee5\u53ca\u56fe\u6807\u7b49\u4fe1\u606f",level:3},{value:"2.9.1 scriptis.js",id:"291-scriptisjs",level:4},{value:"2.9.2 \u811a\u672c\u590d\u5236\u652f\u6301",id:"292-\u811a\u672c\u590d\u5236\u652f\u6301",level:4},{value:"2.9.3 logo\u4e0e\u5b57\u4f53\u914d\u8272",id:"293-logo\u4e0e\u5b57\u4f53\u914d\u8272",level:4},{value:"2.10 DSS\u7684\u5de5\u4f5c\u6d41\u9002\u914d",id:"210-dss\u7684\u5de5\u4f5c\u6d41\u9002\u914d",level:3},{value:"3. \u672c\u7ae0\u5c0f\u7ed3",id:"3-\u672c\u7ae0\u5c0f\u7ed3",level:2}],p={toc:c},d="wrapper";function u(e){let{components:n,...a}=e;return(0,l.kt)(d,(0,t.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"1-linkis\u65b0\u5f15\u64ce\u529f\u80fd\u4ee3\u7801\u5b9e\u73b0"},"1. Linkis\u65b0\u5f15\u64ce\u529f\u80fd\u4ee3\u7801\u5b9e\u73b0"),(0,l.kt)("p",null,"\u5b9e\u73b0\u4e00\u4e2a\u65b0\u7684\u5f15\u64ce\u5176\u5b9e\u5c31\u662f\u5b9e\u73b0\u4e00\u4e2a\u65b0\u7684EngineConnPlugin\uff08ECP\uff09\u5f15\u64ce\u63d2\u4ef6\u3002\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff1a"),(0,l.kt)("h3",{id:"11-\u65b0\u5efa\u4e00\u4e2amaven\u6a21\u5757\u5e76\u5f15\u5165ecp\u7684maven\u4f9d\u8d56"},"1.1 \u65b0\u5efa\u4e00\u4e2amaven\u6a21\u5757\uff0c\u5e76\u5f15\u5165ECP\u7684maven\u4f9d\u8d56"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"maven\u4f9d\u8d56",src:i(26052).Z,width:"1010",height:"270"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>org.apache.linkis</groupId>\n    <artifactId>linkis-engineconn-plugin-core</artifactId>\n    <version>${linkis.version}</version>\n</dependency>\n\x3c!-- \u4ee5\u53ca\u4e00\u4e9b\u5176\u4ed6\u6240\u9700\u4f9d\u8d56\u7684maven\u914d\u7f6e --\x3e\n")),(0,l.kt)("h3",{id:"12-\u5b9e\u73b0ecp\u7684\u4e3b\u8981\u63a5\u53e3"},"1.2 \u5b9e\u73b0ECP\u7684\u4e3b\u8981\u63a5\u53e3"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"EngineConnPlugin\uff1a")," \u542f\u52a8EngineConn\u65f6\uff0c\u5148\u627e\u5230\u5bf9\u5e94\u7684EngineConnPlugin\u7c7b\uff0c\u4ee5\u6b64\u4e3a\u5165\u53e3\uff0c\u83b7\u53d6\u5176\u5b83\u6838\u5fc3\u63a5\u53e3\u7684\u5b9e\u73b0\uff0c\u662f\u5fc5\u987b\u5b9e\u73b0\u7684\u4e3b\u8981\u63a5\u53e3\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"EngineConnFactory\uff1a")," \u5b9e\u73b0\u5982\u4f55\u542f\u52a8\u4e00\u4e2a\u5f15\u64ce\u8fde\u63a5\u5668\uff0c\u548c\u5982\u4f55\u542f\u52a8\u4e00\u4e2a\u5f15\u64ce\u6267\u884c\u5668\u7684\u903b\u8f91\uff0c\u662f\u5fc5\u987b\u5b9e\u73b0\u7684\u63a5\u53e3\u3002"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u73b0createEngineConn\u65b9\u6cd5\uff1a\u8fd4\u56de\u4e00\u4e2aEngineConn\u5bf9\u8c61\uff0c\u5176\u4e2d\uff0cgetEngine\u8fd4\u56de\u4e00\u4e2a\u5c01\u88c5\u4e86\u4e0e\u5e95\u5c42\u5f15\u64ce\u8fde\u63a5\u4fe1\u606f\u7684\u5bf9\u8c61\uff0c\u540c\u65f6\u5305\u542bEngine\u7c7b\u578b\u4fe1\u606f\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u53ea\u652f\u6301\u5355\u4e00\u8ba1\u7b97\u573a\u666f\u7684\u5f15\u64ce\uff0c\u7ee7\u627fSingleExecutorEngineConnFactory\uff0c\u5b9e\u73b0createExecutor\uff0c\u8fd4\u56de\u5bf9\u5e94\u7684Executor\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u4e8e\u652f\u6301\u591a\u8ba1\u7b97\u573a\u666f\u7684\u5f15\u64ce\uff0c\u9700\u8981\u7ee7\u627fMultiExecutorEngineConnFactory\uff0c\u5e76\u4e3a\u6bcf\u79cd\u8ba1\u7b97\u7c7b\u578b\u5b9e\u73b0\u4e00\u4e2aExecutorFactory\u3002EngineConnPlugin\u4f1a\u901a\u8fc7\u53cd\u5c04\u83b7\u53d6\u6240\u6709\u7684ExecutorFactory\uff0c\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fd4\u56de\u5bf9\u5e94\u7684Executor\u3002"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"EngineConnResourceFactory\uff1a")," \u7528\u4e8e\u9650\u5b9a\u542f\u52a8\u4e00\u4e2a\u5f15\u64ce\u6240\u9700\u8981\u7684\u8d44\u6e90\uff0c\u5f15\u64ce\u542f\u52a8\u524d\uff0c\u5c06\u4ee5\u6b64\u4e3a\u4f9d \u636e \u5411 Linkis Manager \u7533 \u8bf7 \u8d44 \u6e90\u3002\u975e\u5fc5\u987b\uff0c\u9ed8\u8ba4\u53ef\u4ee5\u4f7f\u7528GenericEngineResourceFactory\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"EngineLaunchBuilder\uff1a")," \u7528\u4e8e\u5c01\u88c5EngineConnManager\u53ef\u4ee5\u89e3\u6790\u6210\u542f\u52a8\u547d\u4ee4\u7684\u5fc5\u8981\u4fe1\u606f\u3002\u975e\u5fc5\u987b\uff0c\u53ef\u4ee5\u76f4\u63a5\u7ee7\u627fJavaProcessEngineConnLaunchBuilder\u3002"))),(0,l.kt)("h3",{id:"13-\u5b9e\u73b0\u5f15\u64ceexecutor\u6267\u884c\u5668\u903b\u8f91"},"1.3 \u5b9e\u73b0\u5f15\u64ceExecutor\u6267\u884c\u5668\u903b\u8f91"),(0,l.kt)("p",null,"Executor\u4e3a\u6267\u884c\u5668\uff0c\u4f5c\u4e3a\u771f\u6b63\u7684\u8ba1\u7b97\u573a\u666f\u6267\u884c\u5668\uff0c\u662f\u5b9e\u9645\u7684\u8ba1\u7b97\u903b\u8f91\u6267\u884c\u5355\u5143\uff0c\u4e5f\u662f\u5bf9\u5f15\u64ce\u5404\u79cd\u5177\u4f53\u80fd\u529b\u7684\u62bd\u8c61\uff0c\u63d0\u4f9b\u52a0\u9501\u3001\u8bbf\u95ee\u72b6\u6001\u3001\u83b7\u53d6\u65e5\u5fd7\u7b49\u591a\u79cd\u4e0d\u540c\u7684\u670d\u52a1\u3002\u5e76\u6839\u636e\u5b9e\u9645\u7684\u4f7f\u7528\u9700\u8981\uff0cLinkis\u9ed8\u8ba4\u63d0\u4f9b\u4ee5\u4e0b\u7684\u6d3e\u751fExecutor\u57fa\u7c7b\uff0c\u5176\u7c7b\u540d\u548c\u4e3b\u8981\u4f5c\u7528\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"SensibleExecutor\uff1a"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Executor\u5b58\u5728\u591a\u79cd\u72b6\u6001\uff0c\u5141\u8bb8Executor\u5207\u6362\u72b6\u6001"),(0,l.kt)("li",{parentName:"ul"},"Executor\u5207\u6362\u72b6\u6001\u540e\uff0c\u5141\u8bb8\u505a\u901a\u77e5\u7b49\u64cd\u4f5c"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"YarnExecutor\uff1a")," \u6307Yarn\u7c7b\u578b\u7684\u5f15\u64ce\uff0c\u80fd\u591f\u83b7\u53d6\u5f97\u5230applicationId\u548capplicationURL\u548c\u961f\u5217\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ResourceExecutor\uff1a")," \u6307\u5f15\u64ce\u5177\u5907\u8d44\u6e90\u52a8\u6001\u53d8\u5316\u7684\u80fd\u529b\uff0c\u914d\u5408\u63d0\u4f9brequestExpectedResource\u65b9\u6cd5\uff0c\u7528\u4e8e\u6bcf\u6b21\u5e0c\u671b\u66f4\u6539\u8d44\u6e90\u65f6\uff0c\u5148\u5411RM\u7533\u8bf7\u65b0\u7684\u8d44\u6e90\uff1b\u800cresourceUpdate\u65b9\u6cd5\uff0c\u7528\u4e8e\u6bcf\u6b21\u5f15\u64ce\u5b9e\u9645\u4f7f\u7528\u8d44\u6e90\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5411RM\u6c47\u62a5\u8d44\u6e90\u60c5\u51b5\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"AccessibleExecutor\uff1a")," \u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684Executor\u57fa\u7c7b\u3002\u5982\u679c\u7528\u6237\u7684Executor\u7ee7\u627f\u4e86\u8be5\u57fa\u7c7b\uff0c\u5219\u8868\u793a\u8be5Engine\u662f\u53ef\u4ee5\u88ab\u8bbf\u95ee\u7684\u3002\u8fd9\u91cc\u9700\u533a\u5206SensibleExecutor\u7684state()\u548c AccessibleExecutor \u7684 getEngineStatus()\u65b9\u6cd5\uff1astate()\u7528\u4e8e\u83b7\u53d6\u5f15\u64ce\u72b6\u6001\uff0cgetEngineStatus()\u4f1a\u83b7\u53d6\u5f15\u64ce\u7684\u72b6\u6001\u3001\u8d1f\u8f7d\u3001\u5e76\u53d1\u7b49\u57fa\u7840\u6307\u6807Metric\u6570\u636e\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u540c\u65f6\uff0c\u5982\u679c\u7ee7\u627f\u4e86 AccessibleExecutor\uff0c\u4f1a\u89e6\u53d1Engine \u8fdb\u7a0b\u5b9e\u4f8b\u5316\u591a\u4e2aEngineReceiver\u65b9\u6cd5\u3002EngineReceiver\u7528\u4e8e\u5904\u7406Entrance\u3001EM\u548cLinkisMaster\u7684RPC\u8bf7\u6c42\uff0c\u4f7f\u5f97\u8be5\u5f15\u64ce\u53d8\u6210\u4e86\u4e00\u4e2a\u53ef\u88ab\u8bbf\u95ee\u7684\u5f15\u64ce\uff0c\u7528\u6237\u5982\u679c\u6709\u7279\u6b8a\u7684RPC\u9700\u6c42\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0RPCService\u63a5\u53e3\uff0c\u8fdb\u800c\u5b9e\u73b0\u4e0eAccessibleExecutor\u901a\u4fe1\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ExecutableExecutor\uff1a")," \u662f\u4e00\u4e2a\u5e38\u9a7b\u578b\u7684Executor\u57fa\u7c7b\uff0c\u5e38\u9a7b\u578b\u7684Executor\u5305\u542b\uff1a\u751f\u4ea7\u4e2d\u5fc3\u7684Streaming\u5e94\u7528\u3001\u63d0\u4ea4\u7ed9Schedulis\u540e\u6307\u5b9a\u8981\u4ee5\u72ec\u7acb\u6a21\u5f0f\u8fd0\u884c\u7684\u811a\u6b65\u3001\u4e1a\u52a1\u7528\u6237\u7684\u4e1a\u52a1\u5e94\u7528\u7b49\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"StreamingExecutor\uff1a")," Streaming\u4e3a\u6d41\u5f0f\u5e94\u7528\uff0c\u7ee7\u627f\u81eaExecutableExecutor\uff0c\u9700\u5177\u5907\u8bca\u65ad\u3001do checkpoint\u3001\u91c7\u96c6\u4f5c\u4e1a\u4fe1\u606f\u3001\u76d1\u63a7\u544a\u8b66\u7684\u80fd\u529b\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ComputationExecutor\uff1a")," \u662f\u5e38\u7528\u7684\u4ea4\u4e92\u5f0f\u5f15\u64ceExecutor\uff0c\u5904\u7406\u4ea4\u4e92\u5f0f\u6267\u884c\u4efb\u52a1\uff0c\u5e76\u4e14\u5177\u5907\u72b6\u6001\u67e5\u8be2\u3001\u4efb\u52a1kill\u7b49\u4ea4\u4e92\u5f0f\u80fd\u529b\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"ConcurrentComputationExecutor\uff1a")," \u7528\u6237\u5e76\u53d1\u5f15\u64ceExecutor\uff0c\u5e38\u7528\u4e8eJDBC\u7c7b\u578b\u5f15\u64ce\uff0c\u6267\u884c\u811a\u672c\u65f6\uff0c\u7531\u7ba1\u7406\u5458\u8d26\u6237\u62c9\u8d77\u5f15\u64ce\u5b9e\u4f8b\uff0c\u6240\u6709\u7528\u6237\u5171\u4eab\u5f15\u64ce\u5b9e\u4f8b\u3002")),(0,l.kt)("h2",{id:"2-\u4ee5jdbc\u5f15\u64ce\u4e3a\u4f8b\u8be6\u89e3\u65b0\u5f15\u64ce\u7684\u5b9e\u73b0\u6b65\u9aa4"},"2. \u4ee5JDBC\u5f15\u64ce\u4e3a\u4f8b\u8be6\u89e3\u65b0\u5f15\u64ce\u7684\u5b9e\u73b0\u6b65\u9aa4"),(0,l.kt)("p",null,"\u672c\u7ae0\u8282\u4ee5JDBC\u5f15\u64ce\u4e3e\u4f8b\uff0c\u8be6\u89e3\u65b0\u5f15\u64ce\u7684\u5b9e\u73b0\u8fc7\u7a0b\uff0c\u5305\u62ec\u5f15\u64ce\u4ee3\u7801\u7684\u7f16\u8bd1\u3001\u5b89\u88c5\u3001\u6570\u636e\u5e93\u914d\u7f6e\uff0c\u7ba1\u7406\u53f0\u5f15\u64ce\u6807\u7b7e\u9002\u914d\uff0c\u4ee5\u53caScripts\u4e2d\u65b0\u5f15\u64ce\u811a\u672c\u7c7b\u578b\u6269\u5c55\u548c\u5de5\u4f5c\u6d41\u65b0\u5f15\u64ce\u7684\u4efb\u52a1\u8282\u70b9\u6269\u5c55\u7b49\u3002"),(0,l.kt)("h3",{id:"21-\u5e76\u53d1\u5f15\u64ce\u8bbe\u7f6e\u9ed8\u8ba4\u542f\u52a8\u7528\u6237"},"2.1 \u5e76\u53d1\u5f15\u64ce\u8bbe\u7f6e\u9ed8\u8ba4\u542f\u52a8\u7528\u6237"),(0,l.kt)("p",null,"JDBC\u5f15\u64ce\u4e2d\u7684\u6838\u5fc3\u7c7b",(0,l.kt)("inlineCode",{parentName:"p"},"JDBCEngineConnExecutor"),"\u7ee7\u627f\u7684\u62bd\u8c61\u7c7b\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"ConcurrentComputationExecutor"),"\uff0c\u8ba1\u7b97\u7c7b\u5f15\u64ce\u4e2d\u7684\u6838\u5fc3\u7c7b",(0,l.kt)("inlineCode",{parentName:"p"},"XXXEngineConnExecutor"),"\u7ee7\u627f\u7684\u62bd\u8c61\u7c7b\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"ComputationExecutor"),"\u3002\u8fd9\u5bfc\u81f4\u4e24\u8005\u6700\u5927\u7684\u4e00\u4e2a\u533a\u522b\u662f\uff1aJDBC\u5f15\u64ce\u5b9e\u4f8b\u7531\u7ba1\u7406\u5458\u7528\u6237\u542f\u52a8\uff0c\u88ab\u6240\u6709\u7528\u6237\u5171\u4eab\uff0c\u4ee5\u63d0\u9ad8\u673a\u5668\u8d44\u6e90\u5229\u7528\u7387\uff1b\u800c\u8ba1\u7b97\u5f15\u64ce\u7c7b\u578b\u7684\u811a\u672c\u5728\u63d0\u4ea4\u65f6\uff0c\u6bcf\u4e2a\u7528\u6237\u4e0b\u4f1a\u542f\u52a8\u4e00\u4e2a\u5f15\u64ce\u5b9e\u4f8b\uff0c\u7528\u6237\u95f4\u5f15\u64ce\u5b9e\u4f8b\u4e92\u76f8\u9694\u79bb\u3002\u8fd9\u4e2a\u5728\u6b64\u5904\u6682\u4e0d\u7ec6\u8bf4\uff0c\u56e0\u4e3a\u65e0\u8bba\u662f\u5e76\u53d1\u5f15\u64ce\u8fd8\u662f\u8ba1\u7b97\u5f15\u64ce\uff0c\u4e0b\u6587\u63d0\u5230\u7684\u989d\u5916\u4fee\u6539\u6d41\u7a0b\u5e94\u662f\u4e00\u81f4\u7684\u3002"),(0,l.kt)("p",null,"\u76f8\u5e94\u7684\uff0c\u5982\u679c\u4f60\u65b0\u589e\u7684\u5f15\u64ce\u662f\u5e76\u53d1\u5f15\u64ce\uff0c\u90a3\u4e48\u4f60\u9700\u8981\u5173\u6ce8\u4e0b\u8fd9\u4e2a\u7c7b\uff1aAMConfiguration.scala\uff0c\u5982\u679c\u4f60\u65b0\u589e\u7684\u5f15\u64ce\u662f\u8ba1\u7b97\u7c7b\u5f15\u64ce\uff0c\u5219\u53ef\u5ffd\u7565\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-scala"},'object AMConfiguration {\n  // \u5982\u679c\u4f60\u7684\u5f15\u64ce\u662f\u591a\u7528\u6237\u5e76\u53d1\u5f15\u64ce\uff0c\u90a3\u4e48\u8fd9\u4e2a\u914d\u7f6e\u9879\u9700\u8981\u5173\u6ce8\u4e0b\n  val MULTI_USER_ENGINE_TYPES = CommonVars("wds.linkis.multi.user.engine.types", "jdbc,ck,es,io_file,appconn")\n  \n    private def getDefaultMultiEngineUser(): String = {\n    // \u6b64\u5904\u5e94\u8be5\u662f\u4e3a\u4e86\u8bbe\u7f6e\u5e76\u53d1\u5f15\u64ce\u62c9\u8d77\u65f6\u7684\u542f\u52a8\u7528\u6237\uff0c\u9ed8\u8ba4jvmUser\u5373\u662f\u5f15\u64ce\u670d\u52a1Java\u8fdb\u7a0b\u7684\u542f\u52a8\u7528\u6237\n    val jvmUser = Utils.getJvmUser\n    s"""{jdbc:"$jvmUser", presto: "$jvmUser" es: "$jvmUser", ck:"$jvmUser", appconn:"$jvmUser", io_file:"root"}"""\n  }\n}\n')),(0,l.kt)("h3",{id:"22-\u65b0\u5f15\u64ce\u7c7b\u578b\u6269\u5c55"},"2.2 \u65b0\u5f15\u64ce\u7c7b\u578b\u6269\u5c55"),(0,l.kt)("p",null,"\u5b9e\u73b0",(0,l.kt)("inlineCode",{parentName:"p"},"ComputationSingleExecutorEngineConnFactory"),"\u63a5\u53e3\u7684\u7c7b",(0,l.kt)("inlineCode",{parentName:"p"},"JDBCEngineConnFactory"),"\u4e2d\uff0c\u4e0b\u9762\u4e24\u4e2a\u65b9\u6cd5\u9700\u8981\u5b9e\u73b0\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-scala"},"override protected def getEngineConnType: EngineType = EngineType.JDBC\n\noverride protected def getRunType: RunType = RunType.JDBC\n")),(0,l.kt)("p",null,"\u56e0\u6b64\u9700\u8981\u5728EngineType\u548cRunType\u4e2d\u589e\u52a0JDBC\u5bf9\u5e94\u7684\u53d8\u91cf\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-scala"},'// EngineType.scala\u4e2d\u7c7b\u4f3c\u5df2\u5b58\u5728\u5f15\u64ce\u7684\u53d8\u91cf\u5b9a\u4e49\uff0c\u589e\u52a0JDBC\u76f8\u5173\u53d8\u91cf\u6216\u4ee3\u7801\nobject EngineType extends Enumeration with Logging {\n  val JDBC = Value("jdbc")\n}\n\ndef mapStringToEngineType(str: String): EngineType = str match {\n  case _ if JDBC.toString.equalsIgnoreCase(str) => JDBC\n}\n\n// RunType.scla\u4e2d\nobject RunType extends Enumeration {\n    val JDBC = Value("jdbc")\n}\n')),(0,l.kt)("h3",{id:"23-jdbc\u5f15\u64ce\u6807\u7b7e\u4e2d\u7684\u7248\u672c\u53f7\u8bbe\u7f6e"},"2.3 JDBC\u5f15\u64ce\u6807\u7b7e\u4e2d\u7684\u7248\u672c\u53f7\u8bbe\u7f6e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-scala"},'// \u5728LabelCommonConfig\u4e2d\u589e\u52a0JDBC\u7684version\u914d\u7f6e\npublic class LabelCommonConfig {\n  public final static CommonVars<String> JDBC_ENGINE_VERSION = CommonVars.apply("wds.linkis.jdbc.engine.version", "4");\n}\n\n// \u5728EngineTypeLabelCreator\u7684init\u65b9\u6cd5\u4e2d\u8865\u5145jdbc\u7684\u5339\u914d\u903b\u8f91\n// \u5982\u679c\u8fd9\u4e00\u6b65\u4e0d\u505a\uff0c\u4ee3\u7801\u63d0\u4ea4\u5230\u5f15\u64ce\u4e0a\u65f6\uff0c\u5f15\u64ce\u6807\u7b7e\u4fe1\u606f\u4e2d\u4f1a\u7f3a\u5c11\u7248\u672c\u53f7\npublic class EngineTypeLabelCreator {\n    private static void init() {\n    defaultVersion.put(EngineType.JDBC().toString(), LabelCommonConfig.JDBC_ENGINE_VERSION.getValue());\n  }\n}\n')),(0,l.kt)("h3",{id:"24-\u5141\u8bb8\u811a\u672c\u7f16\u8f91\u5668\u6253\u5f00\u7684\u811a\u672c\u6587\u4ef6\u7c7b\u578b"},"2.4 \u5141\u8bb8\u811a\u672c\u7f16\u8f91\u5668\u6253\u5f00\u7684\u811a\u672c\u6587\u4ef6\u7c7b\u578b"),(0,l.kt)("p",null,"\u5173\u6ce8\u914d\u7f6e\u9879\uff1awds.linkis.storage.file.type"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-scala"},'object LinkisStorageConf{\n  val FILE_TYPE = CommonVars("wds.linkis.storage.file.type", "dolphin,sql,scala,py,hql,python,out,log,text,sh,jdbc,ngql,psql,fql").getValue\n}\n')),(0,l.kt)("h3",{id:"25-\u914d\u7f6ejdbc\u811a\u672c\u53d8\u91cf\u5b58\u50a8\u548c\u89e3\u6790"},"2.5 \u914d\u7f6eJDBC\u811a\u672c\u53d8\u91cf\u5b58\u50a8\u548c\u89e3\u6790"),(0,l.kt)("p",null,"\u5982\u679c\u8fd9\u4e2a\u64cd\u4f5c\u4e0d\u505a\uff0cJDBC\u7684\u811a\u672c\u4e2d\u53d8\u91cf\u4e0d\u80fd\u88ab\u6b63\u5e38\u5b58\u50a8\u548c\u89e3\u6790\uff0c\u811a\u672c\u4e2d\u76f4\u63a5\u4f7f\u7528${\u53d8\u91cf}\u65f6\u4ee3\u7801\u4f1a\u6267\u884c\u5931\u8d25\uff01"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u53d8\u91cf\u89e3\u6790",src:i(91018).Z,width:"1722",height:"384"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-scala"},'// \u901a\u8fc7CodeAndRunTypeUtils\u5de5\u5177\u7c7b\u4e2d\u7684CODE_TYPE_AND_RUN_TYPE_RELATION\u53d8\u91cf\u6765\u7ef4\u62a4codeType\u548crunType\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\nval CODE_TYPE_AND_RUN_TYPE_RELATION = CommonVars("wds.linkis.codeType.runType.relation", "sql=>sql|hql|jdbc|hive|psql|fql,python=>python|py|pyspark,java=>java,scala=>scala,shell=>sh|shell")\n')),(0,l.kt)("p",null,"\u53c2\u8003PR\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://github.com/apache/linkis/pull/2047"},"https://github.com/apache/linkis/pull/2047")),(0,l.kt)("h3",{id:"26-linkis\u7ba1\u7406\u5458\u53f0\u754c\u9762\u5f15\u64ce\u7ba1\u7406\u5668\u4e2d\u52a0\u5165jdbc\u5f15\u64ce\u6587\u5b57\u63d0\u793a\u6216\u56fe\u6807"},"2.6 Linkis\u7ba1\u7406\u5458\u53f0\u754c\u9762\u5f15\u64ce\u7ba1\u7406\u5668\u4e2d\u52a0\u5165JDBC\u5f15\u64ce\u6587\u5b57\u63d0\u793a\u6216\u56fe\u6807"),(0,l.kt)("p",null,"linkis-web/src/dss/module/resourceSimple/engine.vue"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"methods: {\n  calssifyName(params) {\n     switch (params) {\n        case 'jdbc':\n          return 'JDBC';\n        ......\n     }\n  }\n  // \u56fe\u6807\u8fc7\u6ee4\n  supportIcon(item) {\n     const supportTypes = [\n         ......\n        { rule: 'jdbc', logo: 'fi-jdbc' },\n      ];\n  }\n}\n")),(0,l.kt)("p",null,"\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684\u6548\u679c\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"JDBC\u7c7b\u578b\u5f15\u64ce",src:i(98132).Z,width:"1702",height:"576"})),(0,l.kt)("h3",{id:"27-jdbc\u5f15\u64ce\u7684\u7f16\u8bd1\u6253\u5305\u548c\u5b89\u88c5\u90e8\u7f72"},"2.7 JDBC\u5f15\u64ce\u7684\u7f16\u8bd1\u6253\u5305\u548c\u5b89\u88c5\u90e8\u7f72"),(0,l.kt)("p",null,"JDBC\u5f15\u64ce\u6a21\u5757\u7f16\u8bd1\u7684\u793a\u4f8b\u547d\u4ee4\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"cd /linkis-project/linkis-engineconn-pluginsengineconn-plugins/jdbc\n\nmvn clean install -DskipTests\n")),(0,l.kt)("p",null,"\u7f16\u8bd1\u5b8c\u6574\u9879\u76ee\u65f6\uff0c\u65b0\u589e\u5f15\u64ce\u9ed8\u8ba4\u4e0d\u4f1a\u52a0\u5230\u6700\u7ec8\u7684tar.gz\u538b\u7f29\u5305\u4e2d\uff0c\u5982\u679c\u9700\u8981\uff0c\u8bf7\u4fee\u6539\u5982\u4e0b\u6587\u4ef6\uff1a"),(0,l.kt)("p",null,"linkis-dist/src/main/assembly/distribution.xml"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!--jdbc--\x3e\n<fileSets>\n  ......\n        <fileSet>\n            <directory>\n                ../linkis-engineconn-plugins/jdbc/target/out/\n            </directory>\n            <outputDirectory>linkis-package/lib/linkis-engineconn-plugins/</outputDirectory>\n            <includes>\n                <include>**/*</include>\n            </includes>\n        </fileSet>\n</fileSets>\n")),(0,l.kt)("p",null,"\u7136\u540e\u5bf9\u5728\u9879\u76ee\u6839\u76ee\u5f55\u8fd0\u884c\u7f16\u8bd1\u547d\u4ee4\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"mvn clean install -DskipTests\n")),(0,l.kt)("p",null,"\u7f16\u8bd1\u6210\u529f\u540e\u5728linkis-dist/target/apache-linkis-1.x.x-bin.tar.gz\u548clinkis-engineconn-plugins/jdbc/target/\u76ee\u5f55\u4e0b\u627e\u5230out.zip\u3002"),(0,l.kt)("p",null,"\u4e0a\u4f20out.zip\u6587\u4ef6\u5230Linkis\u7684\u90e8\u7f72\u8282\u70b9\uff0c\u89e3\u538b\u7f29\u5230Linkis\u5b89\u88c5\u76ee\u5f55/lib/linkis-engineconn-plugins/\u4e0b\u9762\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u5f15\u64ce\u5b89\u88c5",src:i(12592).Z,width:"1420",height:"422"})),(0,l.kt)("p",null,"\u89e3\u538b\u540e\u522b\u5fd8\u8bb0\u5220\u9664out.zip\uff0c\u81f3\u6b64\u5f15\u64ce\u7f16\u8bd1\u548c\u5b89\u88c5\u5b8c\u6210\u3002"),(0,l.kt)("h3",{id:"28-jdbc\u5f15\u64ce\u6570\u636e\u5e93\u914d\u7f6e"},"2.8 JDBC\u5f15\u64ce\u6570\u636e\u5e93\u914d\u7f6e"),(0,l.kt)("p",null,"\u5728\u7ba1\u7406\u53f0\u9009\u62e9\u6dfb\u52a0\u5f15\u64ce"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u6dfb\u52a0\u5f15\u64ce",src:i(44998).Z,width:"2962",height:"660"})),(0,l.kt)("p",null,"\u5982\u679c\u60a8\u5e0c\u671b\u5728\u7ba1\u7406\u53f0\u652f\u6301\u5f15\u64ce\u53c2\u6570\u914d\u7f6e\uff0c\u53ef\u4ee5\u6309\u7167JDBC\u5f15\u64ceSQL\u793a\u4f8b\u4fee\u6539\u6570\u636e\u5e93\u3002"),(0,l.kt)("p",null,"\u6b64\u5904\u4ee5JDBC\u5f15\u64ce\u4e3a\u4f8b\uff0c\u5f15\u64ce\u5b89\u88c5\u5b8c\u4e4b\u540e\uff0c\u8981\u60f3\u8fd0\u884c\u65b0\u7684\u5f15\u64ce\u4ee3\u7801\uff0c\u8fd8\u9700\u5bf9\u5f15\u64ce\u8fdb\u884c\u6570\u636e\u5e93\u914d\u7f6e\uff0c\u4ee5JDBC\u5f15\u64ce\u4e3a\u4f8b\uff0c\u6309\u7167\u4f60\u81ea\u5df1\u5b9e\u73b0\u7684\u65b0\u5f15\u64ce\u7684\u60c5\u51b5\uff0c\u8bf7\u6309\u9700\u4fee\u6539\u3002"),(0,l.kt)("p",null,"SQL\u53c2\u8003\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"SET @JDBC_LABEL=\"jdbc-4\";\n\nSET @JDBC_ALL=CONCAT('*-*,',@JDBC_LABEL);\nSET @JDBC_IDE=CONCAT('*-IDE,',@JDBC_LABEL);\nSET @JDBC_NODE=CONCAT('*-nodeexecution,',@JDBC_LABEL);\n\n-- JDBC\nINSERT INTO `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.rm.instance', '\u8303\u56f4\uff1a1-20\uff0c\u5355\u4f4d\uff1a\u4e2a', 'jdbc\u5f15\u64ce\u6700\u5927\u5e76\u53d1\u6570', '2', 'NumInterval', '[1,20]', '0', '0', '1', '\u961f\u5217\u8d44\u6e90', 'jdbc');\n\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.driver', '\u53d6\u503c\u8303\u56f4\uff1a\u5bf9\u5e94JDBC\u9a71\u52a8\u540d\u79f0', 'jdbc\u9a71\u52a8\u540d\u79f0','', 'None', '', '0', '0', '1', '\u6570\u636e\u6e90\u914d\u7f6e', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.connect.url', '\u4f8b\u5982:jdbc:hive2://127.0.0.1:10000', 'jdbc\u8fde\u63a5\u5730\u5740', 'jdbc:hive2://127.0.0.1:10000', 'None', '', '0', '0', '1', '\u6570\u636e\u6e90\u914d\u7f6e', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.version', '\u53d6\u503c\u8303\u56f4\uff1ajdbc3,jdbc4', 'jdbc\u7248\u672c','jdbc4', 'OFT', '[\\\"jdbc3\\\",\\\"jdbc4\\\"]', '0', '0', '1', '\u6570\u636e\u6e90\u914d\u7f6e', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.connect.max', '\u8303\u56f4\uff1a1-20\uff0c\u5355\u4f4d\uff1a\u4e2a', 'jdbc\u5f15\u64ce\u6700\u5927\u8fde\u63a5\u6570', '10', 'NumInterval', '[1,20]', '0', '0', '1', '\u6570\u636e\u6e90\u914d\u7f6e', 'jdbc');\n\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.auth.type', '\u53d6\u503c\u8303\u56f4\uff1aSIMPLE,USERNAME,KERBEROS', 'jdbc\u8ba4\u8bc1\u65b9\u5f0f', 'USERNAME', 'OFT', '[\\\"SIMPLE\\\",\\\"USERNAME\\\",\\\"KERBEROS\\\"]', '0', '0', '1', '\u7528\u6237\u914d\u7f6e', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.username', 'username', '\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d', '', 'None', '', '0', '0', '1', '\u7528\u6237\u914d\u7f6e', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.password', 'password', '\u6570\u636e\u5e93\u8fde\u63a5\u5bc6\u7801', '', 'None', '', '0', '0', '1', '\u7528\u6237\u914d\u7f6e', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.principal', '\u4f8b\u5982\uff1ahadoop/host@KDC.COM', '\u7528\u6237principal', '', 'None', '', '0', '0', '1', '\u7528\u6237\u914d\u7f6e', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.keytab.location', '\u4f8b\u5982\uff1a/data/keytab/hadoop.keytab', '\u7528\u6237keytab\u6587\u4ef6\u8def\u5f84', '', 'None', '', '0', '0', '1', '\u7528\u6237\u914d\u7f6e', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.proxy.user.property', '\u4f8b\u5982\uff1ahive.server2.proxy.user', '\u7528\u6237\u4ee3\u7406\u914d\u7f6e', '', 'None', '', '0', '0', '1', '\u7528\u6237\u914d\u7f6e', 'jdbc');\n\nINSERT INTO `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.engineconn.java.driver.cores', '\u53d6\u503c\u8303\u56f4\uff1a1-8\uff0c\u5355\u4f4d\uff1a\u4e2a', 'jdbc\u5f15\u64ce\u521d\u59cb\u5316\u6838\u5fc3\u4e2a\u6570', '1', 'NumInterval', '[1,8]', '0', '0', '1', 'jdbc\u5f15\u64ce\u8bbe\u7f6e', 'jdbc');\nINSERT INTO `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.engineconn.java.driver.memory', '\u53d6\u503c\u8303\u56f4\uff1a1-8\uff0c\u5355\u4f4d\uff1aG', 'jdbc\u5f15\u64ce\u521d\u59cb\u5316\u5185\u5b58\u5927\u5c0f', '1g', 'Regex', '^([1-8])(G|g)$', '0', '0', '1', 'jdbc\u5f15\u64ce\u8bbe\u7f6e', 'jdbc');\n\ninsert into `linkis_cg_manager_label` (`label_key`, `label_value`, `label_feature`, `label_value_size`, `update_time`, `create_time`) VALUES ('combined_userCreator_engineType',@JDBC_ALL, 'OPTIONAL', 2, now(), now());\n\ninsert into `linkis_ps_configuration_key_engine_relation` (`config_key_id`, `engine_type_label_id`)\n    (select config.id as `config_key_id`, label.id AS `engine_type_label_id` FROM linkis_ps_configuration_config_key config INNER JOIN linkis_cg_manager_label label ON config.engine_conn_type = 'jdbc' and label_value = @JDBC_ALL);\n\ninsert into `linkis_cg_manager_label` (`label_key`, `label_value`, `label_feature`, `label_value_size`, `update_time`, `create_time`) VALUES ('combined_userCreator_engineType',@JDBC_IDE, 'OPTIONAL', 2, now(), now());\ninsert into `linkis_cg_manager_label` (`label_key`, `label_value`, `label_feature`, `label_value_size`, `update_time`, `create_time`) VALUES ('combined_userCreator_engineType',@JDBC_NODE, 'OPTIONAL', 2, now(), now());\n\n\n\nselect @label_id := id from linkis_cg_manager_label where `label_value` = @JDBC_IDE;\ninsert into linkis_ps_configuration_category (`label_id`, `level`) VALUES (@label_id, 2);\n\nselect @label_id := id from linkis_cg_manager_label where `label_value` = @JDBC_NODE;\ninsert into linkis_ps_configuration_category (`label_id`, `level`) VALUES (@label_id, 2);\n\n\n-- jdbc default configuration\ninsert into `linkis_ps_configuration_config_value` (`config_key_id`, `config_value`, `config_label_id`)\n    (select `relation`.`config_key_id` AS `config_key_id`, '' AS `config_value`, `relation`.`engine_type_label_id` AS `config_label_id` FROM linkis_ps_configuration_key_engine_relation relation INNER JOIN linkis_cg_manager_label label ON relation.engine_type_label_id = label.id AND label.label_value = @JDBC_ALL);\n")),(0,l.kt)("p",null,"\u5982\u679c\u60f3\u91cd\u7f6e\u5f15\u64ce\u7684\u6570\u636e\u5e93\u914d\u7f6e\u6570\u636e\uff0c\u53c2\u8003\u6587\u4ef6\u5982\u4e0b\uff0c\u8bf7\u6309\u9700\u8fdb\u884c\u4fee\u6539\u4f7f\u7528\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"-- \u6e05\u9664jdbc\u5f15\u64ce\u7684\u521d\u59cb\u5316\u6570\u636e\nSET @JDBC_LABEL=\"jdbc-4\";\n\nSET @JDBC_ALL=CONCAT('*-*,',@JDBC_LABEL);\nSET @JDBC_IDE=CONCAT('*-IDE,',@JDBC_LABEL);\nSET @JDBC_NODE=CONCAT('*-nodeexecution,',@JDBC_LABEL);\n\ndelete from `linkis_ps_configuration_config_value` where `config_label_id` in\n                                                           (select `relation`.`engine_type_label_id` AS `config_label_id` FROM `linkis_ps_configuration_key_engine_relation` relation INNER JOIN `linkis_cg_manager_label` label ON relation.engine_type_label_id = label.id AND label.label_value = @JDBC_ALL);\n\n\ndelete from `linkis_ps_configuration_key_engine_relation`\nwhere `engine_type_label_id` in\n      (select label.id FROM `linkis_ps_configuration_config_key` config\n          INNER JOIN `linkis_cg_manager_label` label\n              ON config.engine_conn_type = 'jdbc' and label_value = @JDBC_ALL);\n\n\ndelete from `linkis_ps_configuration_category`\nwhere `label_id` in (select id from `linkis_cg_manager_label` where `label_value` in(@JDBC_IDE, @JDBC_NODE));\n\n\ndelete from `linkis_ps_configuration_config_key` where `engine_conn_type` = 'jdbc';\n\ndelete from `linkis_cg_manager_label` where `label_value` in (@JDBC_ALL, @JDBC_IDE, @JDBC_NODE);\n\n")),(0,l.kt)("p",null,"\u6700\u7ec8\u7684\u6548\u679c\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"JDBC\u5f15\u64ce",src:i(55390).Z,width:"2984",height:"1086"})),(0,l.kt)("p",null,"\u8fd9\u6837\u914d\u7f6e\u5b8c\u4e4b\u540e\uff0clinkis-cli\u4ee5\u53caScripts\u63d0\u4ea4\u5f15\u64ce\u811a\u672c\u65f6\uff0c\u624d\u80fd\u6b63\u786e\u5339\u914d\u5230\u5f15\u64ce\u7684\u6807\u7b7e\u4fe1\u606f\u548c\u6570\u636e\u6e90\u7684\u8fde\u63a5\u4fe1\u606f\uff0c\u7136\u540e\u624d\u80fd\u62c9\u8d77\u4f60\u65b0\u52a0\u7684\u5f15\u64ce\u3002"),(0,l.kt)("h3",{id:"29-dss-scripts\u4e2d\u65b0\u589ejdbc\u811a\u672c\u7c7b\u578b\u4ee5\u53ca\u56fe\u6807\u7b49\u4fe1\u606f"},"2.9 DSS Scripts\u4e2d\u65b0\u589eJDBC\u811a\u672c\u7c7b\u578b\u4ee5\u53ca\u56fe\u6807\u7b49\u4fe1\u606f"),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u4f7f\u7528\u5230\u4e86DSS\u7684Scripts\u529f\u80fd\uff0c\u8fd8\u9700\u8981\u5bf9dss\u9879\u76ee\u4e2dweb\u7684\u524d\u7aef\u6587\u4ef6\u8fdb\u884c\u4e00\u4e9b\u5c0f\u5c0f\u7684\u6539\u52a8\uff0c\u6539\u52a8\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u5728Scripts\u4e2d\u652f\u6301\u65b0\u5efa\u3001\u6253\u5f00\u3001\u6267\u884cJDBC\u5f15\u64ce\u811a\u672c\u7c7b\u578b\uff0c\u4ee5\u53ca\u5b9e\u73b0\u5f15\u64ce\u5bf9\u5e94\u7684\u56fe\u6807\u3001\u5b57\u4f53\u7b49\u3002"),(0,l.kt)("h4",{id:"291-scriptisjs"},"2.9.1 scriptis.js"),(0,l.kt)("p",null,"web/src/common/config/scriptis.js"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"{\n  rule: /\\.jdbc$/i,\n  lang: 'hql',\n  executable: true,\n  application: 'jdbc',\n  runType: 'jdbc',\n  ext: '.jdbc',\n  scriptType: 'jdbc',\n  abbr: 'jdbc',\n  logo: 'fi-jdbc',\n  color: '#444444',\n  isCanBeNew: true,\n  label: 'JDBC',\n  isCanBeOpen: true\n},\n")),(0,l.kt)("h4",{id:"292-\u811a\u672c\u590d\u5236\u652f\u6301"},"2.9.2 \u811a\u672c\u590d\u5236\u652f\u6301"),(0,l.kt)("p",null,"web/src/apps/scriptis/module/workSidebar/workSidebar.vue"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"copyName() {\n  let typeArr = ['......', 'jdbc']\n}\n")),(0,l.kt)("h4",{id:"293-logo\u4e0e\u5b57\u4f53\u914d\u8272"},"2.9.3 logo\u4e0e\u5b57\u4f53\u914d\u8272"),(0,l.kt)("p",null,"web/src/apps/scriptis/module/workbench/title.vue"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"  data() {\n    return {\n      isHover: false,\n      iconColor: {\n        'fi-jdbc': '#444444',\n      },\n    };\n  },\n")),(0,l.kt)("p",null,"web/src/apps/scriptis/module/workbench/modal.js"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"let logoList = [\n  { rule: /\\.jdbc$/i, logo: 'fi-jdbc' },\n];\n")),(0,l.kt)("p",null,"web/src/components/tree/support.js"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"export const supportTypes = [\n  // \u8fd9\u91cc\u5927\u6982\u6ca1\u7528\u5230\n  { rule: /\\.jdbc$/i, logo: 'fi-jdbc' },\n]\n")),(0,l.kt)("p",null,"\u5f15\u64ce\u56fe\u6807\u5c55\u793a"),(0,l.kt)("p",null,"web/src/dss/module/resourceSimple/engine.vue"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"methods: {\n  calssifyName(params) {\n     switch (params) {\n        case 'jdbc':\n          return 'JDBC';\n        ......\n     }\n  }\n  // \u56fe\u6807\u8fc7\u6ee4\n  supportIcon(item) {\n     const supportTypes = [\n                ......\n        { rule: 'jdbc', logo: 'fi-jdbc' },\n      ];\n  }\n}\n")),(0,l.kt)("p",null,"web/src/dss/assets/projectIconFont/iconfont.css"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-css"},'.fi-jdbc:before {\n  content: "\\e75e";\n}\n')),(0,l.kt)("p",null,"\u6b64\u5904\u63a7\u5236\u7684\u5e94\u8be5\u662f\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u5f15\u64ce\u56fe\u6807",src:i(72728).Z,width:"2016",height:"336"})),(0,l.kt)("p",null,"\u627e\u4e00\u4e2a\u5f15\u64ce\u56fe\u6807\u7684svg\u6587\u4ef6"),(0,l.kt)("p",null,"web/src/components/svgIcon/svg/fi-jdbc.svg"),(0,l.kt)("p",null,"\u5982\u679c\u65b0\u5f15\u64ce\u540e\u7eed\u9700\u8981\u8d21\u732e\u793e\u533a\uff0c\u90a3\u4e48\u65b0\u5f15\u64ce\u5bf9\u5e94\u7684svg\u56fe\u6807\u3001\u5b57\u4f53\u7b49\u9700\u8981\u786e\u8ba4\u5176\u6240\u5c5e\u7684\u5f00\u6e90\u534f\u8bae\uff0c\u6216\u83b7\u53d6\u5176\u7248\u6743\u8bb8\u53ef\u3002"),(0,l.kt)("h3",{id:"210-dss\u7684\u5de5\u4f5c\u6d41\u9002\u914d"},"2.10 DSS\u7684\u5de5\u4f5c\u6d41\u9002\u914d"),(0,l.kt)("p",null,"\u6700\u7ec8\u8fbe\u6210\u7684\u6548\u679c\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u5de5\u4f5c\u6d41\u9002\u914d",src:i(69230).Z,width:"2608",height:"888"})),(0,l.kt)("p",null,"\u5728dss_workflow_node\u8868\u4e2d\u4fdd\u5b58\u65b0\u52a0JDBC\u5f15\u64ce\u7684\u5b9a\u4e49\u6570\u636e\uff0c\u53c2\u8003SQL\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"# \u5f15\u64ce\u4efb\u52a1\u8282\u70b9\u57fa\u672c\u4fe1\u606f\u5b9a\u4e49\ninsert into `dss_workflow_node` (`id`, `name`, `appconn_name`, `node_type`, `jump_url`, `support_jump`, `submit_to_scheduler`, `enable_copy`, `should_creation_before_node`, `icon`) values('18','jdbc','-1','linkis.jdbc.jdbc',NULL,'1','1','1','0','svg\u6587\u4ef6');\n\n# svg\u6587\u4ef6\u5bf9\u5e94\u65b0\u5f15\u64ce\u4efb\u52a1\u8282\u70b9\u56fe\u6807\n\n# \u5f15\u64ce\u4efb\u52a1\u8282\u70b9\u5206\u7c7b\u5212\u5206\ninsert  into `dss_workflow_node_to_group`(`node_id`,`group_id`) values (18, 2);\n\n# \u5f15\u64ce\u4efb\u52a1\u8282\u70b9\u7684\u57fa\u672c\u4fe1\u606f\uff08\u53c2\u6570\u5c5e\u6027\uff09\u7ed1\u5b9a\nINSERT  INTO `dss_workflow_node_to_ui`(`workflow_node_id`,`ui_id`) VALUES (18,45);\n\n# \u5728dss_workflow_node_ui\u8868\u4e2d\u5b9a\u4e49\u4e86\u5f15\u64ce\u4efb\u52a1\u8282\u70b9\u76f8\u5173\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u7136\u540e\u4ee5\u8868\u5355\u7684\u5f62\u5f0f\u5728\u4e0a\u56fe\u53f3\u4fa7\u4e2d\u5c55\u793a\uff0c\u4f60\u53ef\u4ee5\u4e3a\u65b0\u5f15\u64ce\u6269\u5145\u5176\u4ed6\u57fa\u7840\u4fe1\u606f\uff0c\u7136\u540e\u81ea\u52a8\u88ab\u53f3\u4fa7\u8868\u5355\u6e32\u67d3\u3002\n")),(0,l.kt)("p",null,"web/src/apps/workflows/service/nodeType.js"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"import jdbc from '../module/process/images/newIcon/jdbc.svg';\n\nconst NODETYPE = {\n  ......\n  JDBC: 'linkis.jdbc.jdbc',\n}\n\nconst ext = {\n    ......\n  [NODETYPE.JDBC]: 'jdbc',\n}\n\nconst NODEICON = {\n  [NODETYPE.JDBC]: {\n    icon: jdbc,\n    class: {'jdbc': true}\n  },\n}\n")),(0,l.kt)("p",null,"\u5728web/src/apps/workflows/module/process/images/newIcon/\u76ee\u5f55\u4e0b\u589e\u52a0\u65b0\u5f15\u64ce\u7684\u56fe\u6807"),(0,l.kt)("p",null,"web/src/apps/workflows/module/process/images/newIcon/jdbc"),(0,l.kt)("p",null,"\u540c\u6837\u8d21\u732e\u793e\u533a\u65f6\uff0c\u8bf7\u8003\u8651svg\u6587\u4ef6\u7684lincese\u6216\u7248\u6743\u3002"),(0,l.kt)("h2",{id:"3-\u672c\u7ae0\u5c0f\u7ed3"},"3. \u672c\u7ae0\u5c0f\u7ed3"),(0,l.kt)("p",null,"\u4e0a\u8ff0\u5185\u5bb9\u8bb0\u5f55\u4e86\u65b0\u5f15\u64ce\u7684\u5b9e\u73b0\u6d41\u7a0b\uff0c\u4ee5\u53ca\u989d\u5916\u9700\u8981\u505a\u7684\u4e00\u4e9b\u5f15\u64ce\u914d\u7f6e\u3002\u76ee\u524d\uff0c\u4e00\u4e2a\u65b0\u5f15\u64ce\u7684\u6269\u5c55\u6d41\u7a0b\u8fd8\u662f\u6bd4\u8f83\u7e41\u7410\u7684\uff0c\u5e0c\u671b\u80fd\u5728\u540e\u7eed\u7248\u672c\u4e2d\uff0c\u4f18\u5316\u65b0\u5f15\u64ce\u7684\u6269\u5c55\u3001\u4ee5\u53ca\u5b89\u88c5\u7b49\u8fc7\u7a0b\u3002"))}u.isMDXComponent=!0},44998:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/add_engine_conf-9aea4d11a746a8424f1451bfcb53c5d3.png"},26052:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/engine_jdbc_dependency-96557050ad1a36a30a690d02b58e31d3.png"},12592:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/engine_set_up-1e949aa8bb8170beb333ad319c942a0c.png"},55390:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/jdbc_engine_conf_detail-72e78ab052ccd9c0f23eb1c7dd4293ee.png"},72728:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/jdbc_engine_logo-40dd3d1e7779aeeb0fb369e744e07051.png"},98132:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/jdbc_engine_view-54389c10b70b31f4d35d60dcad0c103f.png"},69230:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/jdbc_job_flow-22a3cd0e024318a7c637346eb86a594e.png"},91018:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/variable_resolution-c652561275ae1bf9a0d5215239e80f6c.png"}}]);