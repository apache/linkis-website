<!doctype html>
<html class="docs-version-current" lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/zh-CN/blog/rss.xml" title="Apache Linkis Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-CN/blog/atom.xml" title="Apache Linkis Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Apache Linkis" href="/zh-CN/opensearch.xml"><title data-react-helmet="true">开发调试容器化 | Apache Linkis</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://linkis.incubator.apache.org/zh-CN/docs/1.3.0/development/linkis-debug-with-helm-charts"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="开发调试容器化 | Apache Linkis"><meta data-react-helmet="true" name="description" content="前言"><meta data-react-helmet="true" property="og:description" content="前言"><link data-react-helmet="true" rel="shortcut icon" href="/zh-CN/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://linkis.incubator.apache.org/zh-CN/docs/1.3.0/development/linkis-debug-with-helm-charts"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/docs/1.3.0/development/linkis-debug-with-helm-charts" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/zh-CN/docs/1.3.0/development/linkis-debug-with-helm-charts" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/docs/1.3.0/development/linkis-debug-with-helm-charts" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://AE29KQB3IA-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/zh-CN/assets/css/styles.e9faf9bb.css">
<link rel="preload" href="/zh-CN/assets/js/runtime~main.87c017e8.js" as="script">
<link rel="preload" href="/zh-CN/assets/js/main.ea1e1eba.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-CN/"><img src="/zh-CN/img/logo.png" alt="Apache Linkis Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/zh-CN/img/logo.png" alt="Apache Linkis Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache Linkis(Incubating)</b></a><a class="navbar__item navbar__link" href="/zh-CN/download/main">下载</a><a class="navbar__item navbar__link" href="/zh-CN/community/how-to-subscribe">社区</a><a class="navbar__item navbar__link" href="/zh-CN/blog">博客</a><a class="navbar__item navbar__link" href="/zh-CN/team">团队</a><a class="navbar__item navbar__link" href="/zh-CN/user">用户</a><a class="navbar__item navbar__link" href="/zh-CN/faq/main">FAQ</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">基金会</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">证书</a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">事件</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">安全</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">赞助</a></li><li><a href="https://www.apache.org/foundation/policies/privacy.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">致谢</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">文档</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh-CN/docs/1.3.0/introduction">Next(1.3.0)</a></li><li><a class="dropdown__link" href="/zh-CN/docs/latest/introduction">1.2.0</a></li><li><a class="dropdown__link" href="/zh-CN/docs/1.1.3/introduction">1.1.3</a></li><li><a class="dropdown__link" href="/zh-CN/docs/1.1.2/introduction">1.1.2</a></li><li><a class="dropdown__link" href="/zh-CN/docs/1.1.1/introduction">1.1.1</a></li><li><a class="dropdown__link" href="/zh-CN/docs/1.1.0/introduction">1.1.0</a></li><li><a class="dropdown__link" href="/zh-CN/docs/1.0.3/introduction">1.0.3</a></li><li><a class="dropdown__link" href="/zh-CN/docs/1.0.2/introduction">1.0.2</a></li><li><a class="dropdown__link" href="/zh-CN/docs/0.11.0/introduction">0.11.0</a></li><li><a class="dropdown__link" href="/zh-CN/versions">All Version</a></li></ul></div><a href="https://github.com/apache/incubator-linkis" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg t="1631348384596" class="iconLanguage_EbrZ" viewBox="0 0 1024 1024" version="1.1" p-id="557" width="20" height="20"><path d="M547.797333 638.208l-104.405333-103.168 1.237333-1.28a720.170667 720.170667 0 0 0 152.490667-268.373333h120.448V183.082667h-287.744V100.906667H347.605333v82.218666H59.818667V265.386667h459.178666a648.234667 648.234667 0 0 1-130.304 219.946666 643.242667 643.242667 0 0 1-94.976-137.728H211.541333a722.048 722.048 0 0 0 122.453334 187.434667l-209.194667 206.378667 58.368 58.368 205.525333-205.525334 127.872 127.829334 31.232-83.84m231.424-208.426667h-82.218666l-184.96 493.312h82.218666l46.037334-123.306667h195.242666l46.464 123.306667h82.218667l-185.002667-493.312m-107.690666 287.744l66.56-178.005333 66.602666 178.005333z" fill="currentColor" p-id="558"></path></svg><span>简体中文</span></span></a><ul class="dropdown__menu"><li><a href="/docs/1.3.0/development/linkis-debug-with-helm-charts" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/zh-CN/docs/1.3.0/development/linkis-debug-with-helm-charts" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">简体中文</a></li></ul></div><div class="searchBox_Bc3W"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/zh-CN/docs/1.3.0/introduction">Linkis 简述</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/zh-CN/docs/1.3.0/release">版本总览</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">安装部署</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">用户手册</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">引擎使用</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API文档</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">表结构</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">技术架构</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">开发文档</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/1.3.0/development/linkis-compile-and-package">Linkis 后端编译打包</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/1.3.0/development/linkis-config">Linkis 配置参数介绍</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/1.3.0/development/linkis-debug">服务调试指引</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/1.3.0/development/new-engine-conn">如何实现一个新引擎</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/1.3.0/development/web-build">Linkis 管理台编译</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/1.3.0/development/linkis-docker-build-instrument">Linkis Docker 镜像打包</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/1.3.0/development/swwager-instructions">Swagger 注解使用说明</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-CN/docs/1.3.0/development/linkis-debug-with-helm-charts">开发调试容器化</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">版本升级</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">调优排障</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此版本是还未发布的文档版本<!-- -->Apache Linkis<!-- --> <b>Next(1.3.0)</b>(1.3.0)</div><div class="margin-top--md">有关最新文档，请参阅最新稳定版本<b><a href="/zh-CN/docs/latest/introduction">latest version</a></b> (<!-- -->1.2.0<!-- -->).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->Next(1.3.0)</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>开发调试容器化</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="前言"></a>前言<a class="hash-link" href="#前言" title="Direct link to heading">#</a></h2><p>本文介绍如何使用 Kubernetes 技术来简化 Linkis 项目的开发调试工作。在没有引入 Kubernetes 工具前，调试 Linkis 是一个非常繁琐和复杂的工作，有时候可能需要搭建 Linkis 依赖的 Hadoop 环境。为了改善这个问题，本文使用了另一种方法，利用 Kubernetes 技术在开发机上创建一个 Hadoop 集群并拉起所有 Linkis 服务，这是个分布式的环境，并且可以随时拉起和销毁，开发者通过 JVM 远程调试功能连接这些服务并进行单步调试. 这里我们用到了如下几个技术:</p><ul><li>Docker: 一种容器化技术，用于支创建和使用 Linux 容器;</li><li>Kubernetes: 一种可自动部署和管理 Linux 容器的开源平台，Kubernetes 还整合了网络、存储、安全性、遥测和其他服务，提供了全面的基于容器的基础设施;</li><li>KinD: 一个使用Docker容器作为 &quot;Kubernetes节点&quot; 来运行本地 Kubernetes 集群的工具;</li><li>Helm: Kubernetes 上一个开源的包管理工具, 通过 Helm 命令行工具和安装包(Chart)来管理 Kubernetes 上的用户资源;</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="依赖工具介绍"></a>依赖工具介绍<a class="hash-link" href="#依赖工具介绍" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="版本要求"></a>版本要求<a class="hash-link" href="#版本要求" title="Direct link to heading">#</a></h3><ul><li><a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreferrer">Docker</a>, 最低版本 v20.10.8+</li><li><a href="https://kubernetes.io/docs/setup/" target="_blank" rel="noopener noreferrer">Kubernetes</a>, 最低版本 v1.21.0+</li><li><a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">Helm</a>, 最低版本 v3.0.0+.</li><li><a href="https://kind.sigs.k8s.io/docs/user/quick-start/" target="_blank" rel="noopener noreferrer">KinD</a>, 最低版本 v0.11.0+.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="helm-charts-介绍"></a>Helm Charts 介绍<a class="hash-link" href="#helm-charts-介绍" title="Direct link to heading">#</a></h3><p>Helm 是 Kubernetes 上一个开源的包管理工具，Helm 最初的目标是为用户提供一种更好的方式来管理在 Kubernetes 上创建的所有 Kubernetes YAML 文件。Helm 使用 Charts 这个方式来解决上述问题，Chart 是一组文本文件，使用 Helm 模版语言编写，用来描述一个或者多个 Kubernetes 资源文件，Chart 直接依赖或者引用其他 Chart. 在使用 Charts 时，用户需要提供一个 变量文件，Helm 使用这个变量文件中定义的变量来渲染相应的 Chart， 生产 Kubernetes YAML 文件， 然后调用 Kubernetes api 提交到 Kubernetes 上。每一个发布到 Kubernetes 的 Charts 被称为 Release，一个 Chart 通常可以被多次安装到同一个集群中，而每次安装时，都会创建一个新的 Release。</p><p>Helm 的安装方式比较简单，请参考官方文档进行安装: <a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">Installing Helm</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="kind-介绍"></a>KinD 介绍<a class="hash-link" href="#kind-介绍" title="Direct link to heading">#</a></h3><p>在本地创建一个 Kubernetes 测试环境是一个非常普遍的需求，Kubernetes 社区提供了多种解决方案，如 MiniKube 或 MicroK8s 等，KinD 是一个相对较新的工具，KinD 是 Kubernetes IN Docker 的缩写，顾名思义，它使用 Docker 托管节点来创建一个面向测试的 Kubernetes 集群。</p><p>KinD 系统架构</p><p><img src="/zh-CN/assets/images/kind-arc-02ed1f9367e7e49f600fa20cf3cf952f.png"></p><p>部署 KinD 也非常简单，请参考官方部署文档: <a href="https://kind.sigs.k8s.io/docs/user/quick-start/#installation" target="_blank" rel="noopener noreferrer">KinD Installation</a>, 部署 KinD 前请先安装 Docker .</p><blockquote><p>⚠️注意:
KinD 是面向测试的用途的工具，不能用于生产部署。同时，KinD 利用 Docker 带来的便利的同时，也引入了一些限制， 比如，开发机重启后，KinD 集群无法继续使用，需要重新创建（因为 KinD 在创建 Node 容器后会进行一系列的初始化工作，这些工作在机器重启后无法自动回复）。</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="linkis-容器化组件"></a>Linkis 容器化组件<a class="hash-link" href="#linkis-容器化组件" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="linkis-镜像"></a>Linkis 镜像<a class="hash-link" href="#linkis-镜像" title="Direct link to heading">#</a></h3><p>Linkis 提供了多个镜像，所有镜像的 Dockerfile 和相关脚本都在 <code>linkis-dist/docker</code> 目录下。 可以通过 Maven 命令和 <code>docker build</code> 命令来制作相应的镜像。Linkis 镜像主要包括如下几个：</p><ul><li><code>linkis</code>: Linkis 服务镜像，镜像中包含了 Apache Linkis 的所有组件的二进制包和各类脚本。</li><li><code>linkis-web</code>: Linkis Web 控制台镜像，镜像中包含了 Apache Linkis Web 控制台的的二进制包和各类脚本，本镜像使用 nginx 作为 Web 服务器。</li><li><code>linkis-ldh</code>: LDH 是一个面向测试用途的镜像，LDH 镜像提供了一套完整的、伪分布式模式的 Apache Hadoop 运行环境，包含了 HDFS, YARN, HIVE, Spark, Flink 和 Zookeeper, 可以很方便的在开发环境中拉起一个全真的 Hadoop 环境用来测试 Linkis 的功能。</li></ul><p>具体请参考: <a href="https://linkis.apache.org/zh-CN/docs/latest/development/linkis_docker_build_instrument" target="_blank" rel="noopener noreferrer">Linkis Docker 镜像打包</a>. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="linkis-helm-chart"></a>Linkis Helm Chart<a class="hash-link" href="#linkis-helm-chart" title="Direct link to heading">#</a></h3><p>Linkis Helm Chart 是遵循 Helm Chart 规范开发的 Helm 安装包，在 <code>linkis-dist/helm</code> 目录下. 模块目录结构如下:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-dist/helm</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── charts                                         </span><span class="token comment" style="color:rgb(98, 114, 164)"># Charts 目录， 目前仅包含 Linkis Helm Chart</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   └── linkis                                     </span><span class="token comment" style="color:rgb(98, 114, 164)">#   Linkis Helm Chart 目录</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       ├── Chart.yaml                             </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Chart 元数据</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       ├── templates                              </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Chart 模版文件，包含了所有 linkis 组件的 Kubernetes YAML 模版</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── NOTES.txt                          </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Chart 提示信息</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── _helpers.tpl                       </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Chart 变量辅助模版</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── configmap-init-sql.yaml            </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - 数据库初始化 SQL 脚本模版</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── configmap-linkis-config.yaml       </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Linkis 服务配置文件模版</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── configmap-linkis-web-config.yaml   </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Linkis Web 控制台配置文件模版</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── jobs.yaml                          </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Kubernetes Job 模版，目前仅包括一个数据库初始化作业, 数据库初始化 SQL 脚本会在这个</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">       </span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain">                                      </span><span class="token comment" style="color:rgb(98, 114, 164)">#       作业中被执行</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── linkis-cg-engineconnmanager.yaml   </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Linkis EngineConnManager 部署模版，是一个 Kubernetes Deployment 类型的工作负载</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── linkis-cg-engineplugin.yaml        </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Linkis EngineConn 部署模版，是一个 Kubernetes Deployment 类型的工作负载</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── linkis-cg-entrance.yaml            </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Linkis Entrance 部署模版，是一个 Kubernetes Deployment 类型的工作负载</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── linkis-cg-linkismanager.yaml       </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Linkis Manager 部署模版，是一个 Kubernetes Deployment 类型的工作负载</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── linkis-mg-eureka.yaml              </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Linkis Eureka 部署模版，是一个 Kubernetes Statefulset 类型的工作负载</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── linkis-mg-gateway.yaml             </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Linkis Gateway 部署模版，是一个 Kubernetes Deployment 类型的工作负载</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── linkis-ps-publicservice.yaml       </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Linkis PublicService 部署模版，是一个 Kubernetes Deployment 类型的工作负载</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── linkis-web.yaml                    </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Linkis Web Console 部署模版，是一个 Kubernetes Deployment 类型的工作负载</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   └── serviceaccount.yaml                </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - Linkis 相关的 Kubernetes Service Account 模版</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       └── values.yaml                            </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis Helm Chart 变量文件，默认提供了 Linkis Local 模式相关的变量</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── scripts                                        </span><span class="token comment" style="color:rgb(98, 114, 164)"># 一些用于简化开发调试的工具脚本</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── common.sh                                  </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - 公共脚本，定义了一些公共方法和变量</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── create-kind-cluster.sh                     </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - 创建 KinD 集群</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── install-charts-with-ldh.sh                 </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - 在 KinD 集群上部署 Linkis 服务，使用 On-LDH 的部署方式, 调用 install-linkis.sh 实现</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── install-charts.sh                          </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - 在 KinD 集群上部署 Linkis 服务，使用 Local 的部署方式, 调用 install-linkis.sh 实现</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── install-ldh.sh                             </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - 在 KinD 集群上部署 LDH 部署</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── install-linkis.sh                          </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - 在 KinD 集群上部署 Linkis 服务，可以为 Local 或者 On-LDH 的模式</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── install-mysql.sh                           </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - 在 KinD 集群上部署一个 MySQL 实例</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── login-pod.sh                               </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - 登入一个 Pod，打开 Bash 进行交互</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── remote-debug-proxy.sh                      </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - 开启 JVM 远程调试代理，开启后，可以在 IDE 上连接相应的端口进行调试</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   └── resources                                  </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - 一些资源文件</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       ├── kind-cluster.yaml                      </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - KinD 集群配置，默认为单个 Node </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       ├── ldh                                    </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - LDH 相关资源文件</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   ├── configmaps                         </span><span class="token comment" style="color:rgb(98, 114, 164)">#       - LDH 各个组件的配置文件</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   │   ├── configmap-flink.yaml           </span><span class="token comment" style="color:rgb(98, 114, 164)">#         - Flink 配置文件</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   │   ├── configmap-hadoop.yaml          </span><span class="token comment" style="color:rgb(98, 114, 164)">#         - Hdfs &amp; Yarn 配置文件</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   │   ├── configmap-hive.yaml            </span><span class="token comment" style="color:rgb(98, 114, 164)">#         - Hive 配置文件</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   │   ├── configmap-spark.yaml           </span><span class="token comment" style="color:rgb(98, 114, 164)">#         - Spark 配置文件</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   │   └── configmap-zookeeper.yaml       </span><span class="token comment" style="color:rgb(98, 114, 164)">#         - Zookeeper 配置文件</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       │   └── ldh.yaml                           </span><span class="token comment" style="color:rgb(98, 114, 164)">#       - LDH Kubernetes YAML, 用于在 KinD 上部署 LDH 实例</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│       └── mysql.yaml                             </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - MySQL Kubernetes YAML, 用于在 KinD 上部署 MySQL 实例</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>本项目提供了一组工具脚本，用于快速创建一个用于开发测试的 Linkis 环境。在生产部署中，需要根据集群的实际情况，修改 <code>values.yaml</code> 文件，再使用 Helm CLI 进行部署。使用 Helm CLI 进行部署时，通常有如下两种比较常见的做法:</p><ol><li>使用 <code>helm install</code> 命令直接部署。适用于非定制化的部署方式；</li><li>使用 <code>helm template</code> 命令选生成 Kubernetes YAML 文件，然后手动修改这些文件，添加自定义配置，然后使用<code>kubectl apply</code>命令进行部署。适用于需要定制 Linkis Helm Charts 不支持的 Kubernetes 特性的高阶用户， 如需要使用特定的 StorageClass 或者 PV 等；</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="ldh"></a>LDH<a class="hash-link" href="#ldh" title="Direct link to heading">#</a></h3><p>LDH 是一个面向测试用途的 Hadoop 集群镜像，它提供了一个伪分布式的 hadoop 集群，方便快速测试 On Hadoop 的部署模式。
这个镜像包含以下多个 hadoop 组件，LDH 中引擎的默认模式是 on-yarn 的。</p><ul><li>Hadoop 2.7.2 , 包括 HDFS 和 YARN</li><li>Hive 2.3.3</li><li>Spark 2.4.3</li><li>Flink 1.12.2</li><li>ZooKeeper 3.5.9</li></ul><p>LDH 启动时会进行一些初始化操作，比如 format hdfs， 在 HDFS 上创建初始化目录等，这些操作定义在<code>linkis-dist/docker/scripts/entry-point-ldh.sh</code>这个文件中，添加、修改、删除一些初始化操作需要重新制作 LDH 镜像才能生效。 </p><p>另外，LDH 中的 Hive 组件依赖外部的 MySQL 实例，需要先部署 MySQL 实例才能使用 LDH 中的 Hive 组件。</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 创建 KinD 集群，并部署 Linkis 和 LDH 实例</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/create-kind-cluster.sh </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/install-mysql.sh </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/install-ldh.sh</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 快速体验 LDH</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> kubectl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exec</span><span class="token plain"> -it -n ldh </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">kubectl get pod -n ldh -o </span><span class="token variable assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">jsonpath</span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;{.items[0].metadata.name}&#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"> -- </span><span class="token function" style="color:rgb(80, 250, 123)">bash</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># hdfs dfs -ls /</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Found </span><span class="token number">4</span><span class="token plain"> items</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxrwxrwx   - root supergroup          </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">2022</span><span class="token plain">-07-31 02:48 /completed-jobs</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxrwxrwx   - root supergroup          </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">2022</span><span class="token plain">-07-31 02:48 /spark2-history</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxrwxrwx   - root supergroup          </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">2022</span><span class="token plain">-07-31 02:49 /tmp</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxrwxrwx   - root supergroup          </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">2022</span><span class="token plain">-07-31 02:48 /user</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># beeline -u jdbc:hive2://ldh.ldh.svc.cluster.local:10000/ -n hadoop</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connecting to jdbc:hive2://ldh.ldh.svc.cluster.local:10000/</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connected to: Apache Hive </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">version </span><span class="token number">2.3</span><span class="token plain">.3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Driver: Hive JDBC </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">version </span><span class="token number">2.3</span><span class="token plain">.3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Transaction isolation: TRANSACTION_REPEATABLE_READ</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Beeline version </span><span class="token number">2.3</span><span class="token plain">.3 by Apache Hive</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> create database demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">No rows affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.306</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> use demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">No rows affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.046</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> create table t1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id int, data string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">No rows affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.709</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> insert into t1 values</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token plain">, </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;linikis demo&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: Hive-on-MR is deprecated </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> Hive </span><span class="token number">2</span><span class="token plain"> and may not be available </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the future versions. Consider using a different execution engine </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">i.e. spark, tez</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> or using Hive </span><span class="token number">1</span><span class="token plain">.X releases.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">No rows affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5.491</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> * from t1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+--------+---------------+</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> t1.id  </span><span class="token operator">|</span><span class="token plain">    t1.data    </span><span class="token operator">|</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+--------+---------------+</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> linikis demo  </span><span class="token operator">|</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+--------+---------------+</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">1</span><span class="token plain"> row selected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.39</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">!</span><span class="token plain">q</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># spark-sql</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:18 INFO hive.metastore: Trying to connect to metastore with URI thrift://ldh.ldh.svc.cluster.local:9083</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:18 INFO hive.metastore: Connected to metastore.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:19 INFO spark.SparkContext: Running Spark version </span><span class="token number">2.4</span><span class="token plain">.3</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:19 INFO spark.SparkContext: Submitted application: SparkSQL::10.244.0.6</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:27 INFO yarn.Client: Submitting application application_1659235712576_0001 to ResourceManager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:27 INFO impl.YarnClientImpl: Submitted application application_1659235712576_0001</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:27 INFO cluster.SchedulerExtensionServices: Starting Yarn extension services with app application_1659235712576_0001 and attemptId None</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:28 INFO yarn.Client: Application report </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> application_1659235712576_0001 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">state: ACCEPTED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:36 INFO yarn.Client: Application report </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> application_1659235712576_0001 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">state: RUNNING</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Spark master: yarn, Application Id: application_1659235712576_0001</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:46 INFO thriftserver.SparkSQLCLIDriver: Spark master: yarn, Application Id: application_1659235712576_0001</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spark-sql</span><span class="token operator">&gt;</span><span class="token plain"> use demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Time taken: </span><span class="token number">0.074</span><span class="token plain"> seconds</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:58:02 INFO thriftserver.SparkSQLCLIDriver: Time taken: </span><span class="token number">0.074</span><span class="token plain"> seconds</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spark-sql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> * from t1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">1</span><span class="token plain">       linikis demo</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2</span><span class="token plain">       linkis demo spark sql</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Time taken: </span><span class="token number">3.352</span><span class="token plain"> seconds, Fetched </span><span class="token number">2</span><span class="token plain"> row</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spark-sql</span><span class="token operator">&gt;</span><span class="token plain"> quit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># zkCli.sh</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connecting to localhost:2181</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Welcome to ZooKeeper</span><span class="token operator">!</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">JLine support is enabled</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WATCHER::</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WatchedEvent state:SyncConnected type:None path:null</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">zk: localhost:2181</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">CONNECTED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> get -s /zookeeper/quota</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cZxid </span><span class="token operator">=</span><span class="token plain"> 0x0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ctime </span><span class="token operator">=</span><span class="token plain"> Thu Jan 01 00:00:00 UTC </span><span class="token number">1970</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mZxid </span><span class="token operator">=</span><span class="token plain"> 0x0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mtime </span><span class="token operator">=</span><span class="token plain"> Thu Jan 01 00:00:00 UTC </span><span class="token number">1970</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pZxid </span><span class="token operator">=</span><span class="token plain"> 0x0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cversion </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dataVersion </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">aclVersion </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ephemeralOwner </span><span class="token operator">=</span><span class="token plain"> 0x0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dataLength </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">numChildren </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">zk: localhost:2181</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">CONNECTED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> quit</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 以 per-job cluster 模式启动 Flink 作业</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># HADOOP_CLASSPATH=`hadoop classpath` flink run -t yarn-per-job /opt/ldh/current/flink/examples/streaming/TopSpeedWindowing.jar</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 以 session 模式启动 Flink 作业,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Flink session 在 LDH Pod 启动时会被启动了一个.</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># flink run /opt/ldh/current/flink/examples/streaming/TopSpeedWindowing.jar</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Executing TopSpeedWindowing example with default input data set.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Use --input to specify </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> input.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Printing result to stdout. Use --output to specify output path.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="kind-集群"></a>KinD 集群<a class="hash-link" href="#kind-集群" title="Direct link to heading">#</a></h3><p>Linkis 项目默认使用的 KinD 集群描述文件是<code>linkis-dist/helm/scripts/resources/kind-cluster.yaml</code>, 默认会创建一个包含一个节点的 KinD 集群。打开文件中注释的内容可以添加多个节点。</p><blockquote><p>⚠️注意，KinD 集群仅用于测试用途。</p></blockquote><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># linkis-dist/helm/scripts/resources/kind-cluster.yaml</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kind.x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">k8s.io/v1alpha4</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">nodes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">role</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> control</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">plane</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">extraMounts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">hostPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">KIND_CLUSTER_HOST_PATH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)"># 指向开发机上的一个目录。这个目录会被映射到 Kind Node 容器中的 `/data` 目录，</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># Linkis Helm Charts 默认会使用这个目录作为数据目录挂载到各个 Linkis 组件的</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># Pod 中。当 Linkis 使用 Local 模式进行部署时，所有组件实际上使用了开发机上的</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># 同一个目录，就和在同一台机器上一样，从而模拟了 Local 模式的行为。当使用 </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># On-Hadoop 模式进行部署时，这个目录不会被使用。</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">containerPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /data</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#  - role: worker                               # 打开注释可以添加2个 KinD 节点。添加 KinD 节点会增加加载 Docker 镜像到 KinD</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#                                               # 集群的时间，所以默认不打开。 </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#    extraMounts:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#      - hostPath: ${KIND_CLUSTER_HOST_PATH}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#        containerPath: /data</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#  - role: worker</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#    extraMounts:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#      - hostPath: ${KIND_CLUSTER_HOST_PATH}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#        containerPath: /data</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="使用-linkis-容器化组件开发调试"></a>使用 Linkis 容器化组件开发调试<a class="hash-link" href="#使用-linkis-容器化组件开发调试" title="Direct link to heading">#</a></h2><p>下面介绍使用 Linkis 容器化组件开发调试的步骤（目前仅支持 Linux 和 MacOS）。在进行本步骤前请确认如下事项：</p><ol><li>开发机上是否已经安装了 Docker 引擎</li><li>开发机上是否已经安装了 Helm </li><li>开发机上是否已经安装了 KinD </li><li>是否已经按照 <a href="https://linkis.apache.org/zh-CN/docs/latest/development/linkis_docker_build_instrument" target="_blank" rel="noopener noreferrer">Linkis Docker 镜像打包</a> 所述的方式制作了 Linkis 镜像</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="创建调试环境"></a>创建调试环境<a class="hash-link" href="#创建调试环境" title="Direct link to heading">#</a></h3><p>本步骤会创建一个 KinD 集群，并在其上部署 MySQL、 Linkis 和 LDH 实例。</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> linkis-dist/helm</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/create-kind-cluster.sh </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain">    </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/install-mysql.sh </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain">    </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/install-ldh.sh </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain">    </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/install-charts-with-ldh.sh</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Creating KinD cluster ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- kind cluster config: /var/folders/9d/bb6ggdm177j25q40yf5d50dm0000gn/T/kind-XXXXX.Fc2dFJbG/kind-cluster.yaml</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Cluster</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: kind.x-k8s.io/v1alpha4</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nodes:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - role: control-plane</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    extraMounts:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - hostPath: /var/folders/9d/bb6ggdm177j25q40yf5d50dm0000gn/T/kind-XXXXX.Fc2dFJbG/data</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        containerPath: /data</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Creating cluster </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Ensuring node image </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">kindest/node:v1.21.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> 🖼 </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Preparing nodes 📦  </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Writing configuration 📜 </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Starting control-plane 🕹️ </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Installing CNI 🔌 </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Installing StorageClass 💾 </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Set kubectl context to </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kind-test-helm&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">You can now use your cluster with:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl cluster-info --context kind-test-helm</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Have a </span><span class="token function" style="color:rgb(80, 250, 123)">nice</span><span class="token plain"> day</span><span class="token operator">!</span><span class="token plain"> 👋</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Loading MySQL image ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Image: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;mysql:5.7&quot;</span><span class="token plain"> with ID </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sha256:3147495b3a5ce957dee2319099a8808c1418e0b0a2c82c9b2396c5fb4b688509&quot;</span><span class="token plain"> not yet present on node </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm-control-plane&quot;</span><span class="token plain">, loading</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Deploying MySQL ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">namespace/mysql created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/mysql created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/mysql created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># LDH version: dev</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Loading LDH image ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Image: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linkis-ldh:dev&quot;</span><span class="token plain"> with ID </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sha256:aa3bde0a31bf704413fb75673fc2894b03a0840473d8fe15e2d7f7dd22f1f854&quot;</span><span class="token plain"> not yet present on node </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm-control-plane&quot;</span><span class="token plain">, loading</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Deploying LDH ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">namespace/ldh created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/flink-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/hadoop-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/hive-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/spark-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/zookeeper-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/ldh created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/ldh created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Loading Linkis image ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Image: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linkis:dev&quot;</span><span class="token plain"> with ID </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sha256:0dfa7882c4216305a80cf57efa8cfb483d006bae5ba931288ffb8025e1db4e58&quot;</span><span class="token plain"> not yet present on node </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm-control-plane&quot;</span><span class="token plain">, loading</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Image: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linkis-web:dev&quot;</span><span class="token plain"> with ID </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sha256:1dbe0e9319761dbe0e93197665d38077cb2432b8b755dee834928694875c8a22&quot;</span><span class="token plain"> not yet present on node </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm-control-plane&quot;</span><span class="token plain">, loading</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Installing linkis, image tag=dev,local mode=false ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME: linkis-demo</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAMESPACE: linkis</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">STATUS: deployed</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">REVISION: </span><span class="token number">1</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TEST SUITE: None</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NOTES:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Welcome to Apache Linkis </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v1.3.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">!</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.___    .___ .______  .____/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"> .___ .________</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain">   </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> __</span><span class="token operator">|</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain">   /  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">: __</span><span class="token operator">||</span><span class="token plain">    ___/</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain">       </span><span class="token operator">||</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain">  ___/</span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain">___    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">     </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">       /</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">   /  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">___</span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">__:___/</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">______/</span><span class="token operator">|</span><span class="token plain">___</span><span class="token operator">|</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain">___</span><span class="token operator">||</span><span class="token plain">___</span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">  /</span><span class="token operator">|</span><span class="token plain">___</span><span class="token operator">|</span><span class="token plain">   </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> v1.3.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                           </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">/</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Linkis builds a layer of computation middleware between upper applications and underlying engines.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Please visit https://linkis.apache.org/ </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> details.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Enjoy</span><span class="token operator">!</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/flink-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/hadoop-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/hive-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/spark-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/zookeeper-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> kubectl get pods -n ldh -o wide</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                   READY   STATUS    RESTARTS   AGE     IP           NODE                      NOMINATED NODE   READINESS GATES</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ldh-6648554447-ml2bn   </span><span class="token number">1</span><span class="token plain">/1     Running   </span><span class="token number">0</span><span class="token plain">          6m25s   </span><span class="token number">10.244</span><span class="token plain">.0.6   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> kubectl get pods -n linkis -o wide</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                                READY   STATUS             RESTARTS   AGE     IP            NODE                      NOMINATED NODE   READINESS GATES</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">init-db-bcp85                                       </span><span class="token number">0</span><span class="token plain">/1     Completed          </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.14   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-cg-engineconnmanager-659bf85689-ddvhw   </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">1</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.7    test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-cg-engineplugin-98bd6945-tsgjl          </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">1</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.10   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-cg-entrance-858f74c868-xrd82            </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.12   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-cg-linkismanager-6f96f69b8b-ns6st       </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.11   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-mg-eureka-0                             </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.13   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-mg-gateway-68ddb8c547-xgvhn             </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.15   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-ps-publicservice-6bbf99fcd7-sc922       </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.8    test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-web-554bd7659f-nmdjl                    </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.9    test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="调试组件"></a>调试组件<a class="hash-link" href="#调试组件" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="打开端口转发"></a>打开端口转发<a class="hash-link" href="#打开端口转发" title="Direct link to heading">#</a></h4><p>每个组件在容器内的 JVM 远程调试端口均为 5005， 这些端口会被映射到宿主机上的不同端口，具体如下：</p><ul><li>mg-eureka: 5001</li><li>mg-gateway: 5002</li><li>ps-publicservice: 5004</li><li>cg-linkismanager: 5007</li><li>cg-entrance: 5008</li><li>cg-engineconnmanager: 5009</li><li>cg-engineplugin: 5010</li></ul><p>另外，Web Console 会被映射到宿主机上的 8087 端口，可以在浏览器上输入<code>http://localhost:8087</code>进行访问.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> ./scripts/remote-debug-proxy.sh start      </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">8087</span><span class="token plain">:8087-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mg-eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5001</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mg-gateway</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5002</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">ps-publicservice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5004</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-linkismanager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5007</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-entrance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5008</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-engineconnmanager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5009</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-engineplugin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5010</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> ./scripts/remote-debug-proxy.sh list </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10972</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5052548</span><span class="token plain">  </span><span class="token number">31244</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.10 kubectl port-forward -n linkis pod/linkis-demo-cg-engineplugin-98bd6945-tsgjl </span><span class="token number">5010</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10970</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5053060</span><span class="token plain">  </span><span class="token number">30988</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.12 kubectl port-forward -n linkis pod/linkis-demo-cg-engineconnmanager-659bf85689-ddvhw </span><span class="token number">5009</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10968</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5054084</span><span class="token plain">  </span><span class="token number">30428</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.10 kubectl port-forward -n linkis pod/linkis-demo-cg-entrance-858f74c868-xrd82 </span><span class="token number">5008</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10966</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5053316</span><span class="token plain">  </span><span class="token number">30620</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.11 kubectl port-forward -n linkis pod/linkis-demo-cg-linkismanager-6f96f69b8b-ns6st </span><span class="token number">5007</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10964</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5064092</span><span class="token plain">  </span><span class="token number">31152</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.10 kubectl port-forward -n linkis pod/linkis-demo-ps-publicservice-6bbf99fcd7-sc922 </span><span class="token number">5004</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10962</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5051012</span><span class="token plain">  </span><span class="token number">31244</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.12 kubectl port-forward -n linkis pod/linkis-demo-mg-gateway-68ddb8c547-xgvhn </span><span class="token number">5002</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10960</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5053060</span><span class="token plain">  </span><span class="token number">31312</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.13 kubectl port-forward -n linkis pod/linkis-demo-mg-eureka-0 </span><span class="token number">5001</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 在调试完成后，可以使用如下命令停止端口转发</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> ./scripts/remote-debug-proxy.sh stop </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">8087</span><span class="token plain">:8087-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mg-eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5001</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mg-gateway</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5002</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">ps-publicservice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5004</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-linkismanager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5007</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-entrance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5008</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-engineconnmanager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5009</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-engineplugin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5010</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="配置-ide-进行远程调试"></a>配置 IDE 进行远程调试<a class="hash-link" href="#配置-ide-进行远程调试" title="Direct link to heading">#</a></h4><p>在 IDE 上进行如下配置，开启远程调试:</p><p><img src="/zh-CN/assets/images/kube-jvm-remote-debug-0fbc0ecd7d2d6950369e95c80712c59f.png"></p><p>开启远程调试
<img src="/zh-CN/assets/images/kube-jvm-remote-debug-start-0d2691c107f093e17c24113050336d4a.png"></p><p>设置断点，提交一个作业，进行调试</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> ./scripts/login-pod.sh mg-gateway</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- login </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mg-gateway</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s bash ...</span></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">bash-4.2$ ./bin/./linkis-cli -engineType shell-1 -codeType shell -code &quot;echo </span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">hello</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)"> &quot;  -submitUser hadoop -proxyUser hadoop</span></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">=====Java Start Command=====</span></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">exec /etc/alternatives/jre/bin/java -server -Xms32m -Xmx2048m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/opt/linkis/logs/linkis-cli -XX:ErrorFile=/opt/linkis/logs/linkis-cli/ps_err_pid%p.log -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=80 -XX:+DisableExplicitGC    -classpath /opt/linkis/conf/linkis-cli:/opt/linkis/lib/linkis-computation-governance/linkis-client/linkis-cli/*:/opt/linkis/lib/linkis-commons/public-module/*: -Dconf.root=/etc/linkis-conf -Dconf.file=linkis-cli.properties -Dlog.path=/opt/linkis/logs/linkis-cli -Dlog.file=linkis-client..log.20220925171540947077800  org.apache.linkis.cli.application.LinkisClientApplication &#x27;</span><span class="token plain">-engineType shell-1 -codeType shell -code </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;hello&quot;</span><span class="token plain">  -submitUser hadoop -proxyUser hadoop&#x27;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img src="/zh-CN/assets/images/kube-jvm-remote-debug-breakpoint-2e8a5c98809db9e83cab0d249ee1e042.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="清理环境"></a>清理环境<a class="hash-link" href="#清理环境" title="Direct link to heading">#</a></h3><p>调试完成后，可以使用如下命令清理整个环境:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> kind delete clusters test-helm                                              </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Deleted clusters: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="其他常用操作"></a>其他常用操作<a class="hash-link" href="#其他常用操作" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="查看组件日志"></a>查看组件日志<a class="hash-link" href="#查看组件日志" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> kubectl logs -n linkis linkis-demo-cg-engineconnmanager-659bf85689-ddvhw -f</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">RUN_IN_FOREGROUND</span><span class="token operator">=</span><span class="token plain">true</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ /opt/linkis/sbin/linkis-daemon.sh start cg-engineconnmanager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Start to check whether the cg-engineconnmanager is running</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Start server, startup script:  /opt/linkis/sbin/ext/linkis-cg-engineconnmanager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token plain">Java Start </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">Command</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">java   -DserviceName</span><span class="token operator">=</span><span class="token plain">linkis-cg-engineconnmanager -Xmx512M -XX:+UseG1GC -Xloggc:/var/logs/linkis/linkis-cg-engineconnmanager-gc.log -agentlib:jdwp</span><span class="token operator">=</span><span class="token plain">transport</span><span class="token operator">=</span><span class="token plain">dt_socket,server</span><span class="token operator">=</span><span class="token plain">y,suspend</span><span class="token operator">=</span><span class="token plain">n,address</span><span class="token operator">=</span><span class="token number">5005</span><span class="token plain">  -cp /etc/linkis-conf:/opt/linkis/lib/linkis-commons/public-module/*:/opt/linkis/lib/linkis-computation-governance/linkis-cg-engineconnmanager/* org.apache.linkis.ecm.server.LinkisECMApplication  --eureka.instance.prefer-ip-address</span><span class="token operator">=</span><span class="token plain">true  --eureka.instance.instance-id</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.cloud.client.ip-address}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.application.name}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${server.port}</span><span class="token plain"> </span><span class="token operator file-descriptor important">2</span><span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">OpenJDK </span><span class="token number">64</span><span class="token plain">-Bit Server VM warning: If the number of processors is expected to increase from one, </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"> you should configure the number of parallel GC threads appropriately using -XX:ParallelGCThreads</span><span class="token operator">=</span><span class="token plain">N</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Listening </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> transport dt_socket at address: </span><span class="token number">5005</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">16</span><span class="token plain">:32:41.101 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> INFO  org.apache.linkis.common.conf.BDPConfiguration$ - ******************* Notice: The Linkis configuration </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> is linkis.properties </span><span class="token operator">!</span><span class="token plain"> *******************</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">16</span><span class="token plain">:32:41.130 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> INFO  org.apache.linkis.common.conf.BDPConfiguration$ - *********************** Notice: The Linkis serverConf </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> is linkis-cg-engineconnmanager.properties </span><span class="token operator">!</span><span class="token plain"> ******************</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">16</span><span class="token plain">:32:41.222 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> INFO  org.apache.linkis.LinkisBaseServerApp - Ready to start linkis-cg-engineconnmanager with args: --eureka.instance.prefer-ip-address</span><span class="token operator">=</span><span class="token plain">true</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--eureka.instance.instance-id</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.cloud.client.ip-address}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.application.name}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${server.port}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="进入组件-pod-内"></a>进入组件 Pod 内<a class="hash-link" href="#进入组件-pod-内" title="Direct link to heading">#</a></h4><p>使用<code>./scripts/login-pod.sh &lt;组件名&gt;</code>可以进入组件的 Pod 打开一个 Bash 实例进行交互式操作，其中组件名可以为:</p><ul><li>cg-engineconnmanager</li><li>cg-engineplugin</li><li>cg-entrance</li><li>cg-linkismanager</li><li>mg-eureka</li><li>mg-gateway</li><li>ps-publicservice</li><li>web</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> ./scripts/login-pod.sh cg-engineconnmanager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- login </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-engineconnmanager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;s </span><span class="token function" style="color:rgb(80, 250, 123)">bash</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bash-4.2$ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">pwd</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/opt/linkis</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bash-4.2$  </span><span class="token function" style="color:rgb(80, 250, 123)">env</span><span class="token plain"> </span><span class="token operator">|</span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> LINKIS</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LINKIS_DEMO_PS_PUBLICSERVICE_SERVICE_HOST</span><span class="token operator">=</span><span class="token number">10.96</span><span class="token plain">.93.45</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LINKIS_DEMO_CG_LINKISMANAGER_PORT_9101_TCP_PROTO</span><span class="token operator">=</span><span class="token plain">tcp</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LINKIS_DEMO_WEB_PORT_8087_TCP_PORT</span><span class="token operator">=</span><span class="token number">8087</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LINKIS_CLIENT_CONF_DIR</span><span class="token operator">=</span><span class="token plain">/etc/linkis-conf</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bash-4.2$ </span><span class="token function" style="color:rgb(80, 250, 123)">ps</span><span class="token plain"> aux </span><span class="token operator">|</span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> linkis</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hadoop         </span><span class="token number">1</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">11708</span><span class="token plain">  </span><span class="token number">2664</span><span class="token plain"> ?        Ss   </span><span class="token number">16</span><span class="token plain">:32   </span><span class="token number">0</span><span class="token plain">:00 /bin/bash /opt/linkis/sbin/linkis-daemon.sh start cg-engineconnmanager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hadoop        </span><span class="token number">10</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">11708</span><span class="token plain">  </span><span class="token number">2624</span><span class="token plain"> ?        S    </span><span class="token number">16</span><span class="token plain">:32   </span><span class="token number">0</span><span class="token plain">:00 </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> /opt/linkis/sbin/ext/linkis-cg-engineconnmanager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hadoop        </span><span class="token number">11</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">11712</span><span class="token plain">  </span><span class="token number">2536</span><span class="token plain"> ?        S    </span><span class="token number">16</span><span class="token plain">:32   </span><span class="token number">0</span><span class="token plain">:00 </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> /opt/linkis/sbin/ext/linkis-common-start</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hadoop        </span><span class="token number">12</span><span class="token plain">  </span><span class="token number">4.0</span><span class="token plain">  </span><span class="token number">3.2</span><span class="token plain"> </span><span class="token number">4146404</span><span class="token plain"> </span><span class="token number">400084</span><span class="token plain"> ?      Sl   </span><span class="token number">16</span><span class="token plain">:32   </span><span class="token number">0</span><span class="token plain">:35 java -DserviceName</span><span class="token operator">=</span><span class="token plain">linkis-cg-engineconnmanager -Xmx512M -XX:+UseG1GC -Xloggc:/var/logs/linkis/linkis-cg-engineconnmanager-gc.log -agentlib:jdwp</span><span class="token operator">=</span><span class="token plain">transport</span><span class="token operator">=</span><span class="token plain">dt_socket,server</span><span class="token operator">=</span><span class="token plain">y,suspend</span><span class="token operator">=</span><span class="token plain">n,address</span><span class="token operator">=</span><span class="token number">5005</span><span class="token plain"> -cp /etc/linkis-conf:/opt/linkis/lib/linkis-commons/public-module/*:/opt/linkis/lib/linkis-computation-governance/linkis-cg-engineconnmanager/* org.apache.linkis.ecm.server.LinkisECMApplication --eureka.instance.prefer-ip-address</span><span class="token operator">=</span><span class="token plain">true --eureka.instance.instance-id</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.cloud.client.ip-address}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.application.name}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${server.port}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bash-4.2$ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exit</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exit</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/incubator-linkis-website/edit/dev/i18n/zh-CN/docusaurus-plugin-content-docs/current/development/linkis-debug-with-helm-charts.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh-CN/docs/1.3.0/development/swwager-instructions"><div class="pagination-nav__sublabel">上一篇</div><div class="pagination-nav__label">« <!-- -->Swagger 注解使用说明</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh-CN/docs/1.3.0/upgrade/upgrade-from-0.X-to-1.0-guide"><div class="pagination-nav__sublabel">下一篇</div><div class="pagination-nav__label">0.x到1.0的升级指南<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#前言" class="table-of-contents__link">前言</a></li><li><a href="#依赖工具介绍" class="table-of-contents__link">依赖工具介绍</a><ul><li><a href="#版本要求" class="table-of-contents__link">版本要求</a></li><li><a href="#helm-charts-介绍" class="table-of-contents__link">Helm Charts 介绍</a></li><li><a href="#kind-介绍" class="table-of-contents__link">KinD 介绍</a></li></ul></li><li><a href="#linkis-容器化组件" class="table-of-contents__link">Linkis 容器化组件</a><ul><li><a href="#linkis-镜像" class="table-of-contents__link">Linkis 镜像</a></li><li><a href="#linkis-helm-chart" class="table-of-contents__link">Linkis Helm Chart</a></li><li><a href="#ldh" class="table-of-contents__link">LDH</a></li><li><a href="#kind-集群" class="table-of-contents__link">KinD 集群</a></li></ul></li><li><a href="#使用-linkis-容器化组件开发调试" class="table-of-contents__link">使用 Linkis 容器化组件开发调试</a><ul><li><a href="#创建调试环境" class="table-of-contents__link">创建调试环境</a></li><li><a href="#调试组件" class="table-of-contents__link">调试组件</a></li><li><a href="#清理环境" class="table-of-contents__link">清理环境</a></li><li><a href="#其他常用操作" class="table-of-contents__link">其他常用操作</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Linkis</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/docs/latest/introduction">文档</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-CN/faq/main">FAQ</a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/releases" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>版本<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/apache/incubator-linkis" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Issue Tracker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/pulls" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Pull Requests<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">订阅邮件组</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/community/how-to-subscribe">如何订阅</a></li><li class="footer__item"><a href="mailto:dev-subscribe@linkis.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>订阅邮件<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://lists.apache.org/list.html?dev@linkis.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>邮件归档<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div style="text-align: left;">
          <div>
            <p style="font-family: Avenir-Medium;font-size: 14px;color: #999;line-height: 20px;">Apache Linkis (incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p>
          </div>
          <div style="border-top: 1px solid #ccc;min-height: 60px;line-height: 20px;text-align: center;font-family: Avenir-Medium;font-size: 14px;color: #999;display: flex;align-items: center;"><span>Copyright © 2019-2020 The Apache Software Foundation. Apache Linkis, Linkis, and its feather logo are trademarks of The Apache Software Foundation.</span></div>
        </div></div></div></div></footer></div>
<script src="/zh-CN/assets/js/runtime~main.87c017e8.js"></script>
<script src="/zh-CN/assets/js/main.ea1e1eba.js"></script>
</body>
</html>