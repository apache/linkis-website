"use strict";(self.webpackChunklinkis_web_apache=self.webpackChunklinkis_web_apache||[]).push([[4118],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return u}});var a=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=a.createContext({}),c=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(l.Provider,{value:n},e.children)},h={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=c(t),u=i,g=d["".concat(l,".").concat(u)]||d[u]||h[u]||r;return t?a.createElement(g,s(s({ref:n},p),{},{components:t})):a.createElement(g,s({ref:n},p))}));function u(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,s=new Array(r);s[0]=d;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o.mdxType="string"==typeof e?e:i,s[1]=o;for(var c=2;c<r;c++)s[c]=t[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},6026:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return p},default:function(){return d}});var a=t(7462),i=t(3366),r=(t(7294),t(3905)),s=["components"],o={title:"How to Release",sidebar_position:3},l="Apache Publishing Guide",c={unversionedId:"how-to-release",id:"how-to-release",title:"How to Release",description:"This article takes the release of version 1.0.3 as an example",source:"@site/community/how-to-release.md",sourceDirName:".",slug:"/how-to-release",permalink:"/community/how-to-release",editUrl:"https://github.com/apache/incubator-linkis-website/edit/dev/community/how-to-release.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"How to Release",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"How to Contribute",permalink:"/community/how-to-contribute"},next:{title:"How to Verify",permalink:"/community/how-to-verify"}},p=[{value:"1 Tool preparation",id:"1-tool-preparation",children:[{value:"1.1 Install GPG",id:"11-install-gpg",children:[],level:3},{value:"1.2. Generate key with gpg",id:"12-generate-key-with-gpg",children:[],level:3},{value:"1.3. Upload the generated key to the public server",id:"13-upload-the-generated-key-to-the-public-server",children:[],level:3},{value:"1.4. Check whether the key is created successfully",id:"14-check-whether-the-key-is-created-successfully",children:[],level:3},{value:"1.5 Add the gpg public key to the KEYS file of the Apache SVN project repository",id:"15-add-the-gpg-public-key-to-the-keys-file-of-the-apache-svn-project-repository",children:[{value:"1.5.1 Add public key to KEYS in dev branch",id:"151-add-public-key-to-keys-in-dev-branch",children:[],level:4},{value:"1.5.2 Add the public key to KEYS in the release branch",id:"152-add-the-public-key-to-keys-in-the-release-branch",children:[],level:4}],level:3},{value:"1.6 Configure apache maven address and user password settings",id:"16-configure-apache-maven-address-and-user-password-settings",children:[],level:3},{value:"1.7 Prepare svn native environment",id:"17-prepare-svn-native-environment",children:[],level:3}],level:2},{value:"2 Prepare material package &amp; release of Apache Nexus",id:"2-prepare-material-package--release-of-apache-nexus",children:[{value:"2.1 Preparing to branch",id:"21-preparing-to-branch",children:[],level:3},{value:"2.2 Version number confirmation",id:"22-version-number-confirmation",children:[],level:3},{value:"2.3 Publish jar package to Apache Nexus repository",id:"23-publish-jar-package-to-apache-nexus-repository",children:[],level:3},{value:"2.4 Package source code",id:"24-package-source-code",children:[],level:3},{value:"2.5 Copy binary files",id:"25-copy-binary-files",children:[],level:3},{value:"2.6 Sign source package/binary package/sha512",id:"26-sign-source-packagebinary-packagesha512",children:[],level:3},{value:"2.7 Check whether the generated signature/sha512 is correct",id:"27-check-whether-the-generated-signaturesha512-is-correct",children:[],level:3}],level:2},{value:"3 Publish the Apache SVN repository",id:"3-publish-the-apache-svn-repository",children:[{value:"3.1 Check out the Linkis release directory",id:"31-check-out-the-linkis-release-directory",children:[],level:3},{value:"3.2 Add the content to be published to the SVN directory",id:"32-add-the-content-to-be-published-to-the-svn-directory",children:[],level:3},{value:"3.3 Submit Apache SVN",id:"33-submit-apache-svn",children:[],level:3}],level:2},{value:"4 Verify Release Candidates",id:"4-verify-release-candidates",children:[],level:2},{value:"5 Voting for non-ASF version",id:"5-voting-for-non-asf-version",children:[{value:"5.1 Non-ASF version Linkis community voting template",id:"51-non-asf-version-linkis-community-voting-template",children:[],level:4},{value:"5.2 Announce non-ASF version voting result template",id:"52-announce-non-asf-version-voting-result-template",children:[],level:4}],level:2},{value:"6. The official version initiates a vote",id:"6-the-official-version-initiates-a-vote",children:[{value:"6.1 Linkis community voting stage",id:"61-linkis-community-voting-stage",children:[{value:"6.1.1 Linkis Community Voting Template",id:"611-linkis-community-voting-template",children:[],level:4},{value:"6.1.2 Announce voting result template",id:"612-announce-voting-result-template",children:[],level:4}],level:3},{value:"6.2 Incubator community voting stage",id:"62-incubator-community-voting-stage",children:[{value:"6.2.1 Incubator community voting template",id:"621-incubator-community-voting-template",children:[],level:4},{value:"6.2.2 Announce voting result template",id:"622-announce-voting-result-template",children:[],level:4}],level:3}],level:2},{value:"7. Official release",id:"7-official-release",children:[{value:"7.1 Merging branches",id:"71-merging-branches",children:[],level:3},{value:"7.2 Migrating source and binary packages",id:"72-migrating-source-and-binary-packages",children:[],level:3},{value:"7.3 Confirm whether the packages under dev and release are correct",id:"73-confirm-whether-the-packages-under-dev-and-release-are-correct",children:[],level:3},{value:"7.4 Release version in Apache Staging repository",id:"74-release-version-in-apache-staging-repository",children:[],level:3},{value:"7.5 GitHub version released",id:"75-github-version-released",children:[],level:3},{value:"7.6 Update download page",id:"76-update-download-page",children:[],level:3}],level:2},{value:"8. Email notification version is released",id:"8-email-notification-version-is-released",children:[],level:2}],h={toc:p};function d(e){var n=e.components,t=(0,i.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},h,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"apache-publishing-guide"},"Apache Publishing Guide"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"This article takes the release of version 1.0.3 as an example")),(0,r.kt)("p",null,"Understand the content and process of Apache's release"),(0,r.kt)("p",null,"Source Release is the focus of Apache\u2019s attention and is also a required content for release; Binary Release is optional."),(0,r.kt)("p",null,"Please refer to the following link to find more ASF release guidelines:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"http://www.apache.org/dev/release-publishing"},"Apache Release Guide")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"http://www.apache.org/dev/release.html"},"Apache Release Policy")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"http://www.apache.org/dev/publishing-maven-artifacts.html"},"Maven Release Info"))),(0,r.kt)("p",null,"Both apache's maven and SVN repositorys use GPG signatures to verify the legitimacy of material files"),(0,r.kt)("h2",{id:"1-tool-preparation"},"1 Tool preparation"),(0,r.kt)("p",null,"(Required when this publisher is releasing for the first time)\nMainly include the preparation of the signature tool GnuPG, Maven repository certification"),(0,r.kt)("h3",{id:"11-install-gpg"},"1.1 Install GPG"),(0,r.kt)("p",null,"(Take the Window system as an example, if the git client has been installed, gpg may already exist, and there is no need to install it again)"),(0,r.kt)("p",null,"Download the binary installation package (GnuPG binary releases) at ",(0,r.kt)("a",{parentName:"p",href:"https://www.gnupg.org/download/index.html"},"GnuPG official website"),". The latest version is ",(0,r.kt)("a",{parentName:"p",href:"https://gpg4win.org/download.html"},"Gpg4win-3.1.16 2021-06-11")," After downloading, please complete the installation operation first\nNote: The commands of GnuPG 1.x version and 2.x version are slightly different. The following description takes 2.2.28 as an example\nAfter installation, the gpg command is added to the system environment variables and is available"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"$ gpg --version #Check the version, it should be 2.x\n")),(0,r.kt)("h3",{id:"12-generate-key-with-gpg"},"1.2. Generate key with gpg"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note the following points:"),"\n-The mailbox used should be apache mailbox\n-It is best to use pinyin or English for the name, otherwise garbled characters will appear"),(0,r.kt)("p",null,"According to the prompt, generate the key"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"C:\\Users\\xxx>gpg --full-gen-key\ngpg (GnuPG) 2.2.28; Copyright (C) 2021 g10 Code GmbH\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nPlease select what kind of key you want:\n   (1) RSA and RSA (default)\n   (2) DSA and Elgamal\n   (3) DSA (sign only)\n   (4) RSA (sign only)\n  (14) Existing key from card\nYour selection? 1 #here enter 1\nRSA keys may be between 1024 and 4096 bits long.\nWhat keysize do you want? (3072) 4096 #Enter 4096 here\nRequested keysize is 4096 bits\nPlease specify how long the key should be valid.\n         0 = key does not expire\n      <n> = key expires in n days\n      <n>w = key expires in n weeks\n      <n>m = key expires in n months\n      <n>y = key expires in n years\nKey is valid for? (0) 0 #here enter 0\nKey does not expire at all\nIs this correct? (y/N) y #Enter y here\n\nGnuPG needs to construct a user ID to identify your key.\n\nReal name: mingXiao #Enter Pinying or English name here\nEmail address: xiaoming@apache.org #Enter the email address of apache here\nComment: test key for apache create at 20211110 #Enter some comments here, can be empty\nYou selected this USER-ID:\n    \"mingXiao (test key for apache create at 20211110) <xiaoming@apache.org>\"\n\nChange (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O #Enter O here\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\n\n# At this time, a dialog box will pop up, asking you to enter the key for this gpg.\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Please enter this passphrase to protect your new key \u2502\n\u2502 \u2502\n\u2502 Passphrase: _______ no less than 8 digits ______________ \u2502\n\u2502 Repeat: _______________________________ \u2502\n\u2502 <OK> <Cancel> \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2500\u2500\u2500\u2500\u2500\u2518\n#After entering the secret key, a certain random action needs to be performed to generate encrypted prime numbers. After creation, the following information will be output\ngpg: key 1AE82584584EE68E marked as ultimately trusted\ngpg: revocation certificate stored as'C:/Users/xxx/AppData/Roaming/gnupg/openpgp-revocs.d\\E7A9B12D1AC2D8CF857AF5851AE82584584EE68E.rev'\npublic and secret key created and signed.\n\npub rsa4096 2021-11-10 [SC]\n      E7A9B12D1AC2D8CF857AF5851AE82584584EE68E\nuid mingXiao (test key for apache create at 20211110) <xiaoming@apache.org>\nsub rsa4096 2021-11-10 [E]\n")),(0,r.kt)("h3",{id:"13-upload-the-generated-key-to-the-public-server"},"1.3. Upload the generated key to the public server"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"$ gpg --keyid-format SHORT --list-keys\npub rsa4096/584EE68E 2021-11-10 [SC] #584EE68E is the key id\n      E7A9B12D1AC2D8CF857AF5851AE82584584EE68E\nuid [ultimate] mingXiao (test key for apache create at 20211110) <xiaoming@apache.org>\nsub rsa4096/399AA54F 2021-11-10 [E]\n\n# Send public key to keyserver via key id\n$ gpg --keyserver pgpkeys.mit.edu --send-key 584EE68E\n# Among them, pgpkeys.mit.edu is a randomly selected keyserver, and the keyserver list is: https://sks-keyservers.net/status/, which are automatically synchronized with each other, you can choose any one.\n")),(0,r.kt)("h3",{id:"14-check-whether-the-key-is-created-successfully"},"1.4. Check whether the key is created successfully"),(0,r.kt)("p",null,"Verify whether it is synchronized to the public network. It takes about a minute to find out. If it is not successful, you can upload and retry several times"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'method one\n$ gpg --keyserver hkp://pgpkeys.mit.edu --recv-keys 584EE68E #584EE68E is the corresponding key id\n\nD:\\>gpg --keyserver hkp://pgpkeys.mit.edu --recv-keys 584EE68E\n#Results are as follows\ngpg: key 1AE82584584EE68E: "mingXiao (test key for apache create at 20211110) <xiaoming@apache.org>" not changed\ngpg: Total number processed: 1\ngpg: unchanged: 1\n\nWay two\nGo directly to https://pgpkeys.mit.edu/ and enter the username mingXiao to search the query results\n')),(0,r.kt)("h3",{id:"15-add-the-gpg-public-key-to-the-keys-file-of-the-apache-svn-project-repository"},"1.5 Add the gpg public key to the KEYS file of the Apache SVN project repository"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"This step requires SVN")),(0,r.kt)("p",null,"Linkis DEV branch ",(0,r.kt)("a",{parentName:"p",href:"https://dist.apache.org/repos/dist/dev/incubator/linkis"},"https://dist.apache.org/repos/dist/dev/incubator/linkis")),(0,r.kt)("p",null,"Linkis Release branch ",(0,r.kt)("a",{parentName:"p",href:"https://dist.apache.org/repos/dist/release/incubator/linkis"},"https://dist.apache.org/repos/dist/release/incubator/linkis")),(0,r.kt)("h4",{id:"151-add-public-key-to-keys-in-dev-branch"},"1.5.1 Add public key to KEYS in dev branch"),(0,r.kt)("p",null,"Used to release RC version"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'mkdir -p linkis_svn/dev\ncd linkis_svn/dev\n\nsvn co https://dist.apache.org/repos/dist/dev/incubator/linkis\n# This step is relatively slow, and all versions will be copied. If the network is broken, use svn cleanup to delete the lock and re-execute it, and the upload will be resumed.\ncd linkis_svn/dev/linkis\n\n# Append the KEY you generated to the file KEYS, it is best to check if it is correct after appending\n(gpg --list-sigs YOUR_NAME@apache.org && gpg --export --armor YOUR_NAME@apache.org) >> KEYS\n# If there is a KEYS file before, it is not needed\nsvn add KEY\n#Submit to SVN.\nsvn ci -m "add gpg key for YOUR_NAME"\n')),(0,r.kt)("h4",{id:"152-add-the-public-key-to-keys-in-the-release-branch"},"1.5.2 Add the public key to KEYS in the release branch"),(0,r.kt)("p",null,"Used to release the official version"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'\nmkdir -p linkis_svn/release\ncd linkis_svn/release\n\nsvn co https://dist.apache.org/repos/dist/release/incubator/linkis\n# This step is relatively slow, and all versions will be copied. If the network is broken, use svn cleanup to delete the lock and re-execute it, and the upload will be resumed.\n\ncd linkis\n# Append the KEY you generated to the file KEYS, it is best to check if it is correct after appending\n(gpg --list-sigs YOUR_NAME@apache.org && gpg --export --armor YOUR_NAME@apache.org) >> KEYS\n# If there is a KEYS file before, it is not needed\nsvn add KEY\n#Submit to SVN.\nsvn ci -m "add gpg key for YOUR_NAME"\n')),(0,r.kt)("h3",{id:"16-configure-apache-maven-address-and-user-password-settings"},"1.6 Configure apache maven address and user password settings"),(0,r.kt)("p",null,"In the maven configuration file ~/.m2/settings.xml, add the following ",(0,r.kt)("inlineCode",{parentName:"p"},"<server>")," item\nFor encryption settings, please refer to ",(0,r.kt)("a",{parentName:"p",href:"http://maven.apache.org/guides/mini/guide-encryption.html"},"here")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<settings xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd" xmlns="http://maven .apache.org/SETTINGS/1.1.0"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n  <servers>\n    \x3c!-- Apache Repo Settings --\x3e\n    <server>\n        <id>apache.snapshots.https</id>\n         \x3c!-- APACHE LDAP username --\x3e\n        <username>{user-id}</username>\n         \x3c!--APACHE LDAP password (using the password encrypted by the mvn secret machine mechanism) --\x3e\n        <password>{user-pass}</password>\n    </server>\n    <server>\n        <id>apache.releases.https</id>\n        <username>{user-id}</username>\n        <password>{user-pass}</password>\n    </server>\n  </servers>\n<profiles>\n    <profile>\n      <id>apache-release</id>\n      <properties>\n        \x3c!-- Your GPG Keyname here --\x3e\n        <gpg.keyname>Your KEYID</gpg.keyname>\n        \x3c!-- Use an agent: Prevents being asked for the password during the build --\x3e\n        <gpg.useagent>true</gpg.useagent>\n        <gpg.passphrase>The password of your private key</gpg.passphrase>\n      </properties>\n    </profile>\n</profiles>\n</settings>\n')),(0,r.kt)("h3",{id:"17-prepare-svn-native-environment"},"1.7 Prepare svn native environment"),(0,r.kt)("p",null,"Apache uses svn to host the published content of the project"),(0,r.kt)("h2",{id:"2-prepare-material-package--release-of-apache-nexus"},"2 Prepare material package & release of Apache Nexus"),(0,r.kt)("h3",{id:"21-preparing-to-branch"},"2.1 Preparing to branch"),(0,r.kt)("p",null,"Pull the new branch from the branch to be released as the release branch. If you want to release the $",(0,r.kt)("inlineCode",{parentName:"p"},"{release_version}")," version now, check out the new branch ",(0,r.kt)("inlineCode",{parentName:"p"},"${release_version}-release")," from the branch to be released, and all operations thereafter are in ",(0,r.kt)("inlineCode",{parentName:"p"},"${ release_version}-release")," branch, merge into the main branch after the final release is completed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"#If the currently developed source code branch is dev-1.0.3, the version 1.0.3-release needs to be released\ngit clone --branch dev-1.0.3 git@github.com:apache/incubator-linkis.git\ncd incubator-linkis\ngit pull\ngit checkout -b 1.0.3-release\ngit push origin 1.0.3-release\n\n")),(0,r.kt)("h3",{id:"22-version-number-confirmation"},"2.2 Version number confirmation"),(0,r.kt)("p",null,"If the version number is incorrect, you need to modify the version number to"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"mvn versions:set -DnewVersion=1.0.3\nModify the configuration in pom.xml <linkis.version>1.0.3</linkis.version>\n")),(0,r.kt)("p",null,"Check whether the code is normal, including the version number, the compilation is successful, the unit test is all successful, the RAT check is successful, etc."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"#build check\n$ mvn clean install -Dmaven.javadoc.skip=true\n#RAT LICENSE check\n$ mvn apache-rat:check\n")),(0,r.kt)("h3",{id:"23-publish-jar-package-to-apache-nexus-repository"},"2.3 Publish jar package to Apache Nexus repository"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mvn -DskipTests deploy -Prelease -Dmaven.javadoc.skip=true # Start to compile and upload, it takes about 1h40min\n")),(0,r.kt)("p",null,"After the above command is executed successfully, the release package will be automatically uploaded to Apache's staging repository. All Artifacts deployed to the remote ",(0,r.kt)("a",{parentName:"p",href:"http://repository.apache.org/"},"maven repository")," will be in the staging state. Visit ",(0,r.kt)("a",{parentName:"p",href:"https://repository.apache.org/#stagingRepositories"},"https://repository.apache.org/#stagingRepositories")," and log in using the Apache LDAP account. You will see the uploaded version, and the content in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Repository")," column is ${STAGING.REPOSITORY}. Click ",(0,r.kt)("inlineCode",{parentName:"p"},"Close")," to tell Nexus that the build is complete, and only then is the version available. If there is a problem with the electronic signature, ",(0,r.kt)("inlineCode",{parentName:"p"},"Close")," will fail. You can check the failure information through ",(0,r.kt)("inlineCode",{parentName:"p"},"Activity"),".\nAt the same time, the binary file assembly-combined-package/target/apache-linkis-1.0.3-incubating-bin.tar.gz is also generated"),(0,r.kt)("p",null,"Step 2.4-3.3 execute the command, merge it in the tool/release.sh script, or execute it through the release.sh script"),(0,r.kt)("h3",{id:"24-package-source-code"},"2.4 Package source code"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'mkdir dist/apache-linkis\ngit archive --format=tar.gz --output="dist/apache-linkis/apache-linkis-1.0.3-incubating-src.tar.gz" release-1.0.3\n')),(0,r.kt)("h3",{id:"25-copy-binary-files"},"2.5 Copy binary files"),(0,r.kt)("p",null,"After step 2.3 is executed, the binary file has been generated, located in assembly-combined-package/target/apache-linkis-1.0.3-incubating-bin.tar.gz"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cp assembly-combined-package/target/apache-linkis-1.0.3-incubating-bin.tar.gz dist/apache-linkis\n")),(0,r.kt)("h3",{id:"26-sign-source-packagebinary-packagesha512"},"2.6 Sign source package/binary package/sha512"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cd dist/apache-linkis\nfor i in *.tar.gz; do echo $i; gpg --print-md SHA512 $i> $i.sha512; done # Calculate SHA512\nfor i in *.tar.gz; do echo $i; gpg --armor --output $i.asc --detach-sig $i; done # Calculate signature\n")),(0,r.kt)("h3",{id:"27-check-whether-the-generated-signaturesha512-is-correct"},"2.7 Check whether the generated signature/sha512 is correct"),(0,r.kt)("p",null,"For example, verify that the signature is correct as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cd dist/apache-linkis\nfor i in *.tar.gz; do echo $i; gpg --verify $i.asc $i; done\n")),(0,r.kt)("h2",{id:"3-publish-the-apache-svn-repository"},"3 Publish the Apache SVN repository"),(0,r.kt)("h3",{id:"31-check-out-the-linkis-release-directory"},"3.1 Check out the Linkis release directory"),(0,r.kt)("p",null,"Check out the Linkis distribution directory from the Apache SVN dev directory."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"svn co https://dist.apache.org/repos/dist/dev/incubator/linkis dist/linkis_svn_dev\n\n")),(0,r.kt)("h3",{id:"32-add-the-content-to-be-published-to-the-svn-directory"},"3.2 Add the content to be published to the SVN directory"),(0,r.kt)("p",null,"Create a directory of version numbers."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mkdir -p dist/linkis_svn_dev/1.0.3-rc01\n")),(0,r.kt)("p",null,"Add the source code package, binary package, and ShenYu executable binary package to the SVN working directory."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cp -f dist/apache-linkis/* dist/linkis_svn_dev/1.0.3-rc01\n\n")),(0,r.kt)("h3",{id:"33-submit-apache-svn"},"3.3 Submit Apache SVN"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'cd dist/linkis_svn_dev/\n\n# Check svn status\nsvn status\n# Add to svn version\nsvn add 1.0.3-rc01\nsvn status\n# Submit to svn remote server\n#svn commit -m "prepare for 1.0.3-rc01"\n\n')),(0,r.kt)("h2",{id:"4-verify-release-candidates"},"4 Verify Release Candidates"),(0,r.kt)("p",null,"For details, please refer to ",(0,r.kt)("a",{parentName:"p",href:"/community/how-to-verify"},"How to Verify release")),(0,r.kt)("h2",{id:"5-voting-for-non-asf-version"},"5 Voting for non-ASF version"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Linkis non-ASF version for Linkis community voting")),(0,r.kt)("font",{color:"red"},"The non-ASF version can choose to vote on the ASF infrastructure, but it is distributed through the non-ASF infrastructure, and if the official website has a link to the non-ASF version, it needs to be clearly marked as the non-ASF version. You can use the non-ASF version as a way to discover ASF policy violations and iteratively solve the opportunities for non-compliance. Only the version voted by IPMC members is the official ASF version. Incubating projects need to successfully release multiple ASF versions before they can graduate from the incubator",(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://incubator.apache.org/guides/releasemanagement.html"},"For more information, see")," ",(0,r.kt)("a",{parentName:"p",href:"https://incubator.apache.org/guides/releasemanagement.html"},"https://incubator.apache.org/guides/releasemanagement.html"))),(0,r.kt)("h4",{id:"51-non-asf-version-linkis-community-voting-template"},"5.1 Non-ASF version Linkis community voting template"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"To vote in the Linkis community, send an email to: ",(0,r.kt)("inlineCode",{parentName:"p"},"dev@linkis.apache.org"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"title:\n[VOTE] Release Apache Linkis (Incubating) ${release_version} ${rc_version}\n\ncontent:\n\nHello Linkis Community,\n\n    This is a call for review and vote to release Apache Linkis (Incubating) version ${release_version}-${rc_version}.\n\nRelease notes:\nhttps://github.com/apache/incubator-linkis/releases/tag/v${release_version}-${rc_version}\n\n    The release candidates:\n    https://dist.apache.org/repos/dist/dev/incubator/linkis/${release_version}-${rc_version}/\n\nGit tag for the release:\nhttps://github.com/apache/incubator-linkis/tree/v${release_version}-${rc_version}\n\nKeys to verify the Release Candidate:\nhttps://dist.apache.org/repos/dist/dev/incubator/linkis/KEYS\n\nGPG user ID:\n${YOUR.GPG.USER.ID}\n\n    Thanks to everyone who has contributed to this release.\n\nThe vote will be open for at least 72 hours or until necessary number of votes are reached.\n\nPlease vote accordingly:\n\n[] +1 approve\n[] +0 no opinion\n[] -1 disapprove with the reason\n\nChecklist for reference:\n\n[] Download links are valid.\n[] Checksums and PGP signatures are valid.\n[] Source code distributions have correct names matching the current release.\n[] LICENSE and NOTICE files are correct for each Linkis repo.\n[] All files have license headers if necessary.\n[] No compiled archives bundled in source archive.\n\nMore detail checklist please refer:\n        https://cwiki.apache.org/confluence/display/INCUBATOR/Incubator+Release+Checklist\n    \n    Steps to validate the release, Please refer to:\n        https://linkis.apache.org/community/how-to-verify\n\nThanks,\n${Linkis Release Manager}\n")),(0,r.kt)("h4",{id:"52-announce-non-asf-version-voting-result-template"},"5.2 Announce non-ASF version voting result template"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"title:\n[RESULT][VOTE] Release Apache Linkis (Incubating) ${release_version} ${rc_version}\n\ncontent:\nHello Linkis community,\n\n     Thanks to everyone that participated. The vote to release Apache Linkis\n     (Incubating) ${release_version} ${rc_version} in dev@linkis is now closed as PASSED.\n    \n     This vote passed with 6 +1 votes (4 bindings and 2 non-bindings) and no 0\n     or -1 votes.\n    \n     +1 votes\n         * Xiao Min / binding\n         * Xiao Hong\n         * Xiao Zi / binding\n         * xxxx\n    \n     0 votes\n         * No votes\n    \n     -1 votes\n         * No votes\n    \n     Vote thread can be found here [1].\n    \n     I'll continue with the release process and update the community as progress is made.\n\nBest regards,\n${Linkis Release Manager}\n\n[1] https://lists.apache.org/thread/xxxx\n\n")),(0,r.kt)("h2",{id:"6-the-official-version-initiates-a-vote"},"6. The official version initiates a vote"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Linkis is still in the incubation stage and needs to vote twice")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To vote in the Linkis community, send an email to: ",(0,r.kt)("inlineCode",{parentName:"li"},"dev@linkis.apache.org")),(0,r.kt)("li",{parentName:"ul"},"To vote in the incubator community, send an email to: ",(0,r.kt)("inlineCode",{parentName:"li"},"general@incubator.apache.org")," After Linkis graduates, you only need to vote in the Linkis community")),(0,r.kt)("h3",{id:"61-linkis-community-voting-stage"},"6.1 Linkis community voting stage"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To vote in the Linkis community, send a voting email to ",(0,r.kt)("inlineCode",{parentName:"li"},"dev@linkis.apache.org"),". PMC needs to check the correctness of the version according to the document, and then vote. After at least 72 hours have passed and three ",(0,r.kt)("inlineCode",{parentName:"li"},"+1 PMC member")," votes have been counted, you can enter the next stage of voting."),(0,r.kt)("li",{parentName:"ul"},"Announce the results of the voting and send an email to the result of the voting to ",(0,r.kt)("inlineCode",{parentName:"li"},"dev@linkis.apache.org"),".")),(0,r.kt)("h4",{id:"611-linkis-community-voting-template"},"6.1.1 Linkis Community Voting Template"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"title:\n[VOTE] Release Apache Linkis (Incubating) ${release_version} ${rc_version}\n\ncontent:\n\nHello Linkis Community,\n\n    This is a call for vote to release Apache Linkis (Incubating) version ${release_version}-${rc_version}.\n\nRelease notes:\nhttps://github.com/apache/incubator-linkis/releases/tag/v${release_version}-${rc_version}\n\n    The release candidates:\n    https://dist.apache.org/repos/dist/dev/incubator/linkis/${release_version}-${rc_version}/\n\n    Maven artifacts are available in a staging repository at:\n    https://repository.apache.org/content/repositories/orgapachelinkis-{staging-id}\n\nGit tag for the release:\nhttps://github.com/apache/incubator-linkis/tree/v${release_version}-${rc_version}\n\nKeys to verify the Release Candidate:\nhttps://dist.apache.org/repos/dist/dev/incubator/linkis/KEYS\n\nGPG user ID:\n${YOUR.GPG.USER.ID}\n\nThe vote will be open for at least 72 hours or until necessary number of votes are reached.\n\nPlease vote accordingly:\n\n[] +1 approve\n[] +0 no opinion\n[] -1 disapprove with the reason\n\nChecklist for reference:\n\n[] Download links are valid.\n[] Checksums and PGP signatures are valid.\n[] Source code distributions have correct names matching the current release.\n[] LICENSE and NOTICE files are correct for each Linkis repo.\n[] All files have license headers if necessary.\n[] No compiled archives bundled in source archive.\n\nMore detail checklist please refer:\n    https://cwiki.apache.org/confluence/display/INCUBATOR/Incubator+Release+Checklist\n\nThanks,\n${Linkis Release Manager}\n")),(0,r.kt)("h4",{id:"612-announce-voting-result-template"},"6.1.2 Announce voting result template"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"title:\n[RESULT][VOTE] Release Apache Linkis (Incubating) ${release_version} ${rc_version}\n\ncontent:\nHello Apache Linkis PPMC and Community,\n\n    The vote closes now as 72hr have passed. The vote PASSES with\n\n    xx (+1 non-binding) votes from the PPMC,\n    xx (+1 binding) votes from the IPMC,\n    xx (+1 non-binding) votes from the rest of the developer community,\n    and no further 0 or -1 votes.\n\n    The vote thread: {vote_mail_address}\n\n    I will now bring the vote to general@incubator.apache.org to get approval by the IPMC.\n    If this vote passes also, the release is accepted and will be published.\n\nThank you for your support.\n${Linkis Release Manager}\n")),(0,r.kt)("h3",{id:"62-incubator-community-voting-stage"},"6.2 Incubator community voting stage"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"To vote in the Incubator community, send a voting email to ",(0,r.kt)("inlineCode",{parentName:"li"},"general@incubator.apache.org"),", and 3 ",(0,r.kt)("inlineCode",{parentName:"li"},"+1 IPMC Member")," votes are required to proceed to the next stage."),(0,r.kt)("li",{parentName:"ol"},"Announce the result of the poll, send an email to ",(0,r.kt)("inlineCode",{parentName:"li"},"general@incubator.apache.org")," and send a copy to ",(0,r.kt)("inlineCode",{parentName:"li"},"dev@linkis.apache.org"),".")),(0,r.kt)("h4",{id:"621-incubator-community-voting-template"},"6.2.1 Incubator community voting template"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"Title: [VOTE] Release Apache Linkis(Incubating) ${release_version} ${rc_version}\n\ncontent:\n\nHello Incubator Community,\n\n    This is a call for a vote to release Apache Linkis(Incubating) version\n    ${release_version} ${rc_version}\n\n    The Apache Linkis community has voted on and approved a proposal to release\n    Apache Linkis(Incubating) version ${release_version} ${rc_version}\n\n    We now kindly request the Incubator PMC members review and vote on this\n    incubator release.\n\n    Linkis community vote thread:\n    \u2022 [Vote Link]\n\n    Vote result thread:\n    \u2022 [Link to voting results]\n\n    The release candidate:\n    \u2022 https://dist.apache.org/repos/dist/dev/incubator/linkis/${release_version}-${rc_version}/\n\n    Git tag for the release:\n    \u2022 https://github.com/apache/incubator-linkis/releases/tag/${release_version}-${rc_version}\n\n    Release notes:\n    \u2022 https://github.com/apache/incubator-linkis/releases/tag/${release_version}-${rc_version}\n\n    The artifacts signed with PGP key [fill in your personal KEY], corresponding to [fill in your personal email], that can be found in keys file:\n    \u2022 https://downloads.apache.org/incubator/linkis/KEYS\n\n    The vote will be open for at least 72 hours or until necessary number of votes are reached.\n\n    Please vote accordingly:\n\n    [] +1 approve\n    [] +0 no opinion\n    [] -1 disapprove with the reason\n\nThanks,\nOn behalf of Apache Linkis(Incubating) community\n\n")),(0,r.kt)("h4",{id:"622-announce-voting-result-template"},"6.2.2 Announce voting result template"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"Title: [RESULT][VOTE] Release Apache Linkis ${release_version} {rc_version}\n\ncontent:\nHi all\n\nThanks for reviewing and voting for Apache Linkis(Incubating) ${release_version} {rc_version}\nrelease, I am happy to announce the release voting has passed with [Number of voting results]\nbinding votes, no +0 or -1 votes. Binding votes are from IPMC\n\n   -xxx\n   -xxx\n   -xxx\n\nThe voting thread is:\n[Vote Link]\n\nMany thanks for all our mentors helping us with the release procedure, and\nall IPMC helped us to review and vote for Apache Linkis(Incubating) release. I will\nbe working on publishing the artifacts soon.\n\nThanks\nOn behalf of Apache Linkis(Incubating) community\n")),(0,r.kt)("h2",{id:"7-official-release"},"7. Official release"),(0,r.kt)("h3",{id:"71-merging-branches"},"7.1 Merging branches"),(0,r.kt)("p",null,"Merge the changes from the ",(0,r.kt)("inlineCode",{parentName:"p"},"${release_version}-release")," branch to the ",(0,r.kt)("inlineCode",{parentName:"p"},"master")," branch, and delete the ",(0,r.kt)("inlineCode",{parentName:"p"},"release")," branch after the merge is completed"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"$ git checkout master\n$ git merge origin/${release_version}-release\n$ git pull\n$ git push origin master\n$ git push --delete origin ${release_version}-release\n$ git branch -d ${release_version}-release\n")),(0,r.kt)("h3",{id:"72-migrating-source-and-binary-packages"},"7.2 Migrating source and binary packages"),(0,r.kt)("p",null,"Move the source and binary packages from the ",(0,r.kt)("inlineCode",{parentName:"p"},"dev")," directory of svn to the ",(0,r.kt)("inlineCode",{parentName:"p"},"release")," directory"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'$ svn mv https://dist.apache.org/repos/dist/dev/incubator/linkis/${release_version}-${rc_version} https://dist.apache.org/repos/dist/release/incubator/ linkis/ -m "transfer packages for ${release_version}-${rc_version}" #Mobile source package and binary package\n$ svn delete https://dist.apache.org/repos/dist/release/incubator/linkis/KEYS -m "delete KEYS" #Remove KEYS in the original release directory\n$ svn cp https://dist.apache.org/repos/dist/dev/incubator/linkis/KEYS https://dist.apache.org/repos/dist/release/incubator/linkis/ -m "transfer KEYS for ${release_version}-${rc_version}" #copy dev directory KEYS to release directory\n')),(0,r.kt)("h3",{id:"73-confirm-whether-the-packages-under-dev-and-release-are-correct"},"7.3 Confirm whether the packages under dev and release are correct"),(0,r.kt)("p",null,"-Confirm that ",(0,r.kt)("inlineCode",{parentName:"p"},"${release_version}-${rc_version}")," under ",(0,r.kt)("a",{parentName:"p",href:"https://dist.apache.org/repos/dist/dev/incubator/linkis/"},"dev")," has been deleted\n-Delete the release package of the previous version in the ",(0,r.kt)("a",{parentName:"p",href:"https://dist.apache.org/repos/dist/release/incubator/linkis/"},"release")," directory, these packages will be automatically saved in ","[here]","(https:/ /archive.apache.org/dist/incubator/linkis/)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'$ svn delete https://dist.apache.org/repos/dist/release/incubator/linkis/${last_release_version} -m "Delete ${last_release_version}"\n')),(0,r.kt)("h3",{id:"74-release-version-in-apache-staging-repository"},"7.4 Release version in Apache Staging repository"),(0,r.kt)("p",null,"-Log in to ",(0,r.kt)("a",{parentName:"p",href:"http://repository.apache.org"},"http://repository.apache.org")," and log in with your Apache account\n-Click on Staging repositories on the left,\n-Search for Linkis keywords, select your recently uploaded repository, and vote for the repository specified in the email\n-Click the ",(0,r.kt)("inlineCode",{parentName:"p"},"Release")," button above, a series of checks will be carried out in this process"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"It usually takes 24 hours to wait for the repository to synchronize to other data sources")),(0,r.kt)("h3",{id:"75-github-version-released"},"7.5 GitHub version released"),(0,r.kt)("p",null,"1.Tag the commit (on which the vote happened) with the release version without ",(0,r.kt)("inlineCode",{parentName:"p"},"-${RELEASE_CANDIDATE}"),". For example: after a successful vote on ",(0,r.kt)("inlineCode",{parentName:"p"},"v1.2-rc5"),", the hash will be tagged again with ",(0,r.kt)("inlineCode",{parentName:"p"},"v1. 2")," only."),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("inlineCode",{parentName:"li"},"Edit")," on the version ",(0,r.kt)("inlineCode",{parentName:"li"},"${release_version}")," on the ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/incubator/linkis/releases"},"GitHub Releases")," page")),(0,r.kt)("p",null,"Edit the version number and version description, and click ",(0,r.kt)("inlineCode",{parentName:"p"},"Publish release")),(0,r.kt)("h3",{id:"76-update-download-page"},"7.6 Update download page"),(0,r.kt)("p",null,"The linkis official website download address should point to the official apache address"),(0,r.kt)("p",null,"After waiting and confirming that the new release version is synchronized to the Apache mirror, update the following page:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://linkis.apache.org/#/download"},"https://linkis.apache.org/#/download")),(0,r.kt)("p",null,"The download connection of the GPG signature file and the hash verification file should use this prefix: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://downloads.apache.org/incubator/linkis/")),(0,r.kt)("h2",{id:"8-email-notification-version-is-released"},"8. Email notification version is released"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Please make sure that the Apache Staging repository has been published successfully, usually mail is published 24 hours after this step")),(0,r.kt)("p",null,"Send email to ",(0,r.kt)("inlineCode",{parentName:"p"},"dev@linkis.apache.org"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"announce@apache.org")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"general@incubator.apache.org")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"title:\n[ANNOUNCE] Apache Linkis (Incubating) ${release_version} available\n\ncontent:\n\nHi all,\n\nApache Linkis (Incubating) Team is glad to announce the new release of Apache Linkis (Incubating) ${release_version}.\n\nApache Linkis (Incubating) is a dynamic cloud-native eventing infrastruture used to decouple the application and backend middleware layer, which supports a wide range of use cases that encompass complex multi-cloud, widely distributed topologies using diverse technology stacks.\n\nDownload Links: https://linkis.apache.org/projects/linkis/download/\n\nRelease Notes: https://linkis.apache.org/events/release-notes/v${release_version}/\n\nWebsite: https://linkis.apache.org/\n\nLinkis Resources:\n-Issue: https://github.com/apache/incubator-linkis/issues\n-Mailing list: dev@linkis.apache.org\n\n-Apache Linkis (Incubating) Team\n")))}d.isMDXComponent=!0}}]);