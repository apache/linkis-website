"use strict";(self.webpackChunklinkis_web_apache=self.webpackChunklinkis_web_apache||[]).push([[70017],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>m});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=i.createContext({}),d=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=d(e.components);return i.createElement(s.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},g=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=d(t),g=a,m=p["".concat(s,".").concat(g)]||p[g]||u[g]||r;return t?i.createElement(m,l(l({ref:n},c),{},{components:t})):i.createElement(m,l({ref:n},c))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,l=new Array(r);l[0]=g;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o[p]="string"==typeof e?e:a,l[1]=o;for(var d=2;d<r;d++)l[d]=t[d];return i.createElement.apply(null,l)}return i.createElement.apply(null,t)}g.displayName="MDXCreateElement"},77011:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var i=t(87462),a=(t(67294),t(3905));const r={title:"JDBC Engine",sidebar_position:7},l=void 0,o={unversionedId:"engine-usage/jdbc",id:"version-1.5.0/engine-usage/jdbc",title:"JDBC Engine",description:"This article mainly introduces the installation, use and configuration of the JDBC engine plugin in Linkis.",source:"@site/versioned_docs/version-1.5.0/engine-usage/jdbc.md",sourceDirName:"engine-usage",slug:"/engine-usage/jdbc",permalink:"/docs/latest/engine-usage/jdbc",draft:!1,editUrl:"https://github.com/apache/linkis-website/edit/dev/versioned_docs/version-1.5.0/engine-usage/jdbc.md",tags:[],version:"1.5.0",sidebarPosition:7,frontMatter:{title:"JDBC Engine",sidebar_position:7},sidebar:"version-1.5.0/tutorialSidebar",previous:{title:"Shell Engine",permalink:"/docs/latest/engine-usage/shell"},next:{title:"Flink Engine",permalink:"/docs/latest/engine-usage/flink"}},s={},d=[{value:"1. Preliminary work",id:"1-preliminary-work",level:2},{value:"1.1 Environment Installation",id:"11-environment-installation",level:3},{value:"1.2 Environment verification (take <code>Mysql</code> as an example)",id:"12-environment-verification-take-mysql-as-an-example",level:3},{value:"2. Engine plugin installation",id:"2-engine-plugin-installation",level:2},{value:"2.1 Engine plugin preparation (choose one) non-default engine",id:"21-engine-plugin-preparation-choose-one-non-default-engine",level:3},{value:"2.2 Upload and load engine plugins",id:"22-upload-and-load-engine-plugins",level:3},{value:"2.3 Engine refresh",id:"23-engine-refresh",level:3},{value:"2.3.1 Restart and refresh",id:"231-restart-and-refresh",level:4},{value:"2.3.2 Check whether the engine is refreshed successfully",id:"232-check-whether-the-engine-is-refreshed-successfully",level:3},{value:"3. Engine usage",id:"3-engine-usage",level:2},{value:"3.1 Submit tasks through <code>Linkis-cli</code>",id:"31-submit-tasks-through-linkis-cli",level:3},{value:"3.2 Submitting tasks through <code>Linkis SDK</code>",id:"32-submitting-tasks-through-linkis-sdk",level:3},{value:"3.3 Multiple data source support",id:"33-multiple-data-source-support",level:3},{value:"4. Engine configuration instructions",id:"4-engine-configuration-instructions",level:2},{value:"4.1 Default Configuration Description",id:"41-default-configuration-description",level:3},{value:"4.2 Configuration modification",id:"42-configuration-modification",level:3},{value:"4.2.1 Management console configuration",id:"421-management-console-configuration",level:4},{value:"4.2.2 Task interface configuration",id:"422-task-interface-configuration",level:4},{value:"4.3 Engine related data sheet",id:"43-engine-related-data-sheet",level:3}],c={toc:d},p="wrapper";function u(e){let{components:n,...r}=e;return(0,a.kt)(p,(0,i.Z)({},c,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This article mainly introduces the installation, use and configuration of the ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," engine plugin in ",(0,a.kt)("inlineCode",{parentName:"p"},"Linkis"),"."),(0,a.kt)("h2",{id:"1-preliminary-work"},"1. Preliminary work"),(0,a.kt)("h3",{id:"11-environment-installation"},"1.1 Environment Installation"),(0,a.kt)("p",null,"If you want to use ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," engine on your server, you need to prepare ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," connection information, such as ",(0,a.kt)("inlineCode",{parentName:"p"},"MySQL")," database connection address, username and password, etc."),(0,a.kt)("h3",{id:"12-environment-verification-take-mysql-as-an-example"},"1.2 Environment verification (take ",(0,a.kt)("inlineCode",{parentName:"h3"},"Mysql")," as an example)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mysql -uroot -P 3306 -h 127.0.0.1 -p 123456\n")),(0,a.kt)("p",null,"The output of the following information means that the ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," connection information is available"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mysql: [Warning] Using a password on the command line interface can be insecure.\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 9\nServer version: 5.7.39 MySQL Community Server (GPL)\n\nCopyright (c) 2000, 2022, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql>\n")),(0,a.kt)("h2",{id:"2-engine-plugin-installation"},"2. Engine plugin installation"),(0,a.kt)("h3",{id:"21-engine-plugin-preparation-choose-one-non-default-engine"},"2.1 Engine plugin preparation (choose one) ",(0,a.kt)("a",{parentName:"h3",href:"/docs/latest/engine-usage/overview"},"non-default engine")),(0,a.kt)("p",null,"Method 1: Download the engine plug-in package directly"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://linkis.apache.org/zh-CN/blog/2022/04/15/how-to-download-engineconn-plugin"},(0,a.kt)("inlineCode",{parentName:"a"},"Linkis")," engine plugin download")),(0,a.kt)("p",null,"Method 2: Compile the engine plug-in separately (requires a ",(0,a.kt)("inlineCode",{parentName:"p"},"maven")," environment)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# compile\ncd ${linkis_code_dir}/linkis-engineconn-plugins/jdbc/\nmvn clean install\n# The compiled engine plug-in package is located in the following directory\n${linkis_code_dir}/linkis-engineconn-plugins/jdbc/target/out/\n")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/docs/latest/deployment/install-engineconn"},(0,a.kt)("inlineCode",{parentName:"a"},"EngineConnPlugin")," engine plugin installation")),(0,a.kt)("h3",{id:"22-upload-and-load-engine-plugins"},"2.2 Upload and load engine plugins"),(0,a.kt)("p",null,"Upload the engine plug-in package in 2.1 to the engine directory of the server"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"${LINKIS_HOME}/lib/linkis-engineconn-plugins\n")),(0,a.kt)("p",null,"The directory structure after uploading is as follows"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"linkis-engineconn-plugins/\n\u251c\u2500\u2500 jdbc\n\u2502   \u251c\u2500\u2500 dist\n\u2502 \u2502 \u2514\u2500\u2500 4\n\u2502   \u2502       \u251c\u2500\u2500 conf\n\u2502 \u2502 \u2514\u2500\u2500 lib\n\u2502   \u2514\u2500\u2500 plugin\n\u2502 \u2514\u2500\u2500 4\n")),(0,a.kt)("h3",{id:"23-engine-refresh"},"2.3 Engine refresh"),(0,a.kt)("h4",{id:"231-restart-and-refresh"},"2.3.1 Restart and refresh"),(0,a.kt)("p",null,"Refresh the engine by restarting the ",(0,a.kt)("inlineCode",{parentName:"p"},"linkis-cg-linkismanager")," service"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd ${LINKIS_HOME}/sbin\nsh linkis-daemon.sh restart cg-linkismanager\n")),(0,a.kt)("h3",{id:"232-check-whether-the-engine-is-refreshed-successfully"},"2.3.2 Check whether the engine is refreshed successfully"),(0,a.kt)("p",null,"You can check whether the ",(0,a.kt)("inlineCode",{parentName:"p"},"last_update_time")," of the ",(0,a.kt)("inlineCode",{parentName:"p"},"linkis_engine_conn_plugin_bml_resources")," table in the database is the time to trigger the refresh."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"#Login to the `linkis` database\nselect * from linkis_cg_engine_conn_plugin_bml_resources;\n")),(0,a.kt)("h2",{id:"3-engine-usage"},"3. Engine usage"),(0,a.kt)("h3",{id:"31-submit-tasks-through-linkis-cli"},"3.1 Submit tasks through ",(0,a.kt)("inlineCode",{parentName:"h3"},"Linkis-cli")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'sh ./bin/linkis-cli -engineType jdbc-4 \\\n-codeType jdbc -code "show tables" \\\n-submitUser hadoop -proxyUser hadoop \\\n-runtimeMap wds.linkis.jdbc.connect.url=jdbc:mysql://127.0.0.1:3306/linkis_db \\\n-runtimeMap wds.linkis.jdbc.driver=com.mysql.jdbc.Driver \\\n-runtimeMap wds.linkis.jdbc.username=test \\\n-runtimeMap wds.linkis.jdbc.password=123456\n')),(0,a.kt)("p",null,"More ",(0,a.kt)("inlineCode",{parentName:"p"},"Linkis-Cli")," command parameter reference: ",(0,a.kt)("a",{parentName:"p",href:"/docs/latest/user-guide/linkiscli-manual"},(0,a.kt)("inlineCode",{parentName:"a"},"Linkis-Cli")," usage")),(0,a.kt)("h3",{id:"32-submitting-tasks-through-linkis-sdk"},"3.2 Submitting tasks through ",(0,a.kt)("inlineCode",{parentName:"h3"},"Linkis SDK")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Linkis")," provides ",(0,a.kt)("inlineCode",{parentName:"p"},"SDK")," of ",(0,a.kt)("inlineCode",{parentName:"p"},"Java")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Scala")," to submit tasks to ",(0,a.kt)("inlineCode",{parentName:"p"},"Linkis")," server. For details, please refer to ",(0,a.kt)("a",{parentName:"p",href:"/docs/latest/user-guide/sdk-manual"},"JAVA SDK Manual"),". For the ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," task, you only need to modify ",(0,a.kt)("inlineCode",{parentName:"p"},"EngineConnType")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"CodeType")," parameters in ",(0,a.kt)("inlineCode",{parentName:"p"},"Demo"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'Map<String, Object> labels = new HashMap<String, Object>();\nlabels.put(LabelKeyConstant.ENGINE_TYPE_KEY, "jdbc-4"); // required engineType Label\nlabels.put(LabelKeyConstant.USER_CREATOR_TYPE_KEY, "hadoop-IDE");// required execute user and creator\nlabels.put(LabelKeyConstant.CODE_TYPE_KEY, "jdbc"); // required codeType\n')),(0,a.kt)("h3",{id:"33-multiple-data-source-support"},"3.3 Multiple data source support"),(0,a.kt)("p",null,"Starting from ",(0,a.kt)("inlineCode",{parentName:"p"},"Linkis 1.2.0"),", it provides support for multiple data sources in the ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," engine. First, we can manage different data sources in the console. Address: Log in to the management console--\x3eData source management--\x3eAdd data source"),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(40395).Z,width:"1251",height:"566"})),(0,a.kt)("p",null,"Figure 3-3 Data source management"),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(48017).Z,width:"720",height:"650"})),(0,a.kt)("p",null,"Figure 3-4 Data source connection test"),(0,a.kt)("p",null,"After the data source is added, you can use the multi-data source switching function of the ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," engine. There are two ways:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Specify the data source name parameter through the interface parameter\nExample parameters:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "executionContent": {\n    "code": "show databases",\n    "runType": "jdbc"\n  },\n  "params": {\n    "variable": {},\n    "configuration": {\n      "startup": {},\n      "runtime": {\n        "wds.linkis.engine.runtime.datasource": "test_mysql"\n      }\n    }\n  },\n  "source": {\n    "scriptPath": ""\n  },\n  "labels": {\n    "engineType": "jdbc-4",\n    "userCreator": "hadoop-IDE"\n  }\n}\n')),(0,a.kt)("p",null,"Parameter: ",(0,a.kt)("inlineCode",{parentName:"p"},"wds.linkis.engine.runtime.datasource")," is a configuration with a fixed name, do not modify the name definition at will"),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Use the ",(0,a.kt)("inlineCode",{parentName:"li"},"Scripts")," code of ",(0,a.kt)("inlineCode",{parentName:"li"},"DSS")," to submit the entry drop-down to filter the data sources that need to be submitted, as shown in the figure below:\n",(0,a.kt)("img",{src:t(1151).Z,width:"728",height:"240"}),"\nCurrently ",(0,a.kt)("inlineCode",{parentName:"li"},"dss-1.1.0")," does not support drop-down selection of data source name, ",(0,a.kt)("inlineCode",{parentName:"li"},"PR")," is under development, you can wait for the subsequent release or pay attention to related ",(0,a.kt)("inlineCode",{parentName:"li"},"PR"),":\n(",(0,a.kt)("a",{parentName:"li",href:"https://github.com/WeBankFinTech/DataSphereStudio/issues/940"},"https://github.com/WeBankFinTech/DataSphereStudio/issues/940"),")")),(0,a.kt)("p",null,"Function description of multiple data sources:"),(0,a.kt)("p",null,"1) In the previous version, the ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," engine's support for data sources was not perfect, especially when used with Scripts, the ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," script type can only bind a set of ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," engine parameters of the console.\nWhen we need to switch multiple data sources, we can only modify the connection parameters of the ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," engine, which is troublesome."),(0,a.kt)("p",null,"2) To cooperate with data source management, we introduce the multi-data source switching function of ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," engine, which can realize that only setting the data source name can submit jobs to different ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," services, and ordinary users do not need to\nIt maintains the connection information of the data source, avoids the complicated configuration, and also meets the security requirements of the data source connection password and other configurations."),(0,a.kt)("p",null,"3) The data sources set in the multi-data source management can be loaded by the ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," engine only after they have been released and have not expired, otherwise different types of exception prompts will be fed back to the user."),(0,a.kt)("p",null,"4) The loading priority of ",(0,a.kt)("inlineCode",{parentName:"p"},"JDBC")," engine parameters is: task submission parameters > data source selection parameters > console JDBC engine parameters"),(0,a.kt)("h2",{id:"4-engine-configuration-instructions"},"4. Engine configuration instructions"),(0,a.kt)("h3",{id:"41-default-configuration-description"},"4.1 Default Configuration Description"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Configuration"),(0,a.kt)("th",{parentName:"tr",align:null},"Default"),(0,a.kt)("th",{parentName:"tr",align:null},"Required"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"wds.linkis.jdbc.connect.url"),(0,a.kt)("td",{parentName:"tr",align:null},"jdbc:mysql://127.0.0.1:10000"),(0,a.kt)("td",{parentName:"tr",align:null},"yes"),(0,a.kt)("td",{parentName:"tr",align:null},"jdbc connection address")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"wds.linkis.jdbc.driver"),(0,a.kt)("td",{parentName:"tr",align:null},"no"),(0,a.kt)("td",{parentName:"tr",align:null},"yes"),(0,a.kt)("td",{parentName:"tr",align:null},"jdbc connection driver")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"wds.linkis.jdbc.username"),(0,a.kt)("td",{parentName:"tr",align:null},"no"),(0,a.kt)("td",{parentName:"tr",align:null},"yes"),(0,a.kt)("td",{parentName:"tr",align:null},"database connection username")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"wds.linknis.jdbc.password"),(0,a.kt)("td",{parentName:"tr",align:null},"no"),(0,a.kt)("td",{parentName:"tr",align:null},"yes"),(0,a.kt)("td",{parentName:"tr",align:null},"database link password")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"wds.linkis.jdbc.connect.max"),(0,a.kt)("td",{parentName:"tr",align:null},"10"),(0,a.kt)("td",{parentName:"tr",align:null},"No"),(0,a.kt)("td",{parentName:"tr",align:null},"The maximum number of jdbc engine connections")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"wds.linkis.jdbc.version"),(0,a.kt)("td",{parentName:"tr",align:null},"jdbc4"),(0,a.kt)("td",{parentName:"tr",align:null},"no"),(0,a.kt)("td",{parentName:"tr",align:null},"jdbc version")))),(0,a.kt)("h3",{id:"42-configuration-modification"},"4.2 Configuration modification"),(0,a.kt)("p",null,"If the default parameters are not satisfied, there are the following ways to configure some basic parameters"),(0,a.kt)("h4",{id:"421-management-console-configuration"},"4.2.1 Management console configuration"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"jdbc",src:t(98719).Z,width:"1256",height:"659"})),(0,a.kt)("p",null,"Note: After modifying the configuration under the ",(0,a.kt)("inlineCode",{parentName:"p"},"IDE")," tag, you need to specify ",(0,a.kt)("inlineCode",{parentName:"p"},"-creator IDE")," to take effect (other tags are similar), such as:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'sh ./bin/linkis-cli -creator IDE \\\n-engineType jdbc-4 -codeType jdbc \\\n-code "show tables"  \\\n-submitUser hadoop -proxyUser hadoop \n')),(0,a.kt)("h4",{id:"422-task-interface-configuration"},"4.2.2 Task interface configuration"),(0,a.kt)("p",null,"Submit the task interface, configure it through the parameter ",(0,a.kt)("inlineCode",{parentName:"p"},"params.configuration.runtime")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'Example of http request parameters\n{\n    "executionContent": {"code": "show databases;", "runType":  "jdbc"},\n    "params": {\n                    "variable": {},\n                    "configuration": {\n                            "runtime": {\n                                    "wds.linkis.jdbc.connect.url":"jdbc:mysql://127.0.0.1:3306/test",  \n                                    "wds.linkis.jdbc.driver":"com.mysql.jdbc.Driver",\n                                    "wds.linkis.jdbc.username":"test",\n                                    "wds.linkis.jdbc.password":"test23"\n                                }\n                            }\n                    },\n    "labels": {\n        "engineType": "jdbc-4",\n        "userCreator": "hadoop-IDE"\n    }\n}\n')),(0,a.kt)("h3",{id:"43-engine-related-data-sheet"},"4.3 Engine related data sheet"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Linkis")," is managed through engine tags, and the data table information involved is as follows."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"linkis_ps_configuration_config_key: key and default values \u200b\u200bof configuration parameters inserted into the engine\nlinkis_cg_manager_label: Insert engine label such as: jdbc-4\nlinkis_ps_configuration_category: The directory association relationship of the insertion engine\nlinkis_ps_configuration_config_value: The configuration that the insertion engine needs to display\nlinkis_ps_configuration_key_engine_relation: The relationship between the configuration item and the engine\n")),(0,a.kt)("p",null,"The initial data related to the engine in the table is as follows"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"-- set variable\nSET @JDBC_LABEL=\"jdbc-4\";\nSET @JDBC_ALL=CONCAT('*-*,',@JDBC_LABEL);\nSET @JDBC_IDE=CONCAT('*-IDE,',@JDBC_LABEL);\n\n-- engine label\ninsert into `linkis_cg_manager_label` (`label_key`, `label_value`, `label_feature`, `label_value_size`, `update_time`, `create_time`) VALUES ('combined_userCreator_engineType', @JDBC_ALL, 'OPTIONAL', 2, now(), now());\ninsert into `linkis_cg_manager_label` (`label_key`, `label_value`, `label_feature`, `label_value_size`, `update_time`, `create_time`) VALUES ('combined_userCreator_engineType', @JDBC_IDE, 'OPTIONAL', 2, now(), now());\n\nselect @label_id := id from linkis_cg_manager_label where `label_value` = @JDBC_IDE;\ninsert into linkis_ps_configuration_category (`label_id`, `level`) VALUES (@label_id, 2);\n\n-- configuration key\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.connect.url', 'For example: jdbc:mysql://127.0.0.1:10000', 'jdbc connection address', 'jdbc:mysql://127.0.0.1:10000', 'Regex', '^\\\\s*jdbc:\\\\w+://([^:]+)(:\\\\d+)(/[^\\\\?]+)?(\\\\?\\\\S* )?$', '0', '0', '1', 'Datasource configuration', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.driver', 'For example: com.mysql.jdbc.Driver', 'jdbc connection driver', '', 'None', '', '0', '0', '1 ', 'User Configuration', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.version', 'Value range: jdbc3,jdbc4', 'jdbc version','jdbc4', 'OFT', '[\\\"jdbc3\\\",\\\"jdbc4\\\"]' , '0', '0', '1', 'userconfig', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.username', 'username', 'Database connection username', '', 'None', '', '0', '0', '1', 'User configuration', 'jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.password', 'password', 'Database connection password', '', 'None', '', '0', '0', '1', 'User configuration', ' jdbc');\ninsert into `linkis_ps_configuration_config_key` (`key`, `description`, `name`, `default_value`, `validate_type`, `validate_range`, `is_hidden`, `is_advanced`, `level`, `treeName`, `engine_conn_type`) VALUES ('wds.linkis.jdbc.connect.max', 'range: 1-20, unit: piece', 'jdbc engine maximum number of connections', '10', 'NumInterval', '[1,20]', '0', '0', '1', 'Datasource configuration', 'jdbc');\n\n-- key engine relation\ninsert into `linkis_ps_configuration_key_engine_relation` (`config_key_id`, `engine_type_label_id`)\n(select config.id as `config_key_id`, label.id AS `engine_type_label_id` FROM linkis_ps_configuration_config_key config\nINNER JOIN linkis_cg_manager_label label ON config.engine_conn_type = 'jdbc' and label_value = @JDBC_ALL);\n\ninsert into `linkis_ps_configuration_config_value` (`config_key_id`, `config_value`, `config_label_id`)\n(select `relation`.`config_key_id` AS `config_key_id`, '' AS `config_value`, `relation`.`engine_type_label_id` AS `config_label_id` FROM linkis_ps_configuration_key_engine_relation relation\nINNER JOIN linkis_cg_manager_label label ON relation.engine_type_label_id = label.id AND label.label_value = @JDBC_ALL);\n")))}u.isMDXComponent=!0},48017:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/datasourceconntest-edb22e521785f16c46eca3025b5c9547.png"},40395:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/datasourcemanage-3858dfd17e1620f8467e94e77d7e3edd.png"},98719:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/jdbc-config-03e5f7f83247cecf4f62637f75ec6e6d.png"},1151:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/muti-data-source-usage-51cf8dfbf4e9f09bc5615d83b70bbdbe.png"}}]);