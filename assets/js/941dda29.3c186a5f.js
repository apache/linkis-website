"use strict";(self.webpackChunklinkis_web_apache=self.webpackChunklinkis_web_apache||[]).push([[79828],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=i,f=d["".concat(l,".").concat(m)]||d[m]||p[m]||a;return n?r.createElement(f,o(o({ref:t},u),{},{components:n})):r.createElement(f,o({ref:t},u))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:i,o[1]=s;for(var c=2;c<a;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},53128:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var r=n(87462),i=(n(67294),n(3905));const a={title:"Password-Free",sidebar_position:3},o=void 0,s={unversionedId:"auth/test",id:"version-1.4.0/auth/test",title:"Password-Free",description:"In some scenarios, in order to facilitate development and debugging, and to access pages and interfaces conveniently, you can enable test mode configuration for secret-free authentication",source:"@site/versioned_docs/version-1.4.0/auth/test.md",sourceDirName:"auth",slug:"/auth/test",permalink:"/docs/latest/auth/test",draft:!1,editUrl:"https://github.com/apache/linkis-website/edit/dev/versioned_docs/version-1.4.0/auth/test.md",tags:[],version:"1.4.0",sidebarPosition:3,frontMatter:{title:"Password-Free",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Token",permalink:"/docs/latest/auth/token"},next:{title:"proxy authentication",permalink:"/docs/latest/auth/proxy"}},l={},c=[{value:"1. Implementation logic introduction",id:"1-implementation-logic-introduction",level:2},{value:"2. How to use",id:"2-how-to-use",level:2},{value:"2.1 Step1 Open the test mode",id:"21-step1-open-the-test-mode",level:3},{value:"2.2 Step2 Restart the corresponding service",id:"22-step2-restart-the-corresponding-service",level:3},{value:"2.3 Step3 request verification",id:"23-step3-request-verification",level:3},{value:"3 Notes",id:"3-notes",level:2},{value:"3.1 Value setting of wds.linkis.test.user",id:"31-value-setting-of-wdslinkistestuser",level:3}],u={toc:c},d="wrapper";function p(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"In some scenarios, in order to facilitate development and debugging, and to access pages and interfaces conveniently, you can enable test mode configuration for secret-free authentication")),(0,i.kt)("h2",{id:"1-implementation-logic-introduction"},"1. Implementation logic introduction"),(0,i.kt)("p",null,"Control through unified authentication processing filter: ",(0,i.kt)("inlineCode",{parentName:"p"},"org.apache.linkis.server.security.SecurityFilter")),(0,i.kt)("p",null,"configuration item"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-properties"},"# Whether to enable test mode\nwds.linkis.test.mode=true\n# Simulated user name for test mode\nwds.linkis.test.user=hadoop\n")),(0,i.kt)("p",null,"Implemented pseudocode"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},'val BDP_TEST_USER = CommonVars("wds.linkis.test.user", "")\nval IS_TEST_MODE = CommonVars("wds. linkis. test. mode", false)\n\nif (IS_TEST_MODE. getValue) {\n     logger.info("test mode! login for uri: " + request.getRequestURI)\n     // Set the login user information to the user specified in the configuration\n     SecurityFilter.setLoginUser(response, BDP_TEST_USER)\n     true\n}\n')),(0,i.kt)("h2",{id:"2-how-to-use"},"2. How to use"),(0,i.kt)("h3",{id:"21-step1-open-the-test-mode"},"2.1 Step1 Open the test mode"),(0,i.kt)("p",null,"Directly modify the configuration file ",(0,i.kt)("inlineCode",{parentName:"p"},"linkis.properties")," (effective for all linkis services), modify the corresponding configuration as follows"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"# Whether to enable test mode\nwds.linkis.test.mode=true\n# Simulated user name for test mode\nwds.linkis.test.user=hadoop\n")),(0,i.kt)("p",null,"If you only need to enable the test mode of a certain service, you can modify the corresponding service configuration item.\nFor example: only enable the test mode of ",(0,i.kt)("inlineCode",{parentName:"p"},"entrance")," service\nDirectly modify the configuration file ",(0,i.kt)("inlineCode",{parentName:"p"},"linkis-cg-entrance.properties")," (effective for the entry service of linkis), modify the corresponding configuration as follows"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"# Whether to enable test mode\nwds.linkis.test.mode=true\n# Simulated user name for test mode\nwds.linkis.test.user=hadoop\n")),(0,i.kt)("h3",{id:"22-step2-restart-the-corresponding-service"},"2.2 Step2 Restart the corresponding service"),(0,i.kt)("p",null,"After modifying the configuration, you need to restart the service to take effect"),(0,i.kt)("h3",{id:"23-step3-request-verification"},"2.3 Step3 request verification"),(0,i.kt)("p",null,"After successfully restarting the service, you can directly request the http interface that originally required authentication, and you can request normally without additional authentication.\nThe management console can also access the content page without login authentication"),(0,i.kt)("h2",{id:"3-notes"},"3 Notes"),(0,i.kt)("h3",{id:"31-value-setting-of-wdslinkistestuser"},"3.1 Value setting of wds.linkis.test.user"),(0,i.kt)("p",null,"Because some interfaces will perform permission verification of user roles, such as: ","[Search historical EC information]"," interface: ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/rest_j/v1/linkisManager/ecinfo/ecrHistoryList"),"\nThe roles are:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"role name"),(0,i.kt)("th",{parentName:"tr",align:null},"permission description"),(0,i.kt)("th",{parentName:"tr",align:null},"configuration item"),(0,i.kt)("th",{parentName:"tr",align:null},"default value"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Administrator role"),(0,i.kt)("td",{parentName:"tr",align:null},"The highest authority, has all authority operations"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"wds.linkis.governance.station.admin")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"hadoop"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Historical task role"),(0,i.kt)("td",{parentName:"tr",align:null},"Compared with ordinary users, you can also view all task list information of other users"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"wds.linkis.jobhistory.admin")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"hadoop"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Normal role"),(0,i.kt)("td",{parentName:"tr",align:null},"Default role"),(0,i.kt)("td",{parentName:"tr",align:null}),(0,i.kt)("td",{parentName:"tr",align:null})))),(0,i.kt)("p",null,"For tests in different scenarios, the set value of ",(0,i.kt)("inlineCode",{parentName:"p"},"wds.linkis.test.user")," will be different and needs to be set according to the actual scenario.\nIf you need to access all interfaces, you need to configure it to the same value as ",(0,i.kt)("inlineCode",{parentName:"p"},"wds.linkis.governance.station.admin"),", usually ",(0,i.kt)("inlineCode",{parentName:"p"},"hadoop")))}p.isMDXComponent=!0}}]);