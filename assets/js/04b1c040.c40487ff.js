"use strict";(self.webpackChunklinkis_web_apache=self.webpackChunklinkis_web_apache||[]).push([[54118],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},h="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),h=p(n),u=i,m=h["".concat(l,".").concat(u)]||h[u]||d[u]||r;return n?a.createElement(m,s(s({ref:t},c),{},{components:n})):a.createElement(m,s({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,s=new Array(r);s[0]=u;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[h]="string"==typeof e?e:i,s[1]=o;for(var p=2;p<r;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},79602:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));const r={title:"How to Release",sidebar_position:3},s="Apache publishing guide",o={unversionedId:"how-to-release",id:"how-to-release",title:"How to Release",description:"This article takes the release of 1.0.3 Apache version as an example. If it is a non-Apache version, please refer to the detailed information https://incubator.apache.org/guides/releasemanagement.html",source:"@site/community/how-to-release.md",sourceDirName:".",slug:"/how-to-release",permalink:"/community/how-to-release",draft:!1,editUrl:"https://github.com/apache/linkis-website/edit/dev/community/how-to-release.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"How to Release",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"How to Participate in Developer Meetings",permalink:"/community/how-to-participate-in-developer-meetings"},next:{title:"How to Verify Release",permalink:"/community/how-to-verify"}},l={},p=[{value:"1 Tool preparation",id:"1-tool-preparation",level:2},{value:"1.1 Install GPG",id:"11-install-gpg",level:3},{value:"1.2. Generate key with gpg",id:"12-generate-key-with-gpg",level:3},{value:"1.3. Upload the generated key to the public server",id:"13-upload-the-generated-key-to-the-public-server",level:3},{value:"1.4. Check whether the key is created successfully",id:"14-check-whether-the-key-is-created-successfully",level:3},{value:"1.5 Add the gpg public key",id:"15-add-the-gpg-public-key",level:3},{value:"1.5.1 Add public key to keys in dev branch",id:"151-add-public-key-to-keys-in-dev-branch",level:4},{value:"1.5.2 Add public key to keys in release branch",id:"152-add-public-key-to-keys-in-release-branch",level:4},{value:"1.6 Configure apache maven address and user password settings",id:"16-configure-apache-maven-address-and-user-password-settings",level:3},{value:"2 Prepare material package &amp; release of apache nexus",id:"2-prepare-material-package--release-of-apache-nexus",level:2},{value:"2.1 Prepare branch/tag/release notes",id:"21-prepare-branchtagrelease-notes",level:3},{value:"2.2 Version number confirmation",id:"22-version-number-confirmation",level:3},{value:"2.3 Publish jar package to apache nexus repository",id:"23-publish-jar-package-to-apache-nexus-repository",level:3},{value:"2.4 Package source code",id:"24-package-source-code",level:3},{value:"2.5 Copy binary files",id:"25-copy-binary-files",level:3},{value:"2.6 Package front-end management console",id:"26-package-front-end-management-console",level:3},{value:"2.6.1 Install Node.js",id:"261-install-nodejs",level:4},{value:"2.6.2 Install dependencies",id:"262-install-dependencies",level:4},{value:"2.6.3 Package console project",id:"263-package-console-project",level:4},{value:"2.6.4 Copy console installation package",id:"264-copy-console-installation-package",level:4},{value:"2.7 Sign the source package/binary package/sha512",id:"27-sign-the-source-packagebinary-packagesha512",level:3},{value:"2.8 Check whether the generated signature/sha512 is correct",id:"28-check-whether-the-generated-signaturesha512-is-correct",level:3},{value:"3 Publish the apache svn repository",id:"3-publish-the-apache-svn-repository",level:2},{value:"3.1 Check out the Linkis release directory",id:"31-check-out-the-linkis-release-directory",level:3},{value:"3.2 Add the content to be published to the svn directory",id:"32-add-the-content-to-be-published-to-the-svn-directory",level:3},{value:"3.3 Submit apache svn",id:"33-submit-apache-svn",level:3},{value:"4 Verify release candidates",id:"4-verify-release-candidates",level:2},{value:"5 Initiates a vote",id:"5-initiates-a-vote",level:2},{value:"5.1 Linkis community voting stage",id:"51-linkis-community-voting-stage",level:3},{value:"5.1.1 Linkis community voting template",id:"511-linkis-community-voting-template",level:4},{value:"5.1.2 Announce voting result template",id:"512-announce-voting-result-template",level:4},{value:"5.2 Others",id:"52-others",level:3},{value:"6 Official release",id:"6-official-release",level:2},{value:"6.1 Migrating source and binary packages",id:"61-migrating-source-and-binary-packages",level:3},{value:"6.2 Confirm whether the packages under dev and release are correct",id:"62-confirm-whether-the-packages-under-dev-and-release-are-correct",level:3},{value:"6.3 Release version in apache staging repository",id:"63-release-version-in-apache-staging-repository",level:3},{value:"6.4 New version document release and download page update",id:"64-new-version-document-release-and-download-page-update",level:3},{value:"step1 archive ${publish_version} version document",id:"step1-archive-publish_version-version-document",level:3},{value:"step2 Copy the new Chinese version document",id:"step2-copy-the-new-chinese-version-document",level:3},{value:"step3 modify version.label",id:"step3-modify-versionlabel",level:3},{value:"Modify configuration docusaurus.config.js",id:"modify-configuration-docusaurusconfigjs",level:3},{value:"6.5 GitHub version released",id:"65-github-version-released",level:3},{value:"7 Email notification version is released",id:"7-email-notification-version-is-released",level:2},{value:"8 Update release information",id:"8-update-release-information",level:2},{value:"Appendix",id:"appendix",level:2},{value:"Appendix one release.sh",id:"appendix-one-releasesh",level:3},{value:"Mail switch to plain text format",id:"mail-switch-to-plain-text-format",level:3}],c={toc:p},h="wrapper";function d(e){let{components:t,...r}=e;return(0,i.kt)(h,(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"apache-publishing-guide"},"Apache publishing guide"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"This article takes the release of 1.0.3 Apache version as an example. If it is a non-Apache version, please refer to the ",(0,i.kt)("a",{parentName:"p",href:"https://incubator.apache.org/guides/releasemanagement.html"},"detailed information")," ",(0,i.kt)("a",{parentName:"p",href:"https://incubator.apache.org/guides/releasemanagement.html"},"https://incubator.apache.org/guides/releasemanagement.html"))),(0,i.kt)("p",null,"Understand the content and process of Apache's release. Source Release is the focus of Apache\u2019s attention and is also a required content for release; Binary Release is optional. Please refer to the following link to find more ASF release guidelines:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"http://www.apache.org/dev/release-publishing"},"Apache Release Guide")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"http://www.apache.org/dev/release.html"},"Apache Release Policy")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"http://www.apache.org/dev/publishing-maven-artifacts.html"},"Maven Release Info"))),(0,i.kt)("p",null,"Both apache's maven and SVN repositories use GPG signatures to verify the legitimacy of material files"),(0,i.kt)("h2",{id:"1-tool-preparation"},"1 Tool preparation"),(0,i.kt)("admonition",{title:"Note",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Required when this publisher is publishing for the first time")),(0,i.kt)("p",null,"Mainly include the preparation of the signature tool GnuPG, Maven repository certification"),(0,i.kt)("h3",{id:"11-install-gpg"},"1.1 Install GPG"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"(Take the Window system as an example, if the git client has been installed, gpg may already exist, and there is no need to install it again)")),(0,i.kt)("p",null,"Download the binary installation package (GnuPG binary releases) at ",(0,i.kt)("a",{parentName:"p",href:"https://www.gnupg.org/download/index.html"},"GnuPG official website"),". The latest version is ",(0,i.kt)("a",{parentName:"p",href:"https://gpg4win.org/download.html"},"Gpg4win-3.1.16 2021-06-11")," After downloading, please complete the installation operation first\nNote: The commands of GnuPG 1.x version and 2.x version are slightly different. The following description takes 2.2.28 as an example\nAfter installation, the gpg command is added to the system environment variables and is available"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"#Check the version, it should be 2.x\n$ gpg --version \n")),(0,i.kt)("h3",{id:"12-generate-key-with-gpg"},"1.2. Generate key with gpg"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Note the following points:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The mailbox used should be apache mailbox"),(0,i.kt)("li",{parentName:"ul"},"It is best to use pinyin or English for the name, otherwise garbled characters will appear")),(0,i.kt)("p",null,"According to the prompt, generate the key"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ gpg --full-gen-key\ngpg (GnuPG) 2.2.28; Copyright (C) 2021 g10 Code GmbH\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nPlease select what kind of key you want:\n   (1) RSA and RSA (default)\n   (2) DSA and Elgamal\n   (3) DSA (sign only)\n   (4) RSA (sign only)\n  (14) Existing key from card\nYour selection? 1 #here enter 1\nRSA keys may be between 1024 and 4096 bits long.\nWhat keysize do you want? (3072) 4096 #Enter 4096 here\nRequested keysize is 4096 bits\nPlease specify how long the key should be valid.\n         0 = key does not expire\n      <n> = key expires in n days\n      <n>w = key expires in n weeks\n      <n>m = key expires in n months\n      <n>y = key expires in n years\nKey is valid for? (0) 0 #here enter 0\nKey does not expire at all\nIs this correct? (y/N) y #Enter y here\n\nGnuPG needs to construct a user ID to identify your key.\n\nReal name: mingXiao #Enter Pinying or English name here\nEmail address: xiaoming@apache.org #Enter the email address of apache here\nComment: for apache release create at 20211110 #Enter some comments here, can be empty\nYou selected this USER-ID:\n    \"mingXiao (for apache release create at 20211110) <xiaoming@apache.org>\"\n\nChange (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O #Enter O here\nWe need to generate a lot of random bytes. It is a good idea to perform\nsome other action (type on the keyboard, move the mouse, utilize the\ndisks) during the prime generation; this gives the random number\ngenerator a better chance to gain enough entropy.\n\n# At this time, a dialog box will pop up, asking you to enter the key for this gpg. you need to remember that it will be used in subsequent steps.\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Please enter this passphrase to protect your new key\u2502\n\u2502                                                     \u2502\n\u2502 Passphrase: _______ no less than 8 digits _________ \u2502\n\u2502 Repeat: ___________________________________________ \u2502\n\u2502 <OK> <Cancel>                                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n#After entering the secret key, a certain random action needs to be performed to generate encrypted prime numbers. After creation, the following information will be output\ngpg: key 1AE82584584EE68E marked as ultimately trusted\ngpg: revocation certificate stored as'C:/Users/xxx/AppData/Roaming/gnupg/openpgp-revocs.d\\E7A9B12D1AC2D8CF857AF5851AE82584584EE68E.rev'\npublic and secret key created and signed.\n\npub rsa4096 2021-11-10 [SC]\n      E7A9B12D1AC2D8CF857AF5851AE82584584EE68E\nuid mingXiao (for apache release create at 20211110) <xiaoming@apache.org>\nsub rsa4096 2021-11-10 [E]\n")),(0,i.kt)("h3",{id:"13-upload-the-generated-key-to-the-public-server"},"1.3. Upload the generated key to the public server"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ gpg --keyid-format SHORT --list-keys\npub rsa4096/584EE68E 2021-11-10 [SC] #584EE68E is the key id\n      E7A9B12D1AC2D8CF857AF5851AE82584584EE68E\nuid [ultimate] mingXiao (for apache release create at 20211110) <xiaoming@apache.org>\nsub rsa4096/399AA54F 2021-11-10 [E]\n\n# Send public key to keyserver via key id\n$ gpg --keyserver keyserver.ubuntu.com --send-key 584EE68E\n# Among them, keyserver.ubuntu.com is the selected keyserver, it is recommended to use this, because the Apache Nexus verification uses this keyserver\n")),(0,i.kt)("h3",{id:"14-check-whether-the-key-is-created-successfully"},"1.4. Check whether the key is created successfully"),(0,i.kt)("p",null,"Verify whether it is synchronized to the public network. It takes about a minute to find out. If it is not successful, you can upload and retry several times"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'# method one\n$ gpg --keyserver keyserver.ubuntu.com --recv-keys 584EE68E #584EE68E is the corresponding key id\n\n#Results are as follows\ngpg: key 1AE82584584EE68E: "mingXiao (for apache release create at 20211110) <xiaoming@apache.org>" not changed\ngpg: Total number processed: 1\ngpg: unchanged: 1\n\n# method two\nGo directly to https://keyserver.ubuntu.com/ and enter the username mingXiao to search the query results\n')),(0,i.kt)("h3",{id:"15-add-the-gpg-public-key"},"1.5 Add the gpg public key"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"}," This step requires the use of SVN, please download and install the SVN client first, Apache uses svn to host the project\u2019s published content")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Linkis DEV branch ",(0,i.kt)("a",{parentName:"p",href:"https://dist.apache.org/repos/dist/dev/linkis"},"https://dist.apache.org/repos/dist/dev/linkis"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Linkis Release branch ",(0,i.kt)("a",{parentName:"p",href:"https://dist.apache.org/repos/dist/release/linkis"},"https://dist.apache.org/repos/dist/release/linkis")))),(0,i.kt)("h4",{id:"151-add-public-key-to-keys-in-dev-branch"},"1.5.1 Add public key to keys in dev branch"),(0,i.kt)("p",null,"Used to release RC version"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'$ mkdir -p linkis_svn/dev\n$ cd linkis_svn/dev\n\n$ svn co https://dist.apache.org/repos/dist/dev/linkis\n# This step is relatively slow, and all versions will be copied. If the network is broken, use svn cleanup to delete the lock and re-execute it, and the upload will be resumed.\n$ cd linkis_svn/dev/linkis\n\n# Append the KEY you generated to the file KEYS, it is best to check if it is correct after appending\n$ (gpg --list-sigs YOUR_NAME@apache.org && gpg --export --armor YOUR_NAME@apache.org) >> KEYS\n# If there is a KEYS file before, it is not needed\n$ svn add KEYS\n#Submit to SVN\n$ svn ci -m "add gpg key for YOUR_NAME"\n')),(0,i.kt)("h4",{id:"152-add-public-key-to-keys-in-release-branch"},"1.5.2 Add public key to keys in release branch"),(0,i.kt)("p",null,"Used to release the official version"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'\n$ mkdir -p linkis_svn/release\n$ cd linkis_svn/release\n\n$ svn co https://dist.apache.org/repos/dist/release/linkis\n# This step is relatively slow, and all versions will be copied. If the network is broken, use svn cleanup to delete the lock and re-execute it, and the upload will be resumed.\n\n$ cd linkis\n# Append the KEY you generated to the file KEYS, it is best to check if it is correct after appending\n$ (gpg --list-sigs YOUR_NAME@apache.org && gpg --export --armor YOUR_NAME@apache.org) >> KEYS\n# If there is a KEYS file before, it is not needed\n$ svn add KEYS\n#Submit to SVN\n$ svn ci -m "add gpg key for YOUR_NAME"\n')),(0,i.kt)("h3",{id:"16-configure-apache-maven-address-and-user-password-settings"},"1.6 Configure apache maven address and user password settings"),(0,i.kt)("p",null,"In the maven configuration file ~/.m2/settings.xml, add the following ",(0,i.kt)("inlineCode",{parentName:"p"},"<server>")," item\nFor encryption settings, please refer to ",(0,i.kt)("a",{parentName:"p",href:"http://maven.apache.org/guides/mini/guide-encryption.html"},"here")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<settings xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd" xmlns="http://maven .apache.org/SETTINGS/1.1.0"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n  <servers>\n    \x3c!-- Apache Repo Settings --\x3e\n    <server>\n        <id>apache.snapshots.https</id>\n         \x3c!-- APACHE LDAP username --\x3e\n        <username>{user-id}</username>\n         \x3c!--APACHE LDAP password (using the password encrypted by the mvn secret machine mechanism) --\x3e\n        <password>{user-pass}</password>\n    </server>\n    <server>\n        <id>apache.releases.https</id>\n        <username>{user-id}</username>\n        <password>{user-pass}</password>\n    </server>\n  </servers>\n<profiles>\n    <profile>\n      <id>apache-release</id>\n      <properties>\n        \x3c!-- Your GPG Keyname here --\x3e\n        <gpg.keyname>Your KEYID</gpg.keyname>\n        \x3c!-- Use an agent: Prevents being asked for the password during the build --\x3e\n        <gpg.useagent>true</gpg.useagent>\n        <gpg.passphrase>The password of your private key</gpg.passphrase>\n      </properties>\n    </profile>\n</profiles>\n</settings>\n')),(0,i.kt)("h2",{id:"2-prepare-material-package--release-of-apache-nexus"},"2 Prepare material package & release of apache nexus"),(0,i.kt)("h3",{id:"21-prepare-branchtagrelease-notes"},"2.1 Prepare branch/tag/release notes"),(0,i.kt)("p",null,"Pull the new branch from the branch to be released as the branch to be released. If you want to release the $",(0,i.kt)("inlineCode",{parentName:"p"},"{release_version}")," version now, check out the new branch ",(0,i.kt)("inlineCode",{parentName:"p"},"release-${release_version}-${condition_version}")," from the branch to be released, and all after that The operations are all performed on the ",(0,i.kt)("inlineCode",{parentName:"p"},"release-${release_version}-${condition_version}")," branch, and merge into the main branch after the final release is completed."),(0,i.kt)("p",null,"If the source branch currently developed is dev-1.0.3, version 1.0.3 needs to be released\n-Create branch: release-1.0.3-rc1\n-Create tag: release-1.0.3-rc1"),(0,i.kt)("p",null,"Sort out the content description of this change and release, sort by ","[","module]","[","pr_url].\nEnter the creation page ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/linkis/releases/new"},"https://github.com/apache/linkis/releases/new"),"\nCreate a release based on the previous release-1.0.3-rc1 tag, and check ",(0,i.kt)("inlineCode",{parentName:"p"},"This is a pre-release")," to write the release notes."),(0,i.kt)("admonition",{title:"Note",type:"caution"},(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"After the main repository apache/linkis is ready to release the branch/tag/release notes, please fork to your own repository and perform the following steps"))),(0,i.kt)("h3",{id:"22-version-number-confirmation"},"2.2 Version number confirmation"),(0,i.kt)("p",null,"If the version number is incorrect, you need to modify the version number to"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ mvn versions:set -DnewVersion=1.0.3\n\nModify the configuration in pom.xml \n<linkis.version>1.0.3</linkis.version>\n")),(0,i.kt)("p",null,"Check whether the code is normal, including the version number, the compilation is successful, the unit test is all successful, the RAT check is successful, etc."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"#build check\n$ mvn clean install -Dmaven.javadoc.skip=true\n#RAT LICENSE check\n#It can be executed within 5 minutes normally. If the execution has not ended for a long time, please check whether additional files that need not be checked have been added due to actions such as compiling.\n$ mvn apache-rat:check\n\n#Check all rat files after no exception\n$ find ./ -name rat.txt -print0 | xargs -0 -I file cat file > merged-rat.txt\n")),(0,i.kt)("p",null,"If the check is abnormal, please check whether additional unnecessary files have been added due to compilation and other actions, which can be removed."),(0,i.kt)("p",null,"The whitelist file of rat check is configured in the apache-rat-plugin plugin configuration in the outer pom.xml."),(0,i.kt)("p",null,"Check all license information in merged-rat.txt, and note that Binaries and Archives files are 0."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"Notes: 0\nBinaries: 0\nArchives: 0\n0 Unknown Licenses\n")),(0,i.kt)("font",{color:"red"},"If it is not 0, you need to confirm whether there is a license for the binary or compressed file in the source code. You can refer to `linkis-engineconn-plugins/python/src/main/py4j/py4j-0.10.7- src.zip`"),(0,i.kt)("h3",{id:"23-publish-jar-package-to-apache-nexus-repository"},"2.3 Publish jar package to apache nexus repository"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"# Start to compile and upload, it takes about 1h40min\n$ mvn -DskipTests deploy -Prelease -Dmaven.javadoc.skip=true\n")),(0,i.kt)("admonition",{title:"Note",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"1 If a network proxy is used or the requester's ip changes, it may cause the maven side to split in order to upload records multiple times. This needs to be closed first and re-deployed. It is best to turn off the network proxy\n2 If there is a timeout, you need to re-deploy")),(0,i.kt)("p",null,"After the above command is executed successfully, the release package will be automatically uploaded to Apache's staging repository. All Artifacts deployed to the remote ",(0,i.kt)("a",{parentName:"p",href:"http://repository.apache.org/"},"maven repository")," will be in the staging state. Visit ",(0,i.kt)("a",{parentName:"p",href:"https://repository.apache.org/#stagingRepositories"},"https://repository.apache.org/#stagingRepositories")," and log in using the Apache LDAP account. You will see the uploaded version, and the content in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Repository")," column is ${STAGING.REPOSITORY}. Click ",(0,i.kt)("inlineCode",{parentName:"p"},"Close")," to tell Nexus that the build is complete, and only then is the version available. If there is a problem with the electronic signature, ",(0,i.kt)("inlineCode",{parentName:"p"},"Close")," will fail. You can check the failure information through ",(0,i.kt)("inlineCode",{parentName:"p"},"Activity"),".\nAt the same time, the binary file linkis-dist/target/apache-linkis-1.0.3-bin.tar.gz is also generated"),(0,i.kt)("p",null,"Step 2.4-3.3 execute the command, merge it in the release.sh script, or execute it through the release.sh script (See appendix at the end of this article)"),(0,i.kt)("h3",{id:"24-package-source-code"},"2.4 Package source code"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'$ mkdir -p dist/apache-linkis\n\n#based on the release-1.0.3-rc1 branch to package the source code tar.gz material\n#--prefix=apache-linkis-1.0.3-src/ Note that the `/` archive will be in the apache-linkis-1.0.3-src folder after decompression\n#A pax_global_header file will be generated to record the commitid information. Without the --prefix, it will cause pax_global_header to be in the same level directory as the source file after decompression\n\n$ git archive --format=tar.gz --output="dist/apache-linkis/apache-linkis-1.0.3-src.tar.gz" --prefix=apache-linkis-1.0.3-src/  release-1.0.3-rc1\n')),(0,i.kt)("h3",{id:"25-copy-binary-files"},"2.5 Copy binary files"),(0,i.kt)("p",null,"After step 2.3 is executed, the binary file has been generated, located in linkis-dist/target/apache-linkis-1.0.3-bin.tar.gz"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ cp linkis-dist/target/apache-linkis-1.0.3-bin.tar.gz dist/apache-linkis\n")),(0,i.kt)("h3",{id:"26-package-front-end-management-console"},"2.6 Package front-end management console"),(0,i.kt)("h4",{id:"261-install-nodejs"},"2.6.1 Install Node.js"),(0,i.kt)("p",null,"Download Node.js to the local and install it. Download link: ",(0,i.kt)("a",{parentName:"p",href:"http://nodejs.cn/download/"},"http://nodejs.cn/download/")," (node v16 version is recommended)\n",(0,i.kt)("strong",{parentName:"p"},"This step only needs to be performed the first time you use it. ")),(0,i.kt)("h4",{id:"262-install-dependencies"},"2.6.2 Install dependencies"),(0,i.kt)("p",null,"Execute the following commands in the terminal command line:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"#Enter the project WEB root directory\n$ cd linkis/linkis-web\n#Required dependencies for installation project\n$ npm install\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"This step only needs to be performed the first time you use it. ")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Notice:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'1. An error is reported in the npm install step under Windows:\nError: Can\'t find Python executable "python", you can set the PYTHON env variable\nInstall windows-build-tools (administrator rights)\n$ npm install --global --production windows-build-tools\n$ Install node-gyp\n$ npm install --global node-gyp\n\n2. If the compilation fails, please follow the steps below to clean up and re-execute\n#Enter the project working directory, delete node_modules\n$ rm -rf node_modules\n#Delete package-lock.json\n$ rm -rf package-lock.json\n#Clear npm cache\n$ npm cache clear --force\n#Re-download dependencies\n$ npm install\n\n')),(0,i.kt)("h4",{id:"263-package-console-project"},"2.6.3 Package console project"),(0,i.kt)("p",null,"Execute the following instructions on the terminal command line to package the project and generate a compressed deployment installation package.\nCheck linkis-web/package.json, linkis-web/.env files, and check whether the version number of the front-end management console is correct."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ npm run build\n")),(0,i.kt)("p",null,"After the above command is successfully executed, the front-end management console installation package ",(0,i.kt)("inlineCode",{parentName:"p"},"apache-linkis-${version}-web-bin.tar.gz")," will be generated"),(0,i.kt)("h4",{id:"264-copy-console-installation-package"},"2.6.4 Copy console installation package"),(0,i.kt)("p",null,"After step 2.6.3 is executed, the front-end management console installation package has been generated, located at linkis-web/apache-linkis-1.0.3-web-bin.tar.gz"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ cp linkis-web/apache-linkis-1.0.3-web-bin.tar.gz dist/apache-linkis\n")),(0,i.kt)("h3",{id:"27-sign-the-source-packagebinary-packagesha512"},"2.7 Sign the source package/binary package/sha512"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ cd dist/apache-linkis\n\n$ for i in *.tar.gz; do echo $i; gpg --armor --output $i.asc --detach-sig $i; done # Calculate signature\n\n$ for i in *.tar.gz; do echo $i; sha512sum  $i > $i.sha512 ; done # Calculate SHA512\n")),(0,i.kt)("h3",{id:"28-check-whether-the-generated-signaturesha512-is-correct"},"2.8 Check whether the generated signature/sha512 is correct"),(0,i.kt)("p",null,"Verify that the signature is correct as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ cd dist/apache-linkis\n$ for i in *.tar.gz; do echo $i; gpg --verify $i.asc $i; done\n")),(0,i.kt)("p",null,"If something like the following appears, the signature is correct. Keyword: ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"Good signature"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'     apache-linkis-xxx-src.tar.gz\n     gpg: Signature made XXXX\n     gpg: using RSA key XXXXX\n     gpg: Good signature from "xxx @apache.org>"\n')),(0,i.kt)("p",null,"Verify that sha512 is correct as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ cd dist/apache-linkis\n$ for i in *.tar.gz; do echo $i; sha512sum --check $i.sha512; done\n\n")),(0,i.kt)("p",null,"The detailed verification process can be found in ",(0,i.kt)("a",{parentName:"p",href:"/community/how-to-verify"},"Verification Candidate Version")),(0,i.kt)("h2",{id:"3-publish-the-apache-svn-repository"},"3 Publish the apache svn repository"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The Linkis ",(0,i.kt)("a",{parentName:"li",href:"https://dist.apache.org/repos/dist/dev/linkis"},"DEV branch")," is used to store the source code and binary materials of the candidate version"),(0,i.kt)("li",{parentName:"ul"},"The RC version voted by the Linkis ",(0,i.kt)("a",{parentName:"li",href:"https://dist.apache.org/repos/dist/release/linkis"},"Release branch")," will eventually be moved to the release library")),(0,i.kt)("h3",{id:"31-check-out-the-linkis-release-directory"},"3.1 Check out the Linkis release directory"),(0,i.kt)("p",null,"Check out the Linkis distribution directory from the Apache SVN dev directory."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ svn co https://dist.apache.org/repos/dist/dev/linkis dist/linkis_svn_dev\n\n")),(0,i.kt)("h3",{id:"32-add-the-content-to-be-published-to-the-svn-directory"},"3.2 Add the content to be published to the svn directory"),(0,i.kt)("p",null,"Create a version number directory and name it in the way of ",(0,i.kt)("inlineCode",{parentName:"p"},"${release_version}-${RC_version}"),", RC_version starts from 1, that is, the candidate version starts from RC1. During the release process, there is a problem that causes the vote to be rejected, and it needs to be corrected and iterated. RC version, RC version number should be +1.\nFor example: 1.0.3-RC1 version is voted, if the vote is passed without any problems, the RC1 version material will be released as the final version material.\nIf there is a problem (when voting in the linkis/incubator community, voters will strictly check various release requirements and compliance issues) and need to be corrected. After the correction, the vote will be re-initiated. The candidate version for the next vote is 1.0.3- RC2."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ mkdir -p dist/linkis_svn_dev/1.0.3-RC1\n")),(0,i.kt)("p",null,"Add the source code package, binary package, and Linkis executable binary package to the SVN working directory."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ cp -f dist/apache-linkis/* dist/linkis_svn_dev/1.0.3-RC1\n\n")),(0,i.kt)("h3",{id:"33-submit-apache-svn"},"3.3 Submit apache svn"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'$ cd dist/linkis_svn_dev/\n\n# Check svn status\n$ svn status\n# Add to svn version\n$ svn add 1.0.3-RC1\n$ svn status\n# Submit to svn remote server\n$ svn commit -m "prepare for 1.0.3-RC1"\n\n')),(0,i.kt)("p",null,"If Chinese garbled characters appear in the svn command, you can try to set the encoding format (set the encoding format: export LANG=en_US.UTF-8)."),(0,i.kt)("h2",{id:"4-verify-release-candidates"},"4 Verify release candidates"),(0,i.kt)("p",null,"For details, please refer to ",(0,i.kt)("a",{parentName:"p",href:"/community/how-to-verify"},"How to Verify release")),(0,i.kt)("h2",{id:"5-initiates-a-vote"},"5 Initiates a vote"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Linkis is still in the incubation stage and needs to vote twice")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Please use your apache.org mailbox to send emails, and use ",(0,i.kt)("inlineCode",{parentName:"p"},"plain text mode"),", for details see ",(0,i.kt)("a",{parentName:"p",href:"#mail-switch-to-plain-text-format"},"Appendix-Mail Switching Plain Text Format"))),(0,i.kt)("admonition",{title:"Note",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"All links to checksums, signatures, and public keys must refer to the main Apache website ",(0,i.kt)("a",{parentName:"p",href:"https://downloads.apache.org/"},"https://downloads.apache.org/")," and should use https://(SSL). For example: ",(0,i.kt)("a",{parentName:"p",href:"https://downloads.apache.org/linkis/KEYS"},"https://downloads.apache.org/linkis/KEYS"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"To vote in the Linkis community, send an email to: ",(0,i.kt)("inlineCode",{parentName:"li"},"dev@linkis.apache.org"))),(0,i.kt)("h3",{id:"51-linkis-community-voting-stage"},"5.1 Linkis community voting stage"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"To vote in the Linkis community, send a voting email to ",(0,i.kt)("inlineCode",{parentName:"p"},"dev@linkis.apache.org"),". PMC members needs to check the correctness of the version according to the document, and then vote. After at least three ",(0,i.kt)("inlineCode",{parentName:"p"},"+1 PMC member")," votes have been counted, you can enter the next stage of voting.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Announce the results of the voting and send an email to the result of the voting to ",(0,i.kt)("inlineCode",{parentName:"p"},"dev@linkis.apache.org"),"."))),(0,i.kt)("h4",{id:"511-linkis-community-voting-template"},"5.1.1 Linkis community voting template"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"title:\n[VOTE] Release Apache Linkis ${release_version} ${rc_version}\n\ncontent:\n\nHello Linkis Community,\n\n    This is a call for vote to release Apache Linkis version ${release_version}-${rc_version}.\n\n    Release notes:\n        https://linkis.apache.org/download/release-notes-${release_version}\n\n    The release candidates:\n        https://dist.apache.org/repos/dist/dev/linkis/${release_version}-${rc_version}/\n    \n    Maven artifacts are available in a staging repository at:\n        https://repository.apache.org/content/repositories/orgapachelinkis-{staging-id}\n\n    Git branch for the release:\n        https://github.com/apache/linkis/tree/${release_version}-${rc_version}\n    \n    Keys to verify the Release Candidate:\n        https://downloads.apache.org/linkis/KEYS\n    \n    GPG user ID:\n    ${YOUR.GPG.USER.ID}\n    \n    The vote will be open for at least 72 hours or until necessary number of votes are reached.\n    \n    Please vote accordingly:\n    \n    [] +1 approve\n    [] +0 no opinion\n    [] -1 disapprove with the reason\n    \n    Checklist for reference:\n    \n    [] Download links are valid.\n    [] Checksums and PGP signatures are valid.\n    [] Source code distributions have correct names matching the current release.\n    [] LICENSE and NOTICE files are correct for each Linkis repo.\n    [] All files have license headers if necessary.\n    [] No unlicensed compiled archives bundled in source archive.\n\n    Steps to validate the release\uff0cPlease refer to:\n        https://linkis.apache.org/community/how-to-verify\n\nThanks,\n${Linkis Release Manager}\n")),(0,i.kt)("h4",{id:"512-announce-voting-result-template"},"5.1.2 Announce voting result template"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"title:\n[RESULT][VOTE] Release Apache Linkis ${release_version} ${rc_version}\n\ncontent:\nHello Apache Linkis PMC  and Community,\n\n    The vote closes now as 72hr have passed. The vote PASSES with\n\n    xx (+1 binding) votes from the PMC members,\n\n    - member one\n    - member two\n    - member three\n    ...\n\n    xx (+1 non-binding) votes from the rest of the developer community,\n    and no further 0 or -1 votes.\n\n    The vote thread: {vote_mail_address}\n\n    If this vote passes also, the release is accepted and will be published.\n\nThank you for your support.\n${Linkis Release Manager}\n")),(0,i.kt)("h3",{id:"52-others"},"5.2 Others"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Because there is a problem with the content of the voting email (not a material problem, such as a link problem")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"If it is discovered earlier, you can cancel the previous vote and vote again. If it has been done for a long time, the release manager can directly reply to the voting email."),(0,i.kt)("li",{parentName:"ul"},"RCX can remain unchanged, the source material will not be modified, and the title of the email can be added (Round2) to distinguish such as ",(0,i.kt)("inlineCode",{parentName:"li"},"[VOTE] Release Apache Linkis 1.3.0-RC2 (Round2)"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Mail thread problem")),(0,i.kt)("p",null,"All mailing archives can be found at ",(0,i.kt)("a",{parentName:"p",href:"https://lists.apache.org/list.html?dev@linkis.apache.org"},"dev@linkis.apache.org"),", a mailing thread, via the ","[ Permanent link to this email]","\nGet the accessible url address of the email"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/7869972/201943103-9add304d-ca25-4b78-8282-38424f73a28b.png",alt:"image"})),(0,i.kt)("p",null,'Some mailboxes 163/sina reply with the Chinese "reply" by default, which will cause the apache mail to be recognized as a new thread mail, and the configuration needs to be modified.'),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/7869972/201942374-5d9b7b93-5211-4c9b-be53-86c9b4ec7bfe.png",alt:"image"})),(0,i.kt)("h2",{id:"6-official-release"},"6 Official release"),(0,i.kt)("h3",{id:"61-migrating-source-and-binary-packages"},"6.1 Migrating source and binary packages"),(0,i.kt)("admonition",{title:"note",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"The path name of release cannot carry the rc identifier")),(0,i.kt)("p",null,"Move source and binary packages from svn's ",(0,i.kt)("inlineCode",{parentName:"p"},"dev")," directory to the ",(0,i.kt)("inlineCode",{parentName:"p"},"release")," directory"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'#Mobile source package and binary package\n$ svn mv https://dist.apache.org/repos/dist/dev/linkis/${release_version}-${rc_version} https://dist.apache.org/repos/dist/release/linkis/${release_version} -m "transfer packages for ${release_version}-${rc_version}" \n\n# The following operations decide whether to update the key of the release branch according to the actual situation\n# Clear the KEYS in the original release directory\n$ svn delete https://dist.apache.org/repos/dist/release/linkis/KEYS -m "delete KEYS"\n\n# Copy the dev directory KEYS to the release directory\n$ svn cp https://dist.apache.org/repos/dist/dev/linkis/KEYS https://dist.apache.org/repos/dist/release/linkis/ -m "transfer KEYS for ${release_version}-${rc_version}"\n')),(0,i.kt)("h3",{id:"62-confirm-whether-the-packages-under-dev-and-release-are-correct"},"6.2 Confirm whether the packages under dev and release are correct"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Confirm that ",(0,i.kt)("inlineCode",{parentName:"li"},"${release_version}-${rc_version}")," under ",(0,i.kt)("a",{parentName:"li",href:"https://dist.apache.org/repos/dist/dev/linkis/"},"dev")," has been removed"),(0,i.kt)("li",{parentName:"ul"},"Delete the release packages of the previous version in the ",(0,i.kt)("a",{parentName:"li",href:"https://dist.apache.org/repos/dist/release/linkis/"},"release")," directory, these packages will be automatically saved ",(0,i.kt)("a",{parentName:"li",href:"https://downloads.apache.org/linkis/"},"here"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'#Before deleting, please confirm that the previous version release package has been updated to https://downloads.apache.org/linkis/\n$ svn delete https://dist.apache.org/repos/dist/release/linkis/${last_release_version} -m "Delete ${last_release_version}"\n')),(0,i.kt)("h3",{id:"63-release-version-in-apache-staging-repository"},"6.3 Release version in apache staging repository"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Log in to ",(0,i.kt)("a",{parentName:"li",href:"http://repository.apache.org"},"http://repository.apache.org")," , log in with your Apache account"),(0,i.kt)("li",{parentName:"ul"},"Click on Staging repositories on the left,"),(0,i.kt)("li",{parentName:"ul"},"Search for Linkis keywords, select your recently uploaded repository, and the repository specified in the voting email"),(0,i.kt)("li",{parentName:"ul"},"Click the ",(0,i.kt)("inlineCode",{parentName:"li"},"Release")," button above, this process will perform a series of checks")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"It usually takes 24 hours to wait for the repository to synchronize to other data sources")),(0,i.kt)("h3",{id:"64-new-version-document-release-and-download-page-update"},"6.4 New version document release and download page update"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Document release")),(0,i.kt)("p",null,"Create a new version, create a release version based on the current version"),(0,i.kt)("h3",{id:"step1-archive-publish_version-version-document"},"step1 archive ${publish_version} version document"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"npm install\nnpm run docusaurus docs:version ${publish_version}\n")),(0,i.kt)("h3",{id:"step2-copy-the-new-chinese-version-document"},"step2 Copy the new Chinese version document"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"cd i18n/zh-CN/docusaurus-plugin-content-docs\ncp -r current version-${publish_version}\ncp -r current.json version-${publish_version}.json\n")),(0,i.kt)("h3",{id:"step3-modify-versionlabel"},"step3 modify version.label"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'# The current.json file is modified as follows\n"message": "Next(${publish_version})" --\x3e "message": "Next(${next_version})"\n\n# version-${publish_version}.json file is modified as follows\n"message": "Next(${publish_version})", --\x3e "message": "${publish_version}"\n')),(0,i.kt)("h3",{id:"modify-configuration-docusaurusconfigjs"},"Modify configuration docusaurus.config.js"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"}," versions: {\n        current: {\n          path: '1.2.0',\n          label: 'Next(1.2.0)'\n        },\n        '1.1.1': {\n          path: 'latest',\n        },\n      }\n->\n  versions: {\n         current: {\n           path: '1.1.3',\n           label: 'Next(1.1.3)'\n         },\n         '1.2.0': {\n           path: 'latest',\n         },\n       }\n\n items: [\n        //Increase\n        {label: '${publish_version}', to: '/docs/latest/about/introduction'},\n        //Revise\n        {label: '${current_version}', to: '/docs/latest/about/introduction'},\n        --\x3e\n        {label: '${current_version}', to: '/docs/${current_version}/about/introduction'},\n        //Revise\n        {label: 'Next(${publish_version})', to: '/docs/${publish_version}/about/introduction'},\n        --\x3e\n        {label: 'Next(${next_version})', to: '/docs/${next_version}/about/introduction'},\n        //Revise\n        existingPath.replace('/latest', '/${current_version}')\n        --\x3e\n        existingPath.replace('/latest', '/${publish_version}')\n]\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Update download page")),(0,i.kt)("font",{color:"red"},"Chinese and English documents must be updated"),(0,i.kt)("p",null,"Linkis official website download address should point to the official address of apache"),(0,i.kt)("p",null,"After waiting and confirming that the new release version is synchronized to the Apache mirror (",(0,i.kt)("a",{parentName:"p",href:"https://downloads.apache.org/linkis/"},"https://downloads.apache.org/linkis/"),"), update the following page:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://linkis.apache.org/zh-CN/download/main"},"https://linkis.apache.org/zh-CN/download/main")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://linkis.apache.org/download/main"},"https://linkis.apache.org/download/main")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://linkis.apache.org/zh-CN/download/release-notes-xxx"},"https://linkis.apache.org/zh-CN/download/release-notes-xxx")," (remove rc)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://linkis.apache.org/download/release-notes-1.3.0"},"https://linkis.apache.org/download/release-notes-1.3.0")," (remove rc)")),(0,i.kt)("h3",{id:"65-github-version-released"},"6.5 GitHub version released"),(0,i.kt)("admonition",{title:"Caution",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Once the git tag is created, it cannot be deleted (the branch can be deleted), so make sure that the previous steps are all right before creating the tag.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"step1 Create a new github release")),(0,i.kt)("p",null,"Go to the creation page ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/linkis/releases/new"},"https://github.com/apache/linkis/releases/new"),"\nCreate a tag named ",(0,i.kt)("inlineCode",{parentName:"p"},"1.1.2")," based on the previous ",(0,i.kt)("inlineCode",{parentName:"p"},"release-1.1.2-rc1")," branch,\nFill in the title ",(0,i.kt)("inlineCode",{parentName:"p"},"Apache Linkis Release-1.1.2"),", write the release notes ",(0,i.kt)("inlineCode",{parentName:"p"},"https://linkis.apache.org/download/release-notes-1.1.2")," link of this version"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},"Release-1.1.2\nRelease Notes: https://linkis.apache.org/download/release-notes-1.1.2\n\n")),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/7869972/210697538-2568c05f-20a5-4487-94f9-9e053116ba0e.png",alt:"image"})),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"step2 check")),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/7869972/172566107-12475a5b-2fba-4dbe-9e96-f4a7a67aa4a9.png",alt:"image"})),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"step3 Merge ",(0,i.kt)("inlineCode",{parentName:"strong"},"${release_version}-RC")," branch to ",(0,i.kt)("inlineCode",{parentName:"strong"},"master")," branch (if not merged)")),(0,i.kt)("h2",{id:"7-email-notification-version-is-released"},"7 Email notification version is released"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Please make sure that the Apache Staging repository has been published successfully, usually mail is published 24 hours after this step")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Note:")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Before sending the ANNOUNCE email. Publishers need to subscribe to ",(0,i.kt)("a",{parentName:"p",href:"mailto:announce-subscribe@apache.org."},"announce-subscribe@apache.org."),"  See ",(0,i.kt)("a",{parentName:"p",href:"/community/how-to-subscribe"},"How to Subscribe to Mailing Lists"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"You need to wait for some time (about one or two days) after the ANNOUNCE email is sent to the ",(0,i.kt)("a",{parentName:"p",href:"https://lists.apache.org/list.html?announce@apache.org"},"Apache ANNOUNCE mailing list")))),(0,i.kt)("p",null,"Send email to ",(0,i.kt)("inlineCode",{parentName:"p"},"dev@linkis.apache.org"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"announce@apache.org")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"title:\n[ANNOUNCE] Apache Linkis ${release_version} available\n\ncontent:\n\nHi all,\n\nApache Linkis  Team is glad to announce the new release of Apache Linkis ${release_version}.\n\nApache Linkis builds a computation middleware layer to decouple the upper applications and the underlying data engines, provides standardized interfaces (REST, JDBC, WebSocket etc.) to easily connect to various underlying engines (Spark, Presto, Flink, etc.), while enables cross engine context sharing, unified job& engine governance and orchestration.\n\nDownload Links: https://linkis.apache.org/download/main/\n\nRelease Notes: https://linkis.apache.org/download/release-${release_version}/\n\nWebsite: https://linkis.apache.org/\n\nLinkis Resources:\n- Issue: https://github.com/apache/linkis/issues\n- Mailing list: dev@linkis.apache.org\n\n- Apache Linkis Team\n\n")),(0,i.kt)("h2",{id:"8-update-release-information"},"8 Update release information"),(0,i.kt)("p",null,"The Apache Community Health Indicator counts the most recently available releases. Manual updates are currently required after new versions are released."),(0,i.kt)("p",null,"update address: ",(0,i.kt)("a",{parentName:"p",href:"https://reporter.apache.org/addrelease.html?linkis"},"https://reporter.apache.org/addrelease.html?linkis")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(30222).Z,width:"1067",height:"666"})),(0,i.kt)("h2",{id:"appendix"},"Appendix"),(0,i.kt)("h3",{id:"appendix-one-releasesh"},"Appendix one release.sh"),(0,i.kt)("p",null,"Step 2.4-3.3 execute the command, which can be combined in the release.sh script"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell",metastring:"script",script:!0},'#!/bin/bash\n#\n# Licensed to the Apache Software Foundation (ASF) under one or more\n# contributor license agreements. See the NOTICE file distributed with\n# this work for additional information regarding copyright ownership.\n# The ASF licenses this file to You under the Apache License, Version 2.0\n# (the "License"); you may not use this file except in compliance with\n# the License. You may obtain a copy of the License at\n# http://www.apache.org/licenses/LICENSE-2.0\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an "AS IS" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n# tar source code\nrelease_version=1.0.3\n#The RC version carried out this time Format RCX\nrc_version=RC1\n#Corresponding git repository branch\ngit_branch=release-1.0.3-rc1\n\nworkDir=$(cd "$(dirname "$0")"; pwd)\ncd ${workDir}; echo "enter work dir:$(pwd)"\n\nrm -rf dist\n\nmkdir -p dist/apache-linkis\n\n#step1 Packaging source files\ngit archive --format=tar.gz --output="dist/apache-linkis/apache-linkis-$release_version-src.tar.gz"  --prefix=apache-linkis-$release_version-src/   $git_branch\necho  "git archive --format=tar.gz --output=\'dist/apache-linkis/apache-linkis-$release_version-src.tar.gz\' --prefix=apache-linkis-$release_version-src/   $git_branch"\n\n#step2 Copy the binary package\ncp linkis-dist/target/apache-linkis-$release_version-bin.tar.gz dist/apache-linkis\n\n#step3 Package the web (if you need to publish the front end)\n\ncd linkis-web\n#Installation dependencies\nnpm install\nnpm run build\ncp apache-linkis-*-web-bin.tar.gz ../dist/apache-linkis\n\n#step4 Signature\n\n### Sign source/binary packages/sha512\ncd ../dist/apache-linkis\nfor i in *.tar.gz; do echo $i; gpg --armor --output $i.asc --detach-sig $i ; done # Calculate signature\nfor i in *.tar.gz; do echo $i; sha512sum $i > $i.sha512 ; done # Calculate SHA512\n\n### Check if the generated signature/sha512 is correct\nfor i in *.tar.gz; do echo $i; gpg --verify $i.asc $i ; done\nfor i in *.tar.gz; do echo $i; sha512sum --check $i.sha512; done\n\n\n#step5 Upload to svn\n\ncd ../\nrm -rf linkis-svn-dev\nsvn co https://dist.apache.org/repos/dist/dev/linkis linkis-svn-dev\n\n\nmkdir -p linkis-svn-dev/${release_version}-${rc_version}\ncp apache-linkis/*tar.gz* linkis-svn-dev/${release_version}-${rc_version}\ncd linkis-svn-dev\n\n# Check svn status\nsvn status\n# Add to svn version\nsvn add ${release_version}-${rc_version}\nsvn status\n# Submit to svn remote server\nsvn commit -m "prepare for ${release_version} ${rc_version}"\n\n')),(0,i.kt)("h3",{id:"mail-switch-to-plain-text-format"},"Mail switch to plain text format"),(0,i.kt)("p",null,"Do not send plain HTML messages; instead, send plain text (content-type: text/plain). Sending HTML reduces the number of people reading your email and is often rejected by the apache.org inbound spam filter. If your message is bounced and the error message says that the spam hit includes HTML_MESSAGE, please resend the message in plain text.\nFor more information, please refer to the official ",(0,i.kt)("a",{parentName:"p",href:"https://infra.apache.org/contrib-email-tips"},"Email Specification")," ",(0,i.kt)("a",{parentName:"p",href:"https://infra.apache.org/contrib-email-tips"},"https://infra.apache.org/contrib-email-tips")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," Gmail mailbox switch to plain text format ")),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/7869972/152912490-a5038505-e487-4451-be9a-e26021877e4f.png",alt:"image"})),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," QQ mailbox switch to plain text format ")),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/11496700/149449779-d0116bb1-de9e-4cc4-98fb-af3327b15c09.png",alt:"image"})))}d.isMDXComponent=!0},30222:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/update-release-3a146eaf993a9911cf353714383e8dbc.png"}}]);