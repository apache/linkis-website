"use strict";(self.webpackChunklinkis_web_apache=self.webpackChunklinkis_web_apache||[]).push([[9597],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>b});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=c(n),m=i,b=u["".concat(l,".").concat(m)]||u[m]||d[m]||s;return n?a.createElement(b,r(r({ref:t},p),{},{components:n})):a.createElement(b,r({ref:t},p))}));function b(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=n.length,r=new Array(s);r[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:i,r[1]=o;for(var c=2;c<s;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},48594:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var a=n(87462),i=(n(67294),n(3905));const s={title:"Linkis 1.3.2 Integration with OceanBase",sidebar_position:3},r=void 0,o={permalink:"/blog/2023/03/08/linkis-integration-with-oceanbase",editUrl:"https://github.com/apache/linkis-website/edit/dev/blog/2023-03-08-linkis-integration-with-oceanbase/index.md",source:"@site/blog/2023-03-08-linkis-integration-with-oceanbase/index.md",title:"Linkis 1.3.2 Integration with OceanBase",description:"This article mainly introduces the integration of OceanBase database in Linkis 1.3.2 version. OceanBase database is compatible with most functions and syntax of MySQL 5.7/8.0. Therefore, the OceanBase database can be used as MySQL.",date:"2023-03-08T00:00:00.000Z",formattedDate:"March 8, 2023",tags:[],readingTime:1.54,hasTruncateMarker:!1,authors:[],frontMatter:{title:"Linkis 1.3.2 Integration with OceanBase",sidebar_position:3},nextItem:{title:"Engine Material Management",permalink:"/blog/2022/12/02/material-manage"}},l={authorsImageUrls:[]},c=[{value:"1. Preparations",id:"1-preparations",level:2},{value:"1.1 Environment installation",id:"11-environment-installation",level:3},{value:"1.2 Environment Verification",id:"12-environment-verification",level:3},{value:"2. Linkis submits OceanBase database tasks",id:"2-linkis-submits-oceanbase-database-tasks",level:2},{value:"2.1 Submit tasks through the shell",id:"21-submit-tasks-through-the-shell",level:3},{value:"2.2 Submit tasks through Linkis SDK",id:"22-submit-tasks-through-linkis-sdk",level:3},{value:"2.3 Multi-data source support",id:"23-multi-data-source-support",level:3}],p={toc:c},u="wrapper";function d(e){let{components:t,...s}=e;return(0,i.kt)(u,(0,a.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This article mainly introduces the integration of OceanBase database in ",(0,i.kt)("inlineCode",{parentName:"p"},"Linkis")," 1.3.2 version. OceanBase database is compatible with most functions and syntax of MySQL 5.7/8.0. Therefore, the OceanBase database can be used as MySQL."),(0,i.kt)("h2",{id:"1-preparations"},"1. Preparations"),(0,i.kt)("h3",{id:"11-environment-installation"},"1.1 Environment installation"),(0,i.kt)("p",null,"Install and deploy the OceanBase database, see ",(0,i.kt)("a",{parentName:"p",href:"https://en.oceanbase.com/docs/community-observer-en-10000000000829647"},"Quick experience")),(0,i.kt)("h3",{id:"12-environment-verification"},"1.2 Environment Verification"),(0,i.kt)("p",null,"You can use the MySQL command to verify the installation of the OceanBase database."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"mysql -h${ip} -P${port} -u${username} -p${password} -D${db_name}\n")),(0,i.kt)("p",null,"The connection is successful as shown in the figure below:\n",(0,i.kt)("img",{src:n(44031).Z,width:"1092",height:"202"})),(0,i.kt)("h2",{id:"2-linkis-submits-oceanbase-database-tasks"},"2. Linkis submits OceanBase database tasks"),(0,i.kt)("h3",{id:"21-submit-tasks-through-the-shell"},"2.1 Submit tasks through the shell"),(0,i.kt)("p",null,"shell"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},' sh ./bin/linkis-cli -engineType jdbc-4 -codeType jdbc -code "show tables" -submitUser hadoop -proxyUser hadoop -runtimeMap wds.linkis.jdbc.connect.url=jdbc:mysql://${ip} :${port}/${db_name} -runtimeMap wds.linkis.jdbc.driver=com.mysql.jdbc.Driver -runtimeMap wds.linkis.jdbc.username=${username} -runtimeMap wds.linkis.jdbc.password =${password} \n')),(0,i.kt)("h3",{id:"22-submit-tasks-through-linkis-sdk"},"2.2 Submit tasks through Linkis SDK"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Linkis")," provides ",(0,i.kt)("inlineCode",{parentName:"p"},"SDK")," of ",(0,i.kt)("inlineCode",{parentName:"p"},"Java")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Scala")," to submit tasks to ",(0,i.kt)("inlineCode",{parentName:"p"},"Linkis")," server. For details, please refer to ",(0,i.kt)("a",{parentName:"p",href:"/docs/latest/user-guide/sdk-manual"},"JAVA SDK Manual"),". For ",(0,i.kt)("inlineCode",{parentName:"p"},"OceanBase")," tasks, you only need to modify ",(0,i.kt)("inlineCode",{parentName:"p"},"EngineConnType")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"CodeType")," parameters in ",(0,i.kt)("inlineCode",{parentName:"p"},"Demo"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Map<String, Object> labels = new HashMap<String, Object>(); \nlabels.put (LabelKeyConstant.ENGINE_TYPE_KEY, "jdbc-4"); // required engineType Label\nlabels.put(LabelKeyConstant.USER_CREATOR_TYPE_KEY, "hadoop-IDE");// required execute user and creator \nlabels.put(LabelKeyConstant.CODE_TYPE_KEY, "jdbc"); // required codeType \n')),(0,i.kt)("h3",{id:"23-multi-data-source-support"},"2.3 Multi-data source support"),(0,i.kt)("p",null,"Address: Login Management Platform --\x3e Data Source Management"),(0,i.kt)("p",null,"Step 1: Create a new data source"),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(28606).Z,width:"1895",height:"570"})),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(40517).Z,width:"800",height:"788"})),(0,i.kt)("p",null,"Step 2: Connection test"),(0,i.kt)("p",null,"Click Test Connect button to test\n",(0,i.kt)("img",{src:n(98099).Z,width:"1689",height:"355"})),(0,i.kt)("p",null,"Step 3: Publish data source"),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(77508).Z,width:"1661",height:"236"})),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(25433).Z,width:"792",height:"220"})),(0,i.kt)("p",null,"Step 4: Submit the OceanBase task by specifying the data source name"),(0,i.kt)("p",null,"Request URL: ",(0,i.kt)("inlineCode",{parentName:"p"},"http://${gateway_url}:${port}/api/rest_j/v1/entrance/submit")," Request"),(0,i.kt)("p",null,"method: POST"),(0,i.kt)("p",null,"Request parameter:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "executionContent": {\n        "code": "show databases",\n        "runType": "jdbc"\n    },\n    "params": {\n        "variable": {},\n        "configuration": {\n            "startup": {},\n            "runtime": {\n                "wds.linkis.engine.runtime.datasource": "ob-test"\n            }\n        }\n    },\n    "labels": {\n        "engineType": "jdbc-4"\n    }\n}\n')),(0,i.kt)("p",null,"Response\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "method": "/api/entrance/submit",\n  "status": 0,\n  "message": "OK",\n  "data": {\n    "taskID": 93,\n    "execID": "exec_id018017linkis-cg-entrance000830fb1364:9104IDE_hadoop_jdbc_0"\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(74659).Z,width:"1881",height:"449"})))}d.isMDXComponent=!0},28606:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/ds-manage-en-4553078ddd8283ec8c3bf10acc693b63.png"},40517:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/new-en-0d0f086445007fb10aa4a2dba292d41b.png"},44031:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/ob-conn-ad13249d704982c7e8d9ffa0c47ce50a.png"},98099:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/ob-test-en-38b41fbc94deb1fa6f66f41eb5f5fc57.png"},77508:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/publish-1-en-1eca28f80ec46376adc445554473df33.png"},25433:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/publish-2-en-37d03ef777c5fcc02986963c9ba97f4b.png"},74659:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/show-status-en-845ef09ab1a2735ec00519663edc94f0.png"}}]);