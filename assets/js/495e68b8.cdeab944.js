"use strict";(self.webpackChunklinkis_web_apache=self.webpackChunklinkis_web_apache||[]).push([[10984],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>k});var a=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var o=a.createContext({}),u=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=u(e.components);return a.createElement(o.Provider,{value:n},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(t),g=i,k=d["".concat(o,".").concat(g)]||d[g]||c[g]||r;return t?a.createElement(k,l(l({ref:n},p),{},{components:t})):a.createElement(k,l({ref:n},p))}));function k(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,l=new Array(r);l[0]=g;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s[d]="string"==typeof e?e:i,l[1]=s;for(var u=2;u<r;u++)l[u]=t[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},46898:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>u});var a=t(87462),i=(t(67294),t(3905));const r={title:"HBase Engine",sidebar_position:15},l="HBase engine usage documentation",s={unversionedId:"engine-usage/hbase",id:"engine-usage/hbase",title:"HBase Engine",description:"This article mainly introduces the installation, use and configuration of the hbase engine plugin in Linkis.",source:"@site/docs/engine-usage/hbase.md",sourceDirName:"engine-usage",slug:"/engine-usage/hbase",permalink:"/docs/1.5.0/engine-usage/hbase",draft:!1,editUrl:"https://github.com/apache/linkis-website/edit/dev/docs/engine-usage/hbase.md",tags:[],version:"current",sidebarPosition:15,frontMatter:{title:"HBase Engine",sidebar_position:15},sidebar:"tutorialSidebar",previous:{title:"Seatunnel Engine",permalink:"/docs/1.5.0/engine-usage/seatunnel"},next:{title:"Repl Engine",permalink:"/docs/1.5.0/engine-usage/repl"}},o={},u=[{value:"1. Preliminary work",id:"1-preliminary-work",level:2},{value:"1.1 Engine Verification",id:"11-engine-verification",level:3},{value:"2. Engine plugin installation",id:"2-engine-plugin-installation",level:2},{value:"2.1 Engine plugin preparation non-default engine",id:"21-engine-plugin-preparation-non-default-engine",level:3},{value:"2.2 Upload and load engine plugins",id:"22-upload-and-load-engine-plugins",level:3},{value:"2.3 Engine refresh",id:"23-engine-refresh",level:3},{value:"2.3.1 Restart and refresh",id:"231-restart-and-refresh",level:4},{value:"2.3.2 Check if the engine is refreshed successfully",id:"232-check-if-the-engine-is-refreshed-successfully",level:3},{value:"3. Use of HBase engine",id:"3-use-of-hbase-engine",level:2},{value:"3.1 Submit tasks through <code>Linkis-cli</code>",id:"31-submit-tasks-through-linkis-cli",level:3}],p={toc:u},d="wrapper";function c(e){let{components:n,...t}=e;return(0,i.kt)(d,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"hbase-engine-usage-documentation"},"HBase engine usage documentation"),(0,i.kt)("p",null,"This article mainly introduces the installation, use and configuration of the ",(0,i.kt)("inlineCode",{parentName:"p"},"hbase")," engine plugin in ",(0,i.kt)("inlineCode",{parentName:"p"},"Linkis"),"."),(0,i.kt)("h2",{id:"1-preliminary-work"},"1. Preliminary work"),(0,i.kt)("h3",{id:"11-engine-verification"},"1.1 Engine Verification"),(0,i.kt)("p",null,"It is strongly recommended that you check these environment variables for the executing user before executing ",(0,i.kt)("inlineCode",{parentName:"p"},"hbase")," tasks. The specific way is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"sudo su - ${username}\necho ${JAVA_HOME}\n")),(0,i.kt)("h2",{id:"2-engine-plugin-installation"},"2. Engine plugin installation"),(0,i.kt)("h3",{id:"21-engine-plugin-preparation-non-default-engine"},"2.1 Engine plugin preparation ",(0,i.kt)("a",{parentName:"h3",href:"/docs/1.5.0/engine-usage/overview"},"non-default engine")),(0,i.kt)("p",null,"Method 2: Compile the engine plug-in separately (requires a ",(0,i.kt)("inlineCode",{parentName:"p"},"maven")," environment)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"# compile\ncd ${linkis_code_dir}/linkis-engineconn-plugins/hbase/\nmvn clean install -DskipTests -Dhbase.profile=1.2|1.4|2.2|2.5\n\n# hbase.profile 1.2|1.4|2.2|2.5, The corresponding HBase version is: 1.2.0, 1.4.3, 2.2.6, 2.5.3\n# default hbase.profile=2.5, Compile plug-ins for different HBase versions on demand\n# The compiled engine plug-in package is located in the following directory\n${linkis_code_dir}/linkis-engineconn-plugins/hbase/target/out/\n")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/docs/1.5.0/deployment/install-engineconn"},"EngineConnPlugin engine plugin installation")),(0,i.kt)("h3",{id:"22-upload-and-load-engine-plugins"},"2.2 Upload and load engine plugins"),(0,i.kt)("p",null,"Upload the engine plug-in package in 2.1 to the engine directory of the server"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"${LINKIS_HOME}/lib/linkis-engineplugins\n")),(0,i.kt)("p",null,"The directory structure after uploading is as follows"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"linkis-engineconn-plugins/\n\u251c\u2500\u2500 hbase\n\u2502\xa0\xa0 \u251c\u2500\u2500 dist\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 2.5.3\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u251c\u2500\u2500 conf\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u2514\u2500\u2500 lib\n\u2502\xa0\xa0 \u2514\u2500\u2500 plugin\n\u2502\xa0\xa0     \u2514\u2500\u2500 2.5.3\n")),(0,i.kt)("h3",{id:"23-engine-refresh"},"2.3 Engine refresh"),(0,i.kt)("h4",{id:"231-restart-and-refresh"},"2.3.1 Restart and refresh"),(0,i.kt)("p",null,"Refresh the engine by restarting the ",(0,i.kt)("inlineCode",{parentName:"p"},"linkis-cg-linkismanager")," service"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cd ${LINKIS_HOME}/sbin\nsh linkis-daemon.sh restart cg-linkismanager\n")),(0,i.kt)("h3",{id:"232-check-if-the-engine-is-refreshed-successfully"},"2.3.2 Check if the engine is refreshed successfully"),(0,i.kt)("p",null,"You can check whether the ",(0,i.kt)("inlineCode",{parentName:"p"},"last_update_time")," of this table in the ",(0,i.kt)("inlineCode",{parentName:"p"},"linkis_engine_conn_plugin_bml_resources")," in the database is the time when the refresh is triggered."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"#Login to the linkis database\nselect * from linkis_cg_engine_conn_plugin_bml_resources;\n")),(0,i.kt)("h2",{id:"3-use-of-hbase-engine"},"3. Use of HBase engine"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"HBase")," engine of ",(0,i.kt)("inlineCode",{parentName:"p"},"Linkis")," runs a Jruby environment in the background to execute instructions in hbase-shell,\nand is fully compatible with hbase-shell instructions."),(0,i.kt)("h3",{id:"31-submit-tasks-through-linkis-cli"},"3.1 Submit tasks through ",(0,i.kt)("inlineCode",{parentName:"h3"},"Linkis-cli")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},' sh bin/linkis-cli -engineType hbase-2.5.3 -code "list" \\\n  -codeType shell -runtimeMap linkis.hbase.zookeeper.quorum=zk1,zk2,zk3\n')),(0,i.kt)("p",null,"More ",(0,i.kt)("inlineCode",{parentName:"p"},"Linkis-Cli")," command parameter reference: ",(0,i.kt)("a",{parentName:"p",href:"/docs/1.5.0/user-guide/linkiscli-manual"},(0,i.kt)("inlineCode",{parentName:"a"},"Linkis-Cli")," usage")),(0,i.kt)("p",null,"HBase engine supports connection parameters:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Configuration name"),(0,i.kt)("th",{parentName:"tr",align:null},"Remarks and default value"),(0,i.kt)("th",{parentName:"tr",align:null},"Is it necessary"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"linkis.hbase.zookeeper.quorum"),(0,i.kt)("td",{parentName:"tr",align:null},"ZooKeeper address for connecting to HBase, e.g. zk1,zk2,zk3, default value: localhost"),(0,i.kt)("td",{parentName:"tr",align:null},"Required")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"linkis.hbase.zookeeper.property.clientPort"),(0,i.kt)("td",{parentName:"tr",align:null},"ZooKeeper port for connecting to HBase, default value: 2181"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional, usually the default value")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"linkis.zookeeper.znode.parent"),(0,i.kt)("td",{parentName:"tr",align:null},"ZooKeeper znode path for connecting to HBase, default value: /hbase"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional, usually the default value")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"linkis.hbase.rootdir"),(0,i.kt)("td",{parentName:"tr",align:null},"HDFS root directory for the HBase cluster, default value: /hbase"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional, usually the default value")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"linkis.hbase.security.authentication"),(0,i.kt)("td",{parentName:"tr",align:null},"Authentication method for connecting to the HBase cluster: simple or kerberos, default value: simple"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional, depending on the cluster configuration")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"linkis.hbase.kerberos.principal"),(0,i.kt)("td",{parentName:"tr",align:null},"HBase Kerberos authentication principal, e.g. ",(0,i.kt)("a",{parentName:"td",href:"mailto:hbase@HADOOP.LINKIS.COM"},"hbase@HADOOP.LINKIS.COM")),(0,i.kt)("td",{parentName:"tr",align:null},"Required for Kerberos authentication")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"linkis.hbase.keytab.file"),(0,i.kt)("td",{parentName:"tr",align:null},"Path to the keytab file required for HBase Kerberos authentication, e.g. /tmp/hbase.keytab"),(0,i.kt)("td",{parentName:"tr",align:null},"Required for Kerberos authentication")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"linkis.hbase.kerberos.proxy.user"),(0,i.kt)("td",{parentName:"tr",align:null},"Kerberos proxy user, ensure that the Kerberos authenticated user has the privilege to proxy as a regular user"),(0,i.kt)("td",{parentName:"tr",align:null},"Optional, can be omitted")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"linkis.hbase.regionserver.kerberos.principal"),(0,i.kt)("td",{parentName:"tr",align:null},"HBase RegionServer's Kerberos authentication principal, e.g. hbase/",(0,i.kt)("a",{parentName:"td",href:"mailto:_HOST@HADOOP.LINKIS.COM"},"_HOST@HADOOP.LINKIS.COM")," (obtain from the cluster configuration file)"),(0,i.kt)("td",{parentName:"tr",align:null},"Required for Kerberos authentication")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"linkis.hbase.master.kerberos.principal"),(0,i.kt)("td",{parentName:"tr",align:null},"HBase Master's Kerberos authentication principal, e.g. hbase/",(0,i.kt)("a",{parentName:"td",href:"mailto:_HOST@HADOOP.LINKIS.COM"},"_HOST@HADOOP.LINKIS.COM")," (obtain from the cluster configuration file)"),(0,i.kt)("td",{parentName:"tr",align:null},"Required for Kerberos authentication")))))}c.isMDXComponent=!0}}]);