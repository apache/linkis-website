<!doctype html>
<html class="docs-version-1.3.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Linkis Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Linkis Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Apache Linkis" href="/opensearch.xml"><title data-react-helmet="true">Custom Variable Design | Apache Linkis</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://linkis.incubator.apache.org/docs/latest/architecture/commons/variable"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="1.3.0"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-1.3.0"><meta data-react-helmet="true" property="og:title" content="Custom Variable Design | Apache Linkis"><meta data-react-helmet="true" name="description" content="1. General"><meta data-react-helmet="true" property="og:description" content="1. General"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://linkis.incubator.apache.org/docs/latest/architecture/commons/variable"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/docs/latest/architecture/commons/variable" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/zh-CN/docs/latest/architecture/commons/variable" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/docs/latest/architecture/commons/variable" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://AE29KQB3IA-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.43be7c54.css">
<link rel="preload" href="/assets/js/runtime~main.8ce9165d.js" as="script">
<link rel="preload" href="/assets/js/main.ffdafd4c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Apache Linkis Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.png" alt="Apache Linkis Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache Linkis(Incubating)</b></a><a class="navbar__item navbar__link" href="/download/main">Download</a><a class="navbar__item navbar__link" href="/community/how-to-subscribe">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/team">Team</a><a class="navbar__item navbar__link" href="/user">Users</a><a class="navbar__item navbar__link" href="/faq/main">FAQ</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/policies/privacy.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Doc</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/latest/introduction">1.3.0</a></li><li><a class="dropdown__link" href="/docs/1.2.0/introduction">1.2.0</a></li><li><a class="dropdown__link" href="/docs/1.1.3/introduction">1.1.3</a></li><li><a class="dropdown__link" href="/docs/1.1.2/introduction">1.1.2</a></li><li><a class="dropdown__link" href="/docs/1.1.1/introduction">1.1.1</a></li><li><a class="dropdown__link" href="/docs/1.1.0/introduction">1.1.0</a></li><li><a class="dropdown__link" href="/docs/1.0.3/introduction">1.0.3</a></li><li><a class="dropdown__link" href="/docs/1.0.2/introduction">1.0.2</a></li><li><a class="dropdown__link" href="/docs/0.11.0/introduction">0.11.0</a></li><li><a class="dropdown__link" href="/docs/1.3.1/introduction">Next(1.3.1)</a></li><li><a class="dropdown__link" href="/versions">All Version</a></li></ul></div><a href="https://github.com/apache/incubator-linkis" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg t="1631348384596" class="iconLanguage_EbrZ" viewBox="0 0 1024 1024" version="1.1" p-id="557" width="20" height="20"><path d="M547.797333 638.208l-104.405333-103.168 1.237333-1.28a720.170667 720.170667 0 0 0 152.490667-268.373333h120.448V183.082667h-287.744V100.906667H347.605333v82.218666H59.818667V265.386667h459.178666a648.234667 648.234667 0 0 1-130.304 219.946666 643.242667 643.242667 0 0 1-94.976-137.728H211.541333a722.048 722.048 0 0 0 122.453334 187.434667l-209.194667 206.378667 58.368 58.368 205.525333-205.525334 127.872 127.829334 31.232-83.84m231.424-208.426667h-82.218666l-184.96 493.312h82.218666l46.037334-123.306667h195.242666l46.464 123.306667h82.218667l-185.002667-493.312m-107.690666 287.744l66.56-178.005333 66.602666 178.005333z" fill="currentColor" p-id="558"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/latest/architecture/commons/variable" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh-CN/docs/latest/architecture/commons/variable" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">简体中文</a></li></ul></div><div class="searchBox_Bc3W"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/latest/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/latest/release">Version Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Engine Usage</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Table Structure</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Architecture</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/latest/architecture/overview">Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/latest/architecture/difference-between-1.0-and-0.x">Difference Between 1.0 &amp; 0.x</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Commons</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/latest/architecture/commons/variable">Custom Variable Design</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/latest/architecture/commons/rpc">RPC Module</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Computation Governance Services</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Public Enhancement Services</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Microservice Governance Services</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Upgrade Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tuning And Troubleshooting</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 1.3.0</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Custom Variable Design</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="1-general"></a>1. General<a class="hash-link" href="#1-general" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="requirements-background"></a>Requirements Background<a class="hash-link" href="#requirements-background" title="Direct link to heading">#</a></h3><p>     Users want to be able to define some common variables when writing code and then replace them during execution. For example, users run the same sql in batches every day, and need to specify the partition time of the previous day. If based on sql It will be more complicated to write if the system provides a variable of run_date which will be very convenient to use.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="target"></a>Target<a class="hash-link" href="#target" title="Direct link to heading">#</a></h3><ol><li>Support variable substitution of task code</li><li>Support custom variables, support users to define custom variables in scripts and task parameters submitted to Linkis, support simple +, - and other calculations</li><li>Preset system variables: run_date, run_month, run_today and other system variables</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="2-overall-design"></a>2. Overall Design<a class="hash-link" href="#2-overall-design" title="Direct link to heading">#</a></h2><p>     During the execution of the Linkis task, the custom variables are carried out in Entrance, mainly through the interceptor of Entrance before the task is submitted and executed. The variable and the defined variable, and complete the code replacement through the initial value of the custom variable passed in by the task, and become the final executable code.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="21-technical-architecture"></a>2.1 Technical Architecture<a class="hash-link" href="#21-technical-architecture" title="Direct link to heading">#</a></h3><p>     The overall structure of custom variables is as follows. After the task is submitted, it will go through the variable replacement interceptor. First, all variables and expressions used in the code will be parsed, and then replaced with the system and user-defined initial values ​​of variables, and finally the parsed code will be submitted to EngineConn for execution. So the underlying engine is already replaced code.</p><p><img alt="var_arc" src="/assets/images/var_arc-c922fa1f418fb6125ecc7d0af1534c3c.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="3-function-introduction"></a>3 Function introduction<a class="hash-link" href="#3-function-introduction" title="Direct link to heading">#</a></h3><p>     The variable types supported by Linkis are divided into custom variables and system built-in variables. The internal variables are predefined by Linkis and can be used directly. Then different variable types support different calculation formats: String supports +, integer decimal supports +-*/, date supports +-.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="31-built-in-variables"></a>3.1 Built-in variables<a class="hash-link" href="#31-built-in-variables" title="Direct link to heading">#</a></h3><p>The currently supported built-in variables are as follows:</p><table><thead><tr><th>variable name</th><th>variable type</th><th>variable meaning</th><th>variable value example</th></tr></thead><tbody><tr><td>run_date</td><td>String</td><td>Data statistics time (support user&#x27;s own setting, the default setting is the day before the current time), if the data of yesterday is executed today, it will be the time of yesterday, the format is yyyyMMdd</td><td>20180129</td></tr><tr><td>run_date_std</td><td>String</td><td>Data statistics time (standard date format), if yesterday&#x27;s data is executed today, it will be yesterday&#x27;s time, the format is yyyy-MM-dd</td><td>2018-01-29</td></tr><tr><td>run_today</td><td>String</td><td>The day after run_date (data statistics time), the format is yyyyMMdd</td><td>20211210</td></tr><tr><td>run_today_std</td><td>String</td><td>The day after run_date (data statistics time) (standard format), the format is yyyy-MM-dd</td><td>2021-12-10</td></tr><tr><td>run_mon</td><td>String</td><td>The month of the data statistics time, the format is yyyyMM</td><td>202112</td></tr><tr><td>run_mon_std</td><td>String</td><td>The month of the data statistics time (standard format), the format is yyyy-MM</td><td>2021-12</td></tr><tr><td>run_month_begin</td><td>String</td><td>The first day of the month in which the data is counted, in the format yyyyMMdd</td><td>20180101</td></tr><tr><td>run_month_begin_std</td><td>String</td><td>The first day of the month where the data statistics time is (standard date format), the format is yyyy-MM-dd</td><td>2018-01-01</td></tr><tr><td>run_month_now_begin</td><td>String</td><td>The first day of the month where run_today is in the format yyyyMMdd</td><td>20211201</td></tr><tr><td>run_month_now_begin_std</td><td>String</td><td>The first day of the month run_today (standard format), the format is yyyy-MM-dd</td><td>2021-12-01</td></tr><tr><td>run_month_end</td><td>String</td><td>The last day of the month in which the data is counted, in the format yyyyMMdd</td><td>20180131</td></tr><tr><td>run_month_end_std</td><td>String</td><td>The last day of the month in which the data is counted (standard date format), the format is yyyy-MM-dd</td><td>2018-01-31</td></tr><tr><td>run_month_now_end</td><td>String</td><td>The last day of the month where run_today is in the format yyyyMMdd</td><td>20211231</td></tr><tr><td>run_month_now_end_std</td><td>String</td><td>The last day of the month in which run_today is located (standard date format), the format is yyyy-MM-dd</td><td>2021-12-31</td></tr><tr><td>run_quarter_begin</td><td>String</td><td>The first day of the quarter in which the data is counted, in the format yyyyMMdd</td><td>20210401</td></tr><tr><td>run_quarter_end</td><td>String</td><td>The last day of the quarter in which the data is counted, in the format yyyyMMdd</td><td>20210630</td></tr><tr><td>run_half_year_begin</td><td>String</td><td>The first day of the half year where the data statistics time is located, in the format yyyyMMdd</td><td>20210101</td></tr><tr><td>run_half_year_end</td><td>String</td><td>The last day of the half year where the data statistics time is located, the format is yyyyMMdd</td><td>20210630</td></tr><tr><td>run_year_begin</td><td>String</td><td>The first day of the year in which the data is counted, in the format yyyyMMdd</td><td>20210101</td></tr><tr><td>run_year_end</td><td>String</td><td>The last day of the year in which the data is counted, in the format yyyyMMdd</td><td>20211231</td></tr><tr><td>run_quarter_begin_std</td><td>String</td><td>The first day of the quarter in which the data is counted (standard format), the format is yyyy-MM-dd</td><td>2021-10-01</td></tr><tr><td>run_quarter_end_std</td><td>String</td><td>The last day of the quarter where the data statistics time is located (standard format), the format is yyyy-MM-dd</td><td>2021-12-31</td></tr><tr><td>run_half_year_begin_std</td><td>String</td><td>The first day of the half year where the data statistics time is located (standard format), the format is yyyy-MM-dd</td><td>2021-07-01</td></tr><tr><td>run_half_year_end_std</td><td>String</td><td>The last day of the half year where the data statistics time is located (standard format), the format is yyyy-MM-dd</td><td>2021-12-31</td></tr><tr><td>run_year_begin_std</td><td>String</td><td>The first day of the year in which the data is counted (standard format), the format is yyyy-MM-dd</td><td>2021-01-01</td></tr><tr><td>run_year_end_std</td><td>String</td><td>The last day of the year in which the data is counted (standard format), the format is yyyy-MM-dd</td><td>2021-12-31</td></tr></tbody></table><p>details:</p><ol><li>run_date is the core built-in date variable, which supports user-defined date. If not specified, the default is the day before the current system time.</li><li>Definition of other derived built-in date variables: other date built-in variables are calculated relative to run_date. Once run_date changes, other variable values ​​will also change automatically. Other date variables do not support setting initial values ​​and can only be modified by modifying run_date. .</li><li>Built-in variables support more abundant usage scenarios: ${run_date-1} is the day before run_data; ${run_month_begin-1} is the first day of the previous month of run_month_begin, where -1 means minus one month.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="32-custom-variables"></a>3.2 Custom variables<a class="hash-link" href="#32-custom-variables" title="Direct link to heading">#</a></h3><p>     What are custom variables? User variables that are defined first and then used. User-defined variables temporarily support the definition of strings, integers, and floating-point variables. Strings support the + method, and integers and floating-point numbers support the +-*/ method. User-defined variables do not conflict with the set variable syntax supported by SparkSQL and HQL, but the same name is not allowed. How to define and use custom variables? as follows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">## Defined in the code, specified before the task code</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sql type definition method:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--@set f=20.1</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">The python/shell types are defined as follows:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#@set f=20.1</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Note: Only one variable can be defined on one line</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The use is directly used in the code through <code>{varName expression}, such as ${f*2}</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="33-variable-scope"></a>3.3 Variable scope<a class="hash-link" href="#33-variable-scope" title="Direct link to heading">#</a></h3><p>Custom variables in linkis also have scope, and the priority is that the variable defined in the script is greater than the Variable defined in the task parameter is greater than the built-in run_date variable. The task parameters are defined as follows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">##restful</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;executionContent&quot;: {&quot;code&quot;: &quot;select \&quot;${f-1}\&quot;;&quot;, &quot;runType&quot;: &quot;sql&quot;},</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;params&quot;: {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    &quot;variable&quot;: {f: &quot;20.1&quot;},</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    &quot;configuration&quot;: {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            &quot;runtime&quot;: {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                &quot;linkis.openlookeng.url&quot;:&quot;http://127.0.0.1:9090&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    },</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;source&quot;: {&quot;scriptPath&quot;: &quot;file:///mnt/bdp/hadoop/1.sql&quot;},</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;labels&quot;: {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;engineType&quot;: &quot;spark-2.4.3&quot;,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;userCreator&quot;: &quot;hadoop-IDE&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">## java SDK</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">JobSubmitAction.builder</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .addExecuteCode(code)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .setStartupParams(startupMap)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .setUser(user) //submit user</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .addExecuteUser(user) //execute user</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .setLabels(labels)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .setVariableMap(varMap) //setVar</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .build</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/incubator-linkis-website/edit/dev/versioned_docs/version-1.3.0/architecture/commons/variable.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/latest/architecture/difference-between-1.0-and-0.x"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Difference Between 1.0 &amp; 0.x</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/latest/architecture/commons/rpc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">RPC Module »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-general" class="table-of-contents__link">1. General</a><ul><li><a href="#requirements-background" class="table-of-contents__link">Requirements Background</a></li><li><a href="#target" class="table-of-contents__link">Target</a></li></ul></li><li><a href="#2-overall-design" class="table-of-contents__link">2. Overall Design</a><ul><li><a href="#21-technical-architecture" class="table-of-contents__link">2.1 Technical Architecture</a></li><li><a href="#3-function-introduction" class="table-of-contents__link">3 Function introduction</a></li><li><a href="#31-built-in-variables" class="table-of-contents__link">3.1 Built-in variables</a></li><li><a href="#32-custom-variables" class="table-of-contents__link">3.2 Custom variables</a></li><li><a href="#33-variable-scope" class="table-of-contents__link">3.3 Variable scope</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Linkis</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/latest/introduction">Document</a></li><li class="footer__item"><a class="footer__link-item" href="/faq/main">FAQ</a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/releases" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Releases<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/apache/incubator-linkis" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Issue Tracker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/pulls" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Pull Requests<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Subscribe Mailing List</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community/how-to-subscribe">How to Subscribe</a></li><li class="footer__item"><a href="mailto:dev-subscribe@linkis.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Subscribe Mail<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://lists.apache.org/list.html?dev@linkis.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Mail Archive<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div><img style="height:50px" alt="Apache Software Foundation" src="/img/incubator-logo.svg"><p style="color: #999999;  padding: 0 20px 30px;font-weight:400;text-align:left">Apache Linkis is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p><p></p>
             <p style="padding: 0 20px 30px;color: #999999;font-weight: 400;"> Copyright © 2022 The Apache Software Foundation. Licensed under the Apache License, Version 2.0. Apache Linkis, Apache Incubator, Apache, the Apache feather logo, the Apache Linkis logo and the Apache Incubator project logo are trademarks of The Apache Software Foundation.</p>
             <div></div></div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.8ce9165d.js"></script>
<script src="/assets/js/main.ffdafd4c.js"></script>
</body>
</html>